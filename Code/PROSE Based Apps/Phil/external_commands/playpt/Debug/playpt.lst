Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Play Protracker Module V1.03 (sample data can
                           A     2    
                           A     3    ;----------------------------------------------
                           A     4    
       0000010A            A     5    amoeba_version_req	equ	10ah			; 0 = d
       0000003C            A     6    prose_version_req	equ 03ch			; 0 = d
       00000001            A     7    ADL_mode			equ 1				; 0 if 
       00010000            A     8    load_location		equ 10000h			; anywh
                           A     9    
                           B     0    			include	'PROSE_header.asm'
                           B     1    
                           B     2    ;----------------------------------------------
                           B     3    
                           C     0    include "ez80_cpu_equates.asm"
                           C     1    ;--- EZ80 Internal Ports ----------------------
                           C     2    
       0000009A            C     3    PB_DR			equ 09ah
       0000009B            C     4    PB_DDR			equ 09bh
       0000009C            C     5    PB_ALT1			equ 09ch
       0000009D            C     6    PB_ALT2			equ 09dh
                           C     7    
       0000009E            C     8    PC_DR			equ 09eh
       0000009F            C     9    PC_DDR			equ 09fh
       000000A0            C    10    PC_ALT1			equ 0a0h
       000000A1            C    11    PC_ALT2			equ 0a1h
                           C    12    
       000000A2            C    13    PD_DR			equ 0a2h
       000000A3            C    14    PD_DDR			equ 0a3h
       000000A4            C    15    PD_ALT1			equ 0a4h
       000000A5            C    16    PD_ALT2			equ 0a5h
                           C    17    
       000000C0            C    18    UART0_RBR		equ 0c0h
       000000C0            C    19    UART0_THR		equ 0c0h
       000000C0            C    20    UART0_BRG_L		equ 0c0h
       000000C1            C    21    UART0_BRG_H		equ 0c1h
       000000C1            C    22    UART0_IER		equ 0c1h
       000000C2            C    23    UART0_FCTL		equ 0c2h
       000000C3            C    24    UART0_LCTL		equ 0c3h
       000000C4            C    25    UART0_MCTL		equ 0c4h
       000000C5            C    26    UART0_LSR		equ 0c5h
       000000C6            C    27    UART0_MSR		equ 0c6h
                           C    28    
       000000A8            C    29    CS0_LBR			equ 0a8h			;eZ80 wait 
       000000A9            C    30    CS0_UBR			equ 0a9h
       000000AA            C    31    CS0_CTL			equ 0aah			
       000000AB            C    32    CS1_LBR			equ 0abh			;eZ80 wait 
       000000AC            C    33    CS1_UBR			equ 0ach
       000000AD            C    34    CS1_CTL			equ 0adh
       000000AE            C    35    CS2_LBR			equ 0aeh			;eZ80 wait 
       000000AF            C    36    CS2_UBR			equ 0afh
       000000B0            C    37    CS2_CTL			equ 0b0h
       000000B1            C    38    CS3_LBR			equ 0b1h			;eZ80 wait 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:   2


PC     Object              I  Line    Source ..\..\..\..\..\Includes\ez80_cpu_equates.asm
       000000B2            C    39    CS3_UBR			equ 0b2h
       000000B3            C    40    CS3_CTL			equ 0b3h
                           C    41    
       00000080            C    42    TMR0_CTL		equ 080h			;timer 0 eq
       00000081            C    43    TMR0_DR_L		equ 081h
       00000081            C    44    TMR0_RR_L		equ 081h
       00000082            C    45    TMR0_DR_H		equ 082h
       00000082            C    46    TMR0_RR_H		equ 082h
       00000092            C    47    TMR_ISS			equ 092h
                           C    48    
       00000083            C    49    TMR1_CTL		equ 083h 
       00000084            C    50    TMR1_RR_L		equ 084h
       00000085            C    51    TMR1_RR_H		equ 085h
                           C    52    
       000000ED            C    53    RTC_CTRL		equ 0edh			;RTC equate
       000000EC            C    54    RTC_ACTRL		equ 0ech
       000000E0            C    55    RTC_SEC			equ 0e0h
       000000E1            C    56    RTC_MIN			equ 0e1h
       000000E2            C    57    RTC_HRS			equ 0e2h
       000000E3            C    58    RTC_DOW			equ 0e3h
       000000E4            C    59    RTC_DOM			equ 0e4h
       000000E5            C    60    RTC_MON			equ 0e5h
       000000E6            C    61    RTC_YR			equ 0e6h
       000000E7            C    62    RTC_CEN			equ 0e7h
                           C    63    
                           C    64    ;----------------------------------------------
                           B     5    
                           C     0    include "amoeba_hardware_equates.asm"
                           C     1    ;-- AMOEBA Hardware equates -------------------
                           C     2    
       00000000            C     3    port_pic_data  			equ 000h
       00000001            C     4    port_pic_ctrl			equ 001h
       00000001            C     5    port_hw_flags			equ 001h
       00000002            C     6    port_sdc_ctrl			equ 002h	; this is a
       00000002            C     7    port_keyboard_data		equ 002h
       00000003            C     8    port_sdc_data		 	equ 003h	
       00000004            C     9    port_memory_paging		equ 004h
       00000005            C    10    port_irq_ctrl			equ 005h
       00000005            C    11    port_irq_flags			equ 005h
       00000006            C    12    port_nmi_ack			equ 006h
       00000007            C    13    port_ps2_ctrl			equ 007h
       00000008            C    14    port_selector			equ 008h
       00000006            C    15    port_mouse_data			equ 006h
       00000009            C    16    port_clear_flags			equ 009h
       0000000A            C    17    port_hw_enable			equ 00ah
                           C    18    
       00000000            C    19    sdc_power				equ 0		;(port_sd_c
       00000001            C    20    sdc_cs					equ 1		;(port_sd_c
       00000002            C    21    sdc_speed				equ 2 		;(port_sd_c
                           C    22    
       00000004            C    23    sdc_serializer_busy		equ 4 		;(port_hw_f
       00000005            C    24    vrt						equ 5		;(port_hw_f
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:   3


PC     Object              I  Line    Source ..\..\..\..\..\Includes\amoeba_hardware_equates.asm
                           C    25    
                           C    26    
                           C    27    ;-- Memory locations --------------------------
                           C    28    
       00000000            C    29    sysram_addr				equ 0000000h
       00800000            C    30    vram_a_addr				equ 0800000h
       00C00000            C    31    vram_b_addr				equ 0c00000h
                           C    32    
                           C    33    ;-- Hardware registers ------------------------
                           C    34    
       00FF0000            C    35    hw_palette				equ 0ff0000h
       00FF0800            C    36    hw_sprite_registers		equ 0ff0800h
       00FF1000            C    37    hw_video_parameters		equ 0ff1000h
       00FF1400            C    38    hw_audio_registers		equ 0ff1400h
       00FF1800            C    39    hw_video_settings		equ 0ff1800h
                           C    40    
       00FF1000            C    41    tilemap_parameters		equ hw_video_parameters
       00FF1020            C    42    bitmap_parameters		equ hw_video_parameters
                           C    43    
       00FF1800            C    44    video_control			equ hw_video_settings+0
       00FF1801            C    45    sprite_control			equ hw_video_settings+0
       00FF1802            C    46    bgnd_palette_select		equ hw_video_settings+0
       00FF1803            C    47    sprite_palette_select	equ hw_video_settings+0
       00FF1804            C    48    right_border_position	equ hw_video_settings+0
       00FF1805            C    49    irq_line_lo				equ hw_video_settings+0
       00FF1806            C    50    irq_line_hi				equ hw_video_settings+0
                           C    51    
                           C    52    ;----------------------------------------------
                           B     7    
                           C     0    include "prose_kernal_labels.asm"
                           C     1    ;--------- PROSE Kernal Routine labels --------
                           C     2    		
       00000000            C     3    kr_mount_volumes				equ 00h	
       00000001            C     4    kr_get_device_info				equ 01h	
       00000002            C     5    kr_check_volume_format			equ 02h	
       00000003            C     6    kr_change_volume				equ 03h	
       00000004            C     7    kr_get_volume_info				equ 04h	
       00000005            C     8    kr_format_device				equ 05h	
       00000006            C     9    kr_make_dir						equ 06h
                           C    10    
       00000007            C    11    kr_change_dir					equ 07h	
       00000008            C    12    kr_parent_dir					equ 08h	
       00000009            C    13    kr_root_dir						equ 09h
       0000000A            C    14    kr_delete_dir					equ 0ah
                           C    15    
       0000000B            C    16    kr_find_file					equ 0bh
       0000000B            C    17    kr_open_file					equ 0bh		; p
                           C    18    
       0000000C            C    19    kr_set_file_pointer				equ 0ch
       0000000D            C    20    kr_set_load_length				equ 0dh
       0000000E            C    21    kr_read_file					equ 0eh
                           C    22    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:   4


PC     Object              I  Line    Source ..\..\..\..\..\Includes\prose_kernal_labels.asm
       0000000F            C    23    kr_erase_file					equ 0fh
       00000010            C    24    kr_rename_file					equ 10h
       00000011            C    25    kr_create_file					equ 11h
       00000012            C    26    kr_write_file					equ 12h
       00000013            C    27    kr_get_total_sectors			equ 13h
       00000014            C    28    kr_dir_list_first_entry			equ 14h
       00000015            C    29    kr_dir_list_get_entry			equ 15h
       00000016            C    30    kr_dir_list_next_entry			equ 16h
                           C    31    
       00000017            C    32    kr_read_sector					equ 17h
       00000018            C    33    kr_write_sector					equ 18h
       00000019            C    34    kr_file_sector_list				equ 19h
       0000001A            C    35    kr_get_dir_cluster				equ 1ah
       0000001B            C    36    kr_set_dir_cluster				equ 1bh
       0000001C            C    37    kr_get_dir_name					equ 1ch
       0000001D            C    38    kr_wait_key						equ 1dh
       0000001E            C    39    kr_get_key						equ 1eh
                           C    40    
       0000001F            C    41    kr_get_key_mod_flags			equ 1fh
       00000020            C    42    kr_serial_receive_header		equ 20h
       00000021            C    43    kr_serial_receive_file			equ 21h
       00000022            C    44    kr_serial_send_file				equ 22h
       00000023            C    45    kr_serial_tx_byte				equ 23h
       00000024            C    46    kr_serial_rx_byte				equ 24h
                           C    47    
       00000025            C    48    kr_print_string					equ 25h
       00000026            C    49    kr_clear_screen					equ 26h
       00000027            C    50    kr_wait_vrt						equ 27h
       00000028            C    51    kr_set_cursor_position			equ 28h
       00000029            C    52    kr_plot_char					equ 29h
       0000002A            C    53    kr_set_pen						equ 2ah
       0000002B            C    54    kr_background_colours			equ 2bh
       0000002C            C    55    kr_draw_cursor					equ 2ch
       0000002D            C    56    kr_get_pen						equ 2dh
       0000002E            C    57    kr_scroll_up					equ 2eh
       0000002F            C    58    kr_os_display					equ 2fh
                           C    59    
       00000030            C    60    kr_get_display_size				equ 30h	
       00000030            C    61    kr_get_video_mode				equ 30h		;pr
                           C    62    
       00000031            C    63    kr_get_charmap_addr_xy			equ 31h
       00000032            C    64    kr_get_cursor_position			equ 32h
                           C    65    
       00000033            C    66    kr_set_envar					equ 33h
       00000034            C    67    kr_get_envar					equ 34h
       00000035            C    68    kr_delete_envar					equ 35h
                           C    69    
       00000036            C    70    kr_init_mouse					equ 36h 	; n
                           C    71    
       00000037            C    72    kr_get_mouse_position			equ 37h
                           C    73    
       00000038            C    74    kr_get_mouse_motion				equ 38h
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:   5


PC     Object              I  Line    Source ..\..\..\..\..\Includes\prose_kernal_labels.asm
       00000038            C    75    kr_get_mouse_counters			equ 38h		;pr
                           C    76    
       00000039            C    77    kr_time_delay					equ 39h
       0000003A            C    78    kr_compare_strings				equ 3ah
       0000003B            C    79    kr_hex_byte_to_ascii			equ 3bh
       0000003C            C    80    kr_ascii_to_hex_word			equ 3ch
       0000003D            C    81    kr_get_string					equ 3dh
                           C    82    
       0000003E            C    83    kr_get_version					equ 3eh
       0000003F            C    84    kr_dont_store_registers			equ 3fh
       00000040            C    85    kr_get_font_info				equ 40h
       00000041            C    86    kr_read_rtc						equ 41h
       00000042            C    87    kr_write_rtc					equ 42h
                           C    88    
       00000043            C    89    kr_get_keymap_location			equ 43h
                           C    90    
       00000044            C    91    kr_get_os_high_mem				equ 44h
       00000044            C    92    kr_get_mem_base					equ 44h		
       00000044            C    93    kr_get_ram_base					equ 44h		;pr
                           C    94    
       00000045            C    95    kr_play_audio					equ 45h
       00000046            C    96    kr_disable_audio				equ 46h
       00000047            C    97    kr_get_joysticks				equ 47h
       00000048            C    98    kr_set_video_mode				equ 48h
       00000049            C    99    kr_set_cursor_image				equ 49h
       0000004A            C   100    kr_remove_cursor				equ 4ah
       0000004B            C   101    kr_char_to_font					equ 4bh
                           C   102    
       0000004C            C   103    kr_get_disk_sector_ptr			equ 4ch
       0000004D            C   104    kr_set_timeout					equ 4dh
       0000004E            C   105    kr_test_timeout					equ 4eh
       0000004F            C   106    kr_set_pointer					equ 4fh
       00000050            C   107    kr_allocate_ram					equ 50h
       00000051            C   108    kr_deallocate_ram				equ 51h
                           C   109    
       00000052            C   110    kr_get_mem_top					equ 52h
       00000052            C   111    kr_get_ram_top					equ 52h		;pr
                           C   112    
       00000053            C   113    kr_init_msec_counter			equ 53h
       00000054            C   114    kr_read_msec_counter			equ 54h
       00000055            C   115    kr_parse_path					equ 55h
                           C   116    
                           C   117    ;----------------------------------------------
                           B     9    
                           C     0    include "misc_system_equates.asm"
                           C     1    
                           C     2    ;-- System Equates ----------------------------
                           C     3    
       00000A00            C     4    os_location			equ 0a00h
                           C     5    
       00000A14            C     6    prose_return 		equ os_location + 14h
       00000A18            C     7    prose_relativize_hl	equ os_location + 18h
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:   6


PC     Object              I  Line    Source ..\..\..\..\..\Includes\misc_system_equates.asm
       00000A1C            C     8    prose_relative_call	equ os_location + 1ch
                           C     9    
       00000A20            C    10    prose_kernal 		equ os_location + 20h
                           C    11    
                           C    12    ;----------------------------------------------
                           C    13    
                           C    14    ; Add to sprite locations to position a 0,0 spr
                           C    15    
       0000009A            C    16    x_display_offset	equ 09ah
       00000025            C    17    y_display_offset	equ 025h
                           C    18    
                           C    19    ;----------------------------------------------
                           B    11    
                           B    12    ;----------------------------------------------
                           B    13    
                           B    14    prose_call : MACRO kernal_routine_required
                           B    15    	
                           B    16    	ld a,kernal_routine_required
                           B    17    	call.lil prose_kernal
                           B    18    
                           B    19    ENDMACRO prose_call
                           B    20    	
                           B    21    ;----------------------------------------------
                           B    22    ; Standard PROSE executable header
                           B    23    ;----------------------------------------------
                           B    24    
                           B    25    
                           B    26    	IF ADL_mode = 0
                           B    27    		org load_location&0ffffh	; if Z80 mo
                           B    28    	ELSE
010000                     B    29    		org load_location			; otherwise
                           B    30    	ENDIF
                           B    31    	
                           B    32    		.assume ADL = 1				; All PROSE
                           B    33    
010000 18 0E               B    34    		jr skip_header				; $0 - Jump
010002 50524F              B    35    		db 'PRO'					; $2 - ASCI
010005 000001              B    36    mb_loc	dw24 load_location			; $5 - Desi
010008 000000              B    37    		dw24 0						; $8 - If >
01000B 3C00                B    38    		dw prose_version_req		; $B - If >
01000D 0A01                B    39    		dw amoeba_version_req		; $D - If >
01000F 01                  B    40    		db ADL_mode					; $F - Z80 
                           B    41    
010010                     B    42    skip_header
                           B    43    	
                           B    44    	IF ADL_mode = 0 
                           B    45    		
                           B    46    mbase_offset equ load_location & 0ff0000h
                           B    47    
                           B    48    		ld a,load_location/65536	; Additiona
                           B    49    		ld MB,a						; Set MBASE
                           B    50    		jp.sis go_z80_mode			; switches 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:   7


PC     Object              I  Line    Source ..\..\..\..\..\Includes\PROSE_header.asm
                           B    51    
                           B    52    go_z80_mode
                           B    53    
                           B    54    		.assume ADL = 0
                           B    55    
                           B    56    	ENDIF
                           B    57    	
                           B    58    ;----------------------------------------------
                           B    59    	
                           A    11    
                           A    12    ;----------------------------------------------
                           A    13    ; ADL-mode user program follows..
                           A    14    ;----------------------------------------------
                           A    15    
010010 E5                  A    16    			push hl
010011 3E04                A    17    			ld a,kr_get_volume_info		;store 
010013 5BCD200A 00         A    18    			call.lil prose_kernal
010018 32 4C 00 01         A    19    			ld (orig_volume),a
01001C 3E1A                A    20    			ld a,kr_get_dir_cluster
01001E 5BCD200A 00         A    21    			call.lil prose_kernal
010023 ED53 4D 00 01       A    22    			ld (orig_dir_cluster),de
010028 E1                  A    23     			pop hl
                           A    24    			
010029 CD 50 00 01         A    25    			call my_prog
                           A    26    			
01002D F5                  A    27    			push af						;restor
01002E 3A 4C 00 01         A    28    			ld a,(orig_volume)
010032 5F                  A    29    			ld e,a
010033 3E03                A    30    			ld a,kr_change_volume
010035 5BCD200A 00         A    31    			call.lil prose_kernal
01003A ED5B 4D 00 01       A    32    			ld de,(orig_dir_cluster)
01003F 3E1B                A    33    			ld a,kr_set_dir_cluster
010041 5BCD200A 00         A    34    			call.lil prose_kernal
010046 F1                  A    35    			pop af
010047 5BC3140A 00         A    36    			jp.lil prose_return
                           A    37    
                           A    38    
01004C 00                  A    39    orig_volume			db 0
01004D 000000              A    40    orig_dir_cluster	dw24 0
                           A    41    
                           A    42    ;----------------------------------------------
                           A    43    					
010050 7E                  A    44    my_prog		ld a,(hl)						; g
010051 B7                  A    45    			or a
010052 20 0D               A    46    			jr nz,got_args
                           A    47    
010054 21 5B 01 01         A    48    			ld hl,no_args_txt				; s
                           A    49    			prose_call kr_print_string
01005F AF                  A    50    			xor a
010060 C9                  A    51    			ret
                           A    52    
010061 1E00                A    53    got_args	ld e,0
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:   8


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\ez80p\Code\PROSEB~1\Phil\EXTERN~1\playpt\src\playpt.asm
                           A    54    			prose_call kr_parse_path
                           A    55    
                           A    56    			prose_call kr_find_file			; l
010071 C0                  A    57    			ret nz
010072 ED53 82 01 01       A    58    			ld (pt_mod_length),de			; n
                           A    59    			
010077 21 20 01 01         A    60    			ld hl,loading_txt					                           A    61    			prose_call kr_print_string
                           A    62    
010082 21 AE 19 01         A    63    			ld hl,music_module
                           A    64    			prose_call kr_read_file
01008D C0                  A    65    			ret nz
                           A    66    			
01008E AF                  A    67    			xor a
01008F 32 55 11 01         A    68    			ld (relocated_samples),a
010093 CD 85 01 01         A    69    			call init_tracker				; i
                           A    70    			
010097 21 AE 19 01         A    71    			ld hl,music_module			
01009B ED4B 82 01 01       A    72    			ld bc,(pt_mod_length)
0100A0 09                  A    73    			add hl,bc						; h
0100A1 AF                  A    74    			xor a
0100A2 ED4B 52 11 01       A    75    			ld bc,(sample_base)
0100A7 ED42                A    76    			sbc hl,bc						; s
0100A9 E5                  A    77    			push hl
0100AA C1                  A    78    			pop bc							; b
0100AB 2A 52 11 01         A    79    			ld hl,(sample_base)
0100AF 110000C0            A    80    			ld de,vram_b_addr
0100B3 EDB0                A    81    			ldir							; c
                           A    82    			
0100B5 3E01                A    83    			ld a,1							; i
0100B7 32 55 11 01         A    84    			ld (relocated_samples),a
0100BB 21000000            A    85    			ld hl,0							; o
0100BF 22 52 11 01         A    86    			ld (sample_base),hl
0100C3 CD 85 01 01         A    87    			call init_tracker
                           A    88    					
                           A    89    ;----------------------------------------------
                           A    90    
0100C7 21 3E 01 01         A    91    			ld hl,playing_txt					                           A    92    			prose_call kr_print_string
                           A    93    						
0100D2 3E81                A    94    			ld a,81h
0100D4 ED390A              A    95    			out0 (port_hw_enable),a				                           A    96    			
0100D7 118F0200            A    97    			ld de,655							                           A    98    			prose_call kr_set_timeout
                           A    99    			
                           A   100    			
0100E2                     A   101    wait_50hz	prose_call kr_test_timeout			0100E9 28 0F               A   102    			jr z,not_timedout
                           A   103    
0100EB 118F0200            A   104    			ld de,655							                           A   105    			prose_call kr_set_timeout
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:   9


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\ez80p\Code\PROSEB~1\Phil\EXTERN~1\playpt\src\playpt.asm
0100F6 CD 17 01 01         A   106    			call protracker_update			
                           A   107    			
                           A   108    
0100FA                     A   109    not_timedout
                           A   110    				
                           A   111    			prose_call kr_get_key				010101 FE76                A   112    			cp 076h
010103 20 DD               A   113    			jr nz,wait_50hz
                           A   114    
                           A   115    
010105 DD210014 FF         A   116    			ld ix,hw_audio_registers			01010A 0608                A   117    			ld b,8
01010C DD360C00            A   118    quiet_lp	ld (ix+0ch),0
010110 ED3210              A   119    			lea ix,ix+16
010113 10 F7               A   120    			djnz quiet_lp
                           A   121    		
010115 AF                  A   122    			xor a
010116 C9                  A   123    			ret			
                           A   124    
                           A   125    
                           A   126    ;----------------------------------------------
                           A   127    
010117                     A   128    protracker_update
                           A   129    
                           A   130    ; call this routine every 50 Hz
                           A   131    
                           A   132    ;			ld a,08h							                           A   133    ;			ld (hw_palette),a					                           A   134    			
010117 CD 08 02 01         A   135    			call play_tracker					                           A   136    			
                           A   137    ;			ld a,80h							                           A   138    ;			ld (hw_palette),a					                           A   139    			
01011B CD 55 12 01         A   140    			call update_audio_hardware			                           A   141    			
                           A   142    ;			ld a,00h							                           A   143    ;			ld (hw_palette),a					01011F C9                  A   144    			ret
                           A   145    			
                           A   146    ;----------------------------------------------
                           A   147    		
010120 4C6F6164 696E6720   A   148    loading_txt		db 'Loading Protracker module..
010128 50726F74 7261636B 
010130 6572206D 6F64756C 
010138 652E2E20 0B00 
01013E 506C6179 696E672E   A   149    playing_txt		db 'Playing. Press ESC to quit.
010146 20507265 73732045 
01014E 53432074 6F207175 
010156 69742E0B 00 
                           A   150    
01015B 55736167 6520504C   A   151    no_args_txt		db 'Usage PLAYPT [protracker mo
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  10


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\ez80p\Code\PROSEB~1\Phil\EXTERN~1\playpt\src\playpt.asm
010163 41595054 205B7072 
01016B 6F747261 636B6572 
010173 206D6F64 756C6520 
01017B 6E616D65 5D0B00 
                           A   152    
010182 000000              A   153    pt_mod_length	dw24 0
                           A   154    
                           A   155    ;----------------------------------------------
                           A   156    		
                           B     0    			include "routines/ADL_mode_Protrack
                           B     1    ;----------------------------------------------
                           B     2    ; ADL mode eZ80 Protracker Music Player - V1.01
                           B     3    ; http://www.retroleum.co.uk
                           B     4    ;
                           B     5    ; SYNTAX ZDSII STANDARD.. STILL NOT OPTIMIZED A
                           B     6    ;
                           B     7    ; Revisions:
                           B     8    ; ----------
                           B     9    ;
                           B    10    ; V1.01 Arpeggio fix 
                           B    11    ; V1.00 First version of ADL-mode player
                           B    12    ; 
                           B    13    ; Known issues:
                           B    14    ; -------------
                           B    15    ; $EF - invert loop is not implemented (rarely 
                           B    16    ;
                           B    17    ;----------------------------------------------
                           B    18    ;
                           B    19    ; ADL mode eZ80 Code to play standard 31 instru
                           B    20    ;
                           B    21    ; The code has been designed so that is hardwar
                           B    22    ; does not write to any hardware registers. It 
                           B    23    ; below) for the Amiga hardware registers which
                           B    24    ; to drive whatever is the output hardware.
                           B    25    ;
                           B    26    ; Equates (must be defined in external code)
                           B    27    ; -------
                           B    28    ; "music_module" = location of protracker modul
                           B    29    ; The music module must be located at a word ad
                           B    30    ;
                           B    31    ; Routines:
                           B    32    ; ---------
                           B    33    ; call "init_tracker" to initialize/reset tune
                           B    34    ; call "play_tracker" every 50th of a second to
                           B    35    ; call your conversion routine after this.)
                           B    36    ;
                           B    37    ; Variables:
                           B    38    ; ----------
                           B    39    ; "relocated_samples" (byte) - if set to 1, the
                           B    40    ; by the "init_tracker" routine and will remain
                           B    41    ; the sample data to be seperated from the modu
                           B    42    ; audio RAM.
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  11


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B    43    ;
                           B    44    ; Replacing the Amiga hardware registers is a b
                           B    45    ; These begin at "channel_data". There are 38 b
                           B    46    ; within each block are:
                           B    47    ;
                           B    48    ; "sample_location" (24 bit address)	
                           B    49    ; "sample_length" (24 bit value in bytes, NOT W
                           B    50    ;
                           B    51    ; "sample_loop_location" (24 bit address)		                           B    52    ; "sample_loop_length" (24 bit value in bytes, 
                           B    53    ;
                           B    54    ; "period_lo" (forms a 16 bit word with period_
                           B    55    ; "period_hi" (see above)
                           B    56    ;
                           B    57    ; "volume" (8 bit - values: 0 to 64, same as Am
                           B    58    ;
                           B    59    ; "control_bits" (8 bit)
                           B    60    ; When bit 0 of each channel's control_bits var
                           B    61    ; routine should trigger a sample (ie: reload s
                           B    62    ; The conversion routine should clear bit 0 of 
                           B    63    ;
                           B    64    ; "filter_on_off" (BYTE) reads ONE if player ha
                           B    65    ; zero if not. (Whether or not this is of any u
                           B    66    
                           B    67    ;==============================================
                           B    68    ; Start of hardware-agnostic specific eZ80 Prot
                           B    69    ;==============================================
                           B    70    
                           B    71    .assume ADL = 1
                           B    72    
010185                     B    73    init_tracker
                           B    74    
010185 3E06                B    75    				ld a,6							010187 32 B6 11 01         B    76    				ld (songspeed),a
01018B AF                  B    77    				xor a							01018C 32 B3 11 01         B    78    				ld (ticker),a
010190 32 B4 11 01         B    79    				ld (songpos),a
010194 32 B5 11 01         B    80    				ld (patindex),a
010198 32 B7 11 01         B    81    				ld (arpeggio_counter),a
01019C 32 B8 11 01         B    82    				ld (pattloop_pos),a
0101A0 32 B9 11 01         B    83    				ld (pattloop_count),a
0101A4 32 BA 11 01         B    84    				ld (pattdelay_count),a	
0101A8 32 BB 11 01         B    85    				ld (pattdelay_flag),a	
0101AC 21 BD 11 01         B    86    				ld hl,channel_data
0101B0 06 98               B    87    				ld b,vars_per_channel*4
0101B2 77                  B    88    clchdlp			ld (hl),a
0101B3 23                  B    89    				inc hl
0101B4 10 FC               B    90    				djnz clchdlp
                           B    91    
0101B6 2A 52 11 01         B    92    				ld hl,(sample_base)
0101BA 3A 55 11 01         B    93    				ld a,(relocated_samples)
0101BE B7                  B    94    				or a
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  12


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
0101BF 20 21               B    95    				jr nz,use_reloc_sb
                           B    96    				
0101C1 21 66 1D 01         B    97    				ld hl,music_module+952			0101C5 0680                B    98    				ld b,128						0101C7 0E00                B    99    				ld c,0
0101C9 7E                  B   100    ptfhplp			ld a,(hl)	
0101CA B9                  B   101    				cp c
0101CB 38 01               B   102    				jr c,patlower
0101CD 4F                  B   103    				ld c,a
0101CE 23                  B   104    patlower		inc hl
0101CF 10 F8               B   105    				djnz ptfhplp
0101D1 0C                  B   106    				inc c
0101D2 21000000            B   107    				ld hl,0
0101D6 61                  B   108    				ld h,c
0101D7 29                  B   109    				add hl,hl
0101D8 29                  B   110    				add hl,hl						0101D9 01 EA 1D 01         B   111    				ld bc,music_module+1084			0101DD 09                  B   112    				add hl,bc						0101DE 22 52 11 01         B   113    				ld (sample_base),hl
                           B   114    
0101E2 DD21 56 11 01       B   115    use_reloc_sb	ld ix,sample_location_list		0101E7 FD21 D8 19 01       B   116    				ld iy,music_module+42
0101EC 061F                B   117    				ld b,31
0101EE DD2F00              B   118    bsstlp			ld (ix),hl						0101F1 11000000            B   119    				ld de,0							0101F5 FD5600              B   120    				ld d,(iy)
0101F8 FD5E01              B   121    				ld e,(iy+1)
0101FB EB                  B   122    				ex de,hl
0101FC 29                  B   123    				add hl,hl						0101FD EB                  B   124    				ex de,hl
0101FE 19                  B   125    				add hl,de				
0101FF ED3203              B   126    				lea ix,ix+3		
010202 ED331E              B   127    				lea iy,iy+30					010205 10 E7               B   128    				djnz bsstlp
010207 C9                  B   129    				ret
                           B   130    
                           B   131    ;----------------------------------------------
                           B   132    
010208                     B   133    play_tracker
                           B   134    
010208 3A B3 11 01         B   135    				ld a,(ticker)
01020C B7                  B   136    				or a			
01020D C2 C6 03 01         B   137    				jp nz,not_new_line
                           B   138    
010211 3A B4 11 01         B   139    				ld a,(songpos)					010215 01000000            B   140    				ld bc,0
010219 4F                  B   141    				ld c,a
01021A 21 66 1D 01         B   142    				ld hl,music_module+952			01021E 09                  B   143    				add hl,bc						01021F 46                  B   144    				ld b,(hl)			
010220 0E00                B   145    				ld c,0
010222 CB20                B   146    				sla b
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  13


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010224 CB20                B   147    				sla b							                           B   148    				
010226 3A B5 11 01         B   149    				ld a,(patindex)					01022A 21001000            B   150    				ld hl,1000h						01022E 6F                  B   151    				ld l,a
01022F ED6C                B   152    				mlt hl							010231 09                  B   153    				add hl,bc						010232 EB                  B   154    				ex de,hl						                           B   155    				
010233 FD21 BD 11 01       B   156    				ld iy,channel_data	
010238 DD21 EA 1D 01       B   157    				ld ix,music_module+1084			01023D DD19                B   158    				add ix,de						01023F 0604                B   159    				ld b,4							010241 C5                  B   160    chan_loop		push bc
010242 DD7E00              B   161    				ld a,(ix)						010245 DDB601              B   162    				or (ix+1)
010248 DDB602              B   163    				or (ix+2)
01024B DDB603              B   164    				or (ix+3)
01024E 20 06               B   165    				jr nz,parse_dat
010250 FD36 04 FF          B   166    				ld (iy+fx_number),0ffh			010254 18 04               B   167    				jr skipchan	
010256 CD 67 02 01         B   168    parse_dat		call new_note_data	
01025A ED33 26             B   169    skipchan		lea iy,iy+vars_per_channel		01025D ED3204              B   170    				lea ix,ix+4						010260 C1                  B   171    				pop bc
010261 10 DE               B   172    				djnz chan_loop
010263 C3 D8 03 01         B   173    				jp tick_advance
                           B   174    
                           B   175    
                           B   176    ;----- New note routines ----------------------
                           B   177    
010267                     B   178    new_note_data
                           B   179    				
010267 FD36 12 00          B   180    				ld (iy+instrument_waiting),0
01026B DD7E00              B   181    				ld a,(ix)						01026E E6F0                B   182    				and 0f0h
010270 DD4602              B   183    				ld b,(ix+2)
010273 CB38                B   184    				srl b
010275 CB38                B   185    				srl b
010277 CB38                B   186    				srl b
010279 CB38                B   187    				srl b
01027B B0                  B   188    				or b			
01027C 28 55               B   189    				jr z,no_new_instrument			                           B   190    
01027E FD77 12             B   191    				ld (iy+instrument_waiting),a
010281 3D                  B   192    				dec a
010282 21 56 11 01         B   193    				ld hl,sample_location_list		010286 01030000            B   194    				ld bc,3
01028A 47                  B   195    				ld b,a
01028B ED4C                B   196    				mlt bc
01028D 09                  B   197    				add hl,bc						01028E ED07                B   198    				ld bc,(hl)
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  14


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010290 FD0F 17             B   199    				ld (iy+sample_location),bc		                           B   200    			
010293 011E0000            B   201    				ld bc,30						010297 47                  B   202    				ld b,a
010298 ED4C                B   203    				mlt bc
01029A 21 D8 19 01         B   204    				ld hl,music_module+42	
01029E 09                  B   205    				add hl,bc						01029F 11000000            B   206    				ld de,0
0102A3 56                  B   207    				ld d,(hl)
0102A4 23                  B   208    				inc hl
0102A5 5E                  B   209    				ld e,(hl)
0102A6 23                  B   210    				inc hl
0102A7 EB                  B   211    				ex de,hl
0102A8 29                  B   212    				add hl,hl
0102A9 EB                  B   213    				ex de,hl
0102AA FD1F 1A             B   214    				ld (iy+sample_length),de		                           B   215    								
0102AD 7E                  B   216    				ld a,(hl)			
0102AE E60F                B   217    				and 0fh
0102B0 FD77 14             B   218    				ld (iy+finetune),a				0102B3 23                  B   219    				inc hl
0102B4 7E                  B   220    				ld a,(hl)
0102B5 FD77 13             B   221    				ld (iy+volume_waiting),a		0102B8 23                  B   222    				inc hl
0102B9 46                  B   223    				ld b,(hl)						0102BA 23                  B   224    				inc hl
0102BB 4E                  B   225    				ld c,(hl)						0102BC 23                  B   226    				inc hl
0102BD E5                  B   227    				push hl
0102BE FD27 17             B   228    				ld hl,(iy+sample_location)
0102C1 09                  B   229    				add hl,bc						0102C2 09                  B   230    				add hl,bc						0102C3 FD2F 1D             B   231    				ld (iy+sample_loop_location),hl
0102C6 E1                  B   232    				pop hl	
0102C7 11000000            B   233    				ld de,0
0102CB 56                  B   234    				ld d,(hl)						0102CC 23                  B   235    				inc hl
0102CD 5E                  B   236    				ld e,(hl)						0102CE EB                  B   237    				ex de,hl
0102CF 29                  B   238    				add hl,hl
0102D0 FD2F 20             B   239    				ld (iy+sample_loop_length),hl	                           B   240    								
                           B   241    				
                           B   242    				
0102D3                     B   243    no_new_instrument	
                           B   244    
0102D3 DD7E00              B   245    				ld a,(ix)						0102D6 E60F                B   246    				and 0fh
0102D8 47                  B   247    				ld b,a
0102D9 DD4E01              B   248    				ld c,(ix+1)						                           B   249    					
0102DC DD7E03              B   250    				ld a,(ix+3)						Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  15


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
0102DF FD77 05             B   251    				ld (iy+fx_args),a				0102E2 DD7E02              B   252    				ld a,(ix+2)						0102E5 E60F                B   253    				and 0fh							0102E7 FD77 04             B   254    				ld (iy+fx_number),a
                           B   255    
0102EA FE03                B   256    				cp 3							0102EC CA 7A 03 01         B   257    				jp z,set_portadest				0102F0 FE05                B   258    				cp 5 			
0102F2 CA 7A 03 01         B   259    				jr z,set_portadest
                           B   260    
0102F6 FE0E                B   261    				cp 0eh							0102F8 20 11               B   262    				jr nz,no_ftoveride
0102FA FD7E 05             B   263    				ld a,(iy+fx_args)
0102FD E6F0                B   264    				and 0f0h
0102FF FE50                B   265    				cp 050h
010301 20 08               B   266    				jr nz,no_ftoveride
010303 FD7E 05             B   267    				ld a,(iy+fx_args)
010306 E60F                B   268    				and 0fh
010308 FD77 14             B   269    				ld (iy+finetune),a				                           B   270    
01030B                     B   271    no_ftoveride
                           B   272    
01030B FDCB 0F 9E          B   273    				res 3,(iy+control_bits)			01030F 78                  B   274    				ld a,b							010310 B1                  B   275    				or c							010311 28 16               B   276    				jr z,nonewp1
                           B   277    
010313 FDCB 0F DE          B   278    				set 3,(iy+control_bits)			010317 C5                  B   279    				push bc
010318 FD71 15             B   280    				ld (iy+arp_base_period_lo),c	01031B FD70 16             B   281    				ld (iy+arp_base_period_hi),b	01031E CD A3 03 01         B   282    				call finetune_bc_period
010322 FD71 06             B   283    				ld (iy+period_for_fx_lo),c		010325 FD70 07             B   284    				ld (iy+period_for_fx_hi),b
010328 C1                  B   285    				pop bc
                           B   286    				
010329 FD7E 04             B   287    nonewp1			ld a,(iy+fx_number)
01032C FE0E                B   288    				cp 0eh							01032E 20 0B               B   289    				jr nz,not_ed		 
010330 FD7E 05             B   290    				ld a,(iy+fx_args)
010333 E6F0                B   291    				and 0f0h
010335 FED0                B   292    				cp 0d0h
010337 CA 69 04 01         B   293    				jp z,check_more_fx
                           B   294    				
01033B 78                  B   295    not_ed			ld a,b							01033C B1                  B   296    				or c			
01033D 28 1A               B   297    				jr z,nonewp2
01033F FD4E 06             B   298    				ld c,(iy+period_for_fx_lo)		010342 FD46 07             B   299    				ld b,(iy+period_for_fx_hi)
010345 FD71 01             B   300    				ld (iy+period_lo),c
010348 FD70 02             B   301    				ld (iy+period_hi),b
01034B FDCB 0F C6          B   302    				set 0,(iy+control_bits)			Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  16


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
01034F FD7E 12             B   303    				ld a,(iy+instrument_waiting)	010352 B7                  B   304    				or a
010353 CA 69 04 01         B   305    				jp z,check_more_fx
010357 18 11               B   306    				jr do_vol						                           B   307    				
010359 FD7E 12             B   308    nonewp2			ld a,(iy+instrument_waiting)	01035C B7                  B   309    				or a							01035D CA 69 04 01         B   310    				jp z,check_more_fx
010361 FDBE 00             B   311    				cp (iy+instrument)			
010364 28 04               B   312    				jr z,do_vol
010366 FDCB 0F C6          B   313    				set 0,(iy+control_bits)
                           B   314    
01036A FD77 00             B   315    do_vol			ld (iy+instrument),a
01036D FD7E 13             B   316    				ld a,(iy+volume_waiting)		010370 FD77 03             B   317    				ld (iy+volume),a	
010373 FD77 08             B   318    				ld (iy+volume_for_fx),a			010376 C3 69 04 01         B   319    				jp check_more_fx
                           B   320    				
                           B   321    
01037A                     B   322    set_portadest
                           B   323    
01037A 78                  B   324    				ld a,b							01037B B1                  B   325    				or c			
01037C 28 0A               B   326    				jr z,spd_same			
01037E CD A3 03 01         B   327    				call finetune_bc_period
010382 FD71 10             B   328    				ld (iy+portamento_dest_lo),c	010385 FD70 11             B   329    				ld (iy+portamento_dest_hi),b
                           B   330    				
010388 FD7E 12             B   331    spd_same		ld a,(iy+instrument_waiting)	01038B B7                  B   332    				or a			
01038C C8                  B   333    				ret z
01038D FDBE 00             B   334    				cp (iy+instrument)				010390 28 07               B   335    				jr z,skiptrig
010392 FDCB 0F C6          B   336    				set 0,(iy+control_bits)			010396 FD77 00             B   337    				ld (iy+instrument),a
010399 FD7E 13             B   338    skiptrig		ld a,(iy+volume_waiting)
01039C FD77 03             B   339    				ld (iy+volume),a	
01039F FD77 08             B   340    				ld (iy+volume_for_fx),a	
0103A2 C9                  B   341    				ret
                           B   342    				
                           B   343    
                           B   344    
0103A3                     B   345    finetune_bc_period
                           B   346    
0103A3 FD7E 14             B   347    				ld a,(iy+finetune)				0103A6 B7                  B   348    				or a
0103A7 C8                  B   349    				ret z
                           B   350    
0103A8 21 B2 0C 01         B   351    				ld hl,period_table_p0			0103AC 11480000            B   352    				ld de,72
0103B0 57                  B   353    				ld d,a
0103B1 ED5C                B   354    				mlt de
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  17


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
0103B3 19                  B   355    				add hl,de
0103B4 EB                  B   356    				ex de,hl						                           B   357    				
0103B5 21 51 09 01         B   358    				ld hl,period_lookup_table-113
0103B9 09                  B   359    				add hl,bc
0103BA 7E                  B   360    				ld a,(hl)						0103BB 21000000            B   361    				ld hl,0
0103BF 6F                  B   362    				ld l,a
0103C0 29                  B   363    				add hl,hl						                           B   364    
0103C1 19                  B   365    				add hl,de						0103C2 4E                  B   366    				ld c,(hl)
0103C3 23                  B   367    				inc hl
0103C4 46                  B   368    				ld b,(hl)						0103C5 C9                  B   369    				ret
                           B   370    				
                           B   371    				
                           B   372    ;-------- "FX during line" routines -----------
                           B   373    
                           B   374    
0103C6                     B   375    not_new_line
                           B   376    
0103C6 FD21 BD 11 01       B   377    				ld iy,channel_data				0103CB 0604                B   378    				ld b,4							0103CD C5                  B   379    chanfxlp		push bc							0103CE CD 2A 04 01         B   380    				call check_fx		
0103D2 ED33 26             B   381    				lea iy,iy+vars_per_channel
0103D5 C1                  B   382    				pop bc
0103D6 10 F5               B   383    				djnz chanfxlp
                           B   384    				
0103D8                     B   385    tick_advance
                           B   386    
0103D8 21 B7 11 01         B   387    				ld hl,arpeggio_counter			0103DC 34                  B   388    				inc (hl)
0103DD 7E                  B   389    				ld a,(hl)
0103DE FE03                B   390    				cp 3
0103E0 20 02               B   391    				jr nz,arp_ok
0103E2 3600                B   392    				ld (hl),0
0103E4 21 B3 11 01         B   393    arp_ok			ld hl,ticker					0103E8 34                  B   394    				inc (hl)
0103E9 3A B6 11 01         B   395    				ld a,(songspeed)	
0103ED BE                  B   396    				cp (hl)							0103EE 20 39               B   397    				jr nz,nspwrap
0103F0 AF                  B   398    				xor a
0103F1 77                  B   399    				ld (hl),a						0103F2 32 B7 11 01         B   400    				ld (arpeggio_counter),a			0103F6 21 BA 11 01         B   401    				ld hl,pattdelay_count			0103FA B6                  B   402    				or (hl)
0103FB 28 05               B   403    				jr z,nopatdel
0103FD 35                  B   404    				dec (hl)						0103FE C3 29 04 01         B   405    				jp nspwrap
010402 AF                  B   406    nopatdel		xor a
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  18


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010403 32 BB 11 01         B   407    				ld (pattdelay_flag),a
010407 21 B5 11 01         B   408    				ld hl,patindex
01040B 34                  B   409    				inc (hl)						01040C 7E                  B   410    				ld a,(hl)
01040D FE40                B   411    				cp 64							01040F 20 18               B   412    				jr nz,nspwrap
010411 AF                  B   413    				xor a
010412 77                  B   414    				ld (hl),a
010413 32 B8 11 01         B   415    				ld (pattloop_pos),a				010417 32 B9 11 01         B   416    				ld (pattloop_count),a			01041B 21 B4 11 01         B   417    				ld hl,songpos		
01041F 34                  B   418    				inc (hl)						010420 3A 64 1D 01         B   419    				ld a,(music_module+950)
010424 BE                  B   420    				cp (hl)							010425 20 02               B   421    				jr nz,nspwrap
010427 3600                B   422    				ld (hl),0
010429 C9                  B   423    nspwrap			ret
                           B   424    
                           B   425    
                           B   426    ;----------------------------------------------
                           B   427    				
01042A FD7E 04             B   428    check_fx		ld a,(iy+fx_number)	
01042D B7                  B   429    				or a							01042E CA 91 04 01         B   430    				jp z,fx_arpeggio				010432 FE01                B   431    				cp 1
010434 CA E3 04 01         B   432    				jp z,fx_portamento_up
010438 FE02                B   433    				cp 2
01043A CA 0D 05 01         B   434    				jp z,fx_portamento_down
01043E FE03                B   435    				cp 3
010440 CA 37 05 01         B   436    				jp z,fx_tone_portamento
010444 FE04                B   437    				cp 4
010446 CA 11 06 01         B   438    				jp z,fx_vibrato
01044A FE05                B   439    				cp 5
01044C CA AD 06 01         B   440    				jp z,fx_tone_portamento_volslid
010450 FE06                B   441    				cp 6
010452 CA B5 06 01         B   442    				jp z,fx_vibrato_volslide
010456 FE07                B   443    				cp 7
010458 CA BD 06 01         B   444    				jp z,fx_tremolo
01045C FE0A                B   445    				cp 0ah
01045E CA 8A 07 01         B   446    				jp z,fx_volslide
010462 FE0E                B   447    				cp 0eh
010464 CA F9 07 01         B   448    				jp z,fx_extended_fx
010468 C9                  B   449    				ret
                           B   450    
                           B   451    
010469                     B   452    check_more_fx
                           B   453    
010469 FD7E 04             B   454    				ld a,(iy+fx_number)				01046C FE09                B   455    				cp 9
01046E CA 5C 07 01         B   456    				jp z,fx_sample_offset
010472 FE0B                B   457    				cp 0bh			
010474 CA AF 07 01         B   458    				jp z,fx_position_jump
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  19


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010478 FE0D                B   459    				cp 0dh
01047A CA CD 07 01         B   460    				jp z,fx_pattern_break
01047E FE0E                B   461    				cp 0eh
010480 CA F9 07 01         B   462    				jp z,fx_extended_fx
010484 FE0F                B   463    				cp 0fh
010486 CA BA 09 01         B   464    				jp z,fx_set_speed
01048A FE0C                B   465    				cp 0ch
01048C CA BD 07 01         B   466    				jp z,fx_set_volume
010490 C9                  B   467    				ret
                           B   468    					
                           B   469    
                           B   470    ;------- FX $00 -------------------------------
                           B   471    
010491 FD7E 05             B   472    fx_arpeggio		ld a,(iy+fx_args)				010494 B7                  B   473    				or a
010495 C8                  B   474    				ret z
010496 01000000            B   475    				ld bc,0
01049A FD4E 15             B   476    				ld c,(iy+arp_base_period_lo)	01049D FD46 16             B   477    				ld b,(iy+arp_base_period_hi)
0104A0 3A B7 11 01         B   478    				ld a,(arpeggio_counter)	
0104A4 11000000            B   479    				ld de,0
0104A8 B7                  B   480    				or a	
0104A9 28 17               B   481    				jr z,doarp		
0104AB FE02                B   482    				cp 2
0104AD 28 0D               B   483    				jr z,arptwo
0104AF FD5E 05             B   484    arpone			ld e,(iy+fx_args)
0104B2 CB3B                B   485    				srl e
0104B4 CB3B                B   486    				srl e
0104B6 CB3B                B   487    				srl e
0104B8 CB3B                B   488    				srl e							0104BA 18 06               B   489    				jr doarp
0104BC FD7E 05             B   490    arptwo			ld a,(iy+fx_args)
0104BF E60F                B   491    				and 15
0104C1 5F                  B   492    				ld e,a							                           B   493    
0104C2 21 51 09 01         B   494    doarp			ld hl,period_lookup_table-113
0104C6 09                  B   495    				add hl,bc
0104C7 7E                  B   496    				ld a,(hl)						0104C8 83                  B   497    				add a,e							0104C9 CB27                B   498    				sla a							0104CB 21000000            B   499    				ld hl,0
0104CF 6F                  B   500    				ld l,a
0104D0 11 B2 0C 01         B   501    				ld de,period_table_p0
0104D4 19                  B   502    				add hl,de
0104D5 4E                  B   503    				ld c,(hl)
0104D6 23                  B   504    				inc hl
0104D7 46                  B   505    				ld b,(hl)
0104D8 CD A3 03 01         B   506    				call finetune_bc_period
0104DC FD71 01             B   507    				ld (iy+period_lo),c
0104DF FD70 02             B   508    				ld (iy+period_hi),b
0104E2 C9                  B   509    				ret
                           B   510    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  20


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B   511    
                           B   512    ;-------- FX $01 ------------------------------
                           B   513    
0104E3                     B   514    fx_portamento_up
                           B   515    
0104E3 0600                B   516    				ld b,0							0104E5 FD4E 05             B   517    				ld c,(iy+fx_args)				0104E8 FD6E 06             B   518    				ld l,(iy+period_for_fx_lo)
0104EB FD66 07             B   519    				ld h,(iy+period_for_fx_hi)
0104EE AF                  B   520    				xor a
0104EF 40ED42              B   521    				sbc.sis hl,bc
0104F2 38 08               B   522    				jr c,portumin
0104F4 B4                  B   523    				or h
0104F5 20 09               B   524    				jr nz,portugnp
0104F7 7D                  B   525    				ld a,l
0104F8 FE71                B   526    				cp 113
0104FA 30 04               B   527    				jr nc,portugnp
0104FC 21710000            B   528    portumin		ld hl,113
010500 FD75 06             B   529    portugnp		ld (iy+period_for_fx_lo),l
010503 FD74 07             B   530    				ld (iy+period_for_fx_hi),h
010506 FD75 01             B   531    				ld (iy+period_lo),l
010509 FD74 02             B   532    				ld (iy+period_hi),h
01050C C9                  B   533    				ret
                           B   534    
                           B   535    				
                           B   536    ;--------- FX $02 -----------------------------
                           B   537    
01050D                     B   538    fx_portamento_down			
                           B   539    
01050D 0600                B   540    				ld b,0							01050F FD4E 05             B   541    				ld c,(iy+fx_args)				010512 FD6E 06             B   542    				ld l,(iy+period_for_fx_lo)
010515 FD66 07             B   543    				ld h,(iy+period_for_fx_hi)
010518 4009                B   544    				add.sis hl,bc
01051A 7C                  B   545    				ld a,h
01051B FE03                B   546    				cp 3
01051D 38 0B               B   547    				jr c,portdgnp
01051F 20 05               B   548    				jr nz,portdmax
010521 7D                  B   549    				ld a,l
010522 FE8B                B   550    				cp 139
010524 38 04               B   551    				jr c,portdgnp
010526 21580300            B   552    portdmax		ld hl,856
01052A FD75 06             B   553    portdgnp		ld (iy+period_for_fx_lo),l
01052D FD74 07             B   554    				ld (iy+period_for_fx_hi),h
010530 FD75 01             B   555    				ld (iy+period_lo),l
010533 FD74 02             B   556    				ld (iy+period_hi),h
010536 C9                  B   557    				ret
                           B   558    
                           B   559    
                           B   560    ;--------- FX $03 -----------------------------
                           B   561    
010537                     B   562    fx_tone_portamento
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  21


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B   563    
010537 FD4E 09             B   564    				ld c,(iy+portamento_rate)		01053A FD7E 05             B   565    				ld a,(iy+fx_args)
01053D B7                  B   566    				or a
01053E 28 0B               B   567    				jr z,uexistpr
010540 4F                  B   568    				ld c,a
010541 FD7E 04             B   569    				ld a,(iy+fx_number)
010544 FE03                B   570    				cp 3							010546 20 03               B   571    				jr nz,uexistpr
010548 FD71 09             B   572    				ld (iy+portamento_rate),c	
01054B FD5E 10             B   573    uexistpr		ld e,(iy+portamento_dest_lo)	01054E FD56 11             B   574    				ld d,(iy+portamento_dest_hi)
010551 FD6E 06             B   575    				ld l,(iy+period_for_fx_lo)		010554 FD66 07             B   576    				ld h,(iy+period_for_fx_hi)
010557 AF                  B   577    				xor a
010558 40ED52              B   578    				sbc.sis hl,de					01055B C8                  B   579    				ret z							01055C 38 1E               B   580    				jr c,tp_peru					                           B   581    
01055E FD6E 06             B   582    tp_perd			ld l,(iy+period_for_fx_lo)		010561 FD66 07             B   583    				ld h,(iy+period_for_fx_hi)
010564 0600                B   584    				ld b,0
010566 AF                  B   585    				xor a
010567 40ED42              B   586    				sbc.sis hl,bc					01056A 30 04               B   587    				jr nc,tp_dnw					01056C 21000000            B   588    				ld hl,0
010570 4D                  B   589    tp_dnw			ld c,l							010571 44                  B   590    				ld b,h
010572 AF                  B   591    				xor a
010573 40ED52              B   592    				sbc.sis hl,de					010576 30 1A               B   593    				jr nc,chk_gliss
010578 4B                  B   594    				ld c,e
010579 42                  B   595    				ld b,d
01057A 18 1C               B   596    				jr tp_end						                           B   597    
01057C FD6E 06             B   598    tp_peru			ld l,(iy+period_for_fx_lo)		01057F FD66 07             B   599    				ld h,(iy+period_for_fx_hi)
010582 0600                B   600    				ld b,0
010584 4009                B   601    				add.sis hl,bc
010586 4D                  B   602    				ld c,l							010587 44                  B   603    				ld b,h
010588 AF                  B   604    				xor a
010589 40ED52              B   605    				sbc.sis hl,de		
01058C 38 04               B   606    				jr c,chk_gliss
01058E 4B                  B   607    				ld c,e							01058F 42                  B   608    				ld b,d
010590 18 06               B   609    				jr tp_end	
                           B   610    
010592 FDCB 0F 4E          B   611    chk_gliss		bit 1,(iy+control_bits)			010596 20 0D               B   612    				jr nz,do_gliss		
                           B   613    				
010598 FD71 06             B   614    tp_end			ld (iy+period_for_fx_lo),c
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  22


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
01059B FD70 07             B   615    				ld (iy+period_for_fx_hi),b
01059E FD71 01             B   616    				ld (iy+period_lo),c	
0105A1 FD70 02             B   617    				ld (iy+period_hi),b
0105A4 C9                  B   618    				ret	
                           B   619    				
0105A5 FD71 06             B   620    do_gliss		ld (iy+period_for_fx_lo),c		0105A8 FD70 07             B   621    				ld (iy+period_for_fx_hi),b
0105AB 11480000            B   622    				ld de,72
0105AF FD56 14             B   623    				ld d,(iy+finetune)	
0105B2 ED5C                B   624    				mlt de
0105B4 21 B2 0C 01         B   625    				ld hl,period_table_p0	
0105B8 19                  B   626    				add hl,de						0105B9 EB                  B   627    				ex de,hl						                           B   628    
0105BA DDE5                B   629    				push ix
0105BC D5                  B   630    				push de
0105BD DDE1                B   631    				pop ix
0105BF AF                  B   632    				xor a
0105C0 11000000            B   633    				ld de,0							0105C4 DD6E16              B   634    				ld l,(ix+22)					0105C7 DD6617              B   635    				ld h,(ix+23)
0105CA 40ED42              B   636    				sbc.sis hl,bc
0105CD 28 2F               B   637    				jr z,tp_glend
0105CF 38 15               B   638    				jr c,gltest
0105D1 11180000            B   639    				ld de,24
0105D5 DD6E2E              B   640    				ld l,(ix+46)
0105D8 DD662F              B   641    				ld h,(ix+47)
0105DB 40ED42              B   642    				sbc.sis hl,bc
0105DE 28 1E               B   643    				jr z,tp_glend
0105E0 38 04               B   644    				jr c,gltest
0105E2 11300000            B   645    				ld de,48
                           B   646    
0105E6 DD19                B   647    gltest			add ix,de
0105E8 50                  B   648    				ld d,b
0105E9 59                  B   649    				ld e,c
0105EA AF                  B   650    				xor a
0105EB 060C                B   651    				ld b,12
0105ED DD6E00              B   652    glissfper		ld l,(ix)						0105F0 DD6601              B   653    				ld h,(ix+1)
0105F3 40ED52              B   654    				sbc.sis hl,de
0105F6 30 0F               B   655    				jr nc,nggliss
0105F8 DD4E00              B   656    				ld c,(ix)
0105FB DD4601              B   657    				ld b,(ix+1)
0105FE FD71 01             B   658    tp_glend		ld (iy+period_lo),c	
010601 FD70 02             B   659    				ld (iy+period_hi),b
010604 DDE1                B   660    				pop ix
010606 C9                  B   661    				ret
                           B   662    
010607 DD23                B   663    nggliss			inc ix
010609 DD23                B   664    				inc ix
01060B 10 E0               B   665    				djnz glissfper
01060D 42                  B   666    				ld b,d
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  23


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
01060E 4B                  B   667    				ld c,e
01060F 18 ED               B   668    				jr tp_glend
                           B   669    
                           B   670    
                           B   671    ;--------- FX $04 -----------------------------
                           B   672    
010611 FD46 0A             B   673    fx_vibrato		ld b,(iy+vibrato_args)			010614 FD7E 04             B   674    				ld a,(iy+fx_number)
010617 FE04                B   675    				cp 4
010619 20 1C               B   676    				jr nz,vibrsame					01061B FD7E 05             B   677    				ld a,(iy+fx_args)
01061E B7                  B   678    				or a
01061F 28 16               B   679    				jr z,vibrsame					010621 4F                  B   680    				ld c,a
010622 E60F                B   681    				and 15
010624 28 06               B   682    				jr z,vibdsame					010626 57                  B   683    				ld d,a
010627 78                  B   684    				ld a,b
010628 E6F0                B   685    				and 0f0h
01062A B2                  B   686    				or d
01062B 47                  B   687    				ld b,a							01062C 79                  B   688    vibdsame		ld a,c
01062D E6F0                B   689    				and 0f0h
01062F 28 06               B   690    				jr z,vibrsame					010631 4F                  B   691    				ld c,a
010632 78                  B   692    				ld a,b
010633 E60F                B   693    				and 0fh
010635 B1                  B   694    				or c							010636 47                  B   695    				ld b,a			
010637 FD70 0A             B   696    vibrsame		ld (iy+vibrato_args),b			                           B   697    				
01063A FD4E 0B             B   698    				ld c,(iy+vibrato_pos)
01063D CB39                B   699    				srl c
01063F CB39                B   700    				srl c
010641 79                  B   701    				ld a,c
010642 E61F                B   702    				and 1fh
010644 4F                  B   703    				ld c,a							010645 FD7E 0E             B   704    				ld a,(iy+wave_type)	
010648 E60F                B   705    				and 0fh
01064A B7                  B   706    				or a							01064B 28 1D               B   707    				jr z,vib_sine					01064D CB21                B   708    				sla c		
01064F CB21                B   709    				sla c
010651 CB21                B   710    				sla c							010653 FE01                B   711    				cp 1
010655 28 04               B   712    				jr z,vib_ramp					010657 1EFF                B   713    				ld e,255			
010659 18 1A               B   714    				jr vib_gotd						                           B   715    
01065B FDCB 0B 7E          B   716    vib_ramp		bit 7,(iy+vibrato_pos)			01065F 28 06               B   717    				jr z,vibr2
010661 3EFF                B   718    				ld a,255
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  24


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010663 91                  B   719    				sub c
010664 5F                  B   720    				ld e,a
010665 18 0E               B   721    				jr vib_gotd
010667 59                  B   722    vibr2			ld e,c
010668 18 0B               B   723    				jr vib_gotd
                           B   724    
01066A 21 32 11 01         B   725    vib_sine		ld hl,vibrato_table				01066E 11000000            B   726    				ld de,0
010672 59                  B   727    				ld e,c
010673 19                  B   728    				add hl,de
010674 5E                  B   729    				ld e,(hl)			
                           B   730    
010675 FD7E 0A             B   731    vib_gotd		ld a,(iy+vibrato_args)	
010678 E60F                B   732    				and 0fh			
01067A 57                  B   733    				ld d,a							01067B ED5C                B   734    				mlt de							01067D CB23                B   735    				sla e							01067F CB12                B   736    				rl d
010681 5A                  B   737    				ld e,d
010682 1600                B   738    				ld d,0
                           B   739    								
010684 FD6E 06             B   740    				ld l,(iy+period_for_fx_lo)		010687 FD66 07             B   741    				ld h,(iy+period_for_fx_hi)
01068A FDCB 0B 7E          B   742    				bit 7,(iy+vibrato_pos)
01068E 20 03               B   743    				jr nz,vib_sub	
010690 19                  B   744    				add hl,de						010691 18 03               B   745    				jr vib_pdone
010693 AF                  B   746    vib_sub			xor a
010694 ED52                B   747    				sbc hl,de						010696 FD75 01             B   748    vib_pdone		ld (iy+period_lo),l
010699 FD74 02             B   749    				ld (iy+period_hi),h
                           B   750    
01069C FD46 0B             B   751    				ld b,(iy+vibrato_pos)			01069F FD7E 0A             B   752    				ld a,(iy+vibrato_args)
0106A2 CB3F                B   753    				srl a
0106A4 CB3F                B   754    				srl a
0106A6 E63C                B   755    				and 3ch							0106A8 80                  B   756    				add a,b
0106A9 FD77 0B             B   757    				ld (iy+vibrato_pos),a			0106AC C9                  B   758    				ret
                           B   759    
                           B   760    
                           B   761    ;-------- FX $05 ------------------------------
                           B   762    				
0106AD                     B   763    fx_tone_portamento_volslide
                           B   764    
0106AD CD 37 05 01         B   765    				call fx_tone_portamento
0106B1 C3 8A 07 01         B   766    				jp fx_volslide
                           B   767    
                           B   768    			
                           B   769    ;-------- FX $06 ------------------------------
                           B   770    				
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  25


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
0106B5                     B   771    fx_vibrato_volslide	
                           B   772    				
0106B5 CD 11 06 01         B   773    				call fx_vibrato
0106B9 C3 8A 07 01         B   774    				jp fx_volslide
                           B   775    				
                           B   776    				
                           B   777    ;-------- FX $07 ------------------------------
                           B   778    
0106BD FD46 0C             B   779    fx_tremolo		ld b,(iy+tremolo_args)			0106C0 FD7E 05             B   780    				ld a,(iy+fx_args)
0106C3 B7                  B   781    				or a
0106C4 28 16               B   782    				jr z,trersame					0106C6 4F                  B   783    				ld c,a
0106C7 E60F                B   784    				and 15
0106C9 28 06               B   785    				jr z,tredsame					0106CB 57                  B   786    				ld d,a
0106CC 78                  B   787    				ld a,b
0106CD E6F0                B   788    				and 0f0h
0106CF B2                  B   789    				or d
0106D0 47                  B   790    				ld b,a							0106D1 79                  B   791    tredsame		ld a,c
0106D2 E6F0                B   792    				and 0f0h
0106D4 28 06               B   793    				jr z,trersame					0106D6 4F                  B   794    				ld c,a
0106D7 78                  B   795    				ld a,b
0106D8 E60F                B   796    				and 0fh
0106DA B1                  B   797    				or c							0106DB 47                  B   798    				ld b,a			
0106DC FD70 0C             B   799    trersame		ld (iy+tremolo_args),b			                           B   800    				
0106DF FD4E 0D             B   801    				ld c,(iy+tremolo_pos)
0106E2 CB39                B   802    				srl c
0106E4 CB39                B   803    				srl c
0106E6 79                  B   804    				ld a,c
0106E7 E61F                B   805    				and 1fh
0106E9 4F                  B   806    				ld c,a							0106EA FD7E 0E             B   807    				ld a,(iy+wave_type)				0106ED CB3F                B   808    				srl a
0106EF CB3F                B   809    				srl a
0106F1 CB3F                B   810    				srl a
0106F3 CB3F                B   811    				srl a
0106F5 E60F                B   812    				and 0fh							0106F7 28 1D               B   813    				jr z,tre_sine					0106F9 CB21                B   814    				sla c		
0106FB CB21                B   815    				sla c
0106FD CB21                B   816    				sla c							0106FF FE01                B   817    				cp 1
010701 28 04               B   818    				jr z,tre_ramp					010703 1EFF                B   819    				ld e,255			
010705 18 1A               B   820    				jr tre_gotd						                           B   821    
010707 FDCB 0D 7E          B   822    tre_ramp		bit 7,(iy+tremolo_pos)			Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  26


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
01070B 28 06               B   823    				jr z,trer2
01070D 3EFF                B   824    				ld a,255
01070F 91                  B   825    				sub c
010710 5F                  B   826    				ld e,a
010711 18 0E               B   827    				jr tre_gotd
010713 59                  B   828    trer2			ld e,c
010714 18 0B               B   829    				jr tre_gotd
                           B   830    
010716 21 32 11 01         B   831    tre_sine		ld hl,vibrato_table				01071A 11000000            B   832    				ld de,0
01071E 59                  B   833    				ld e,c
01071F 19                  B   834    				add hl,de
010720 5E                  B   835    				ld e,(hl)
                           B   836    		
010721 FD7E 0C             B   837    tre_gotd		ld a,(iy+tremolo_args)	
010724 E60F                B   838    				and 0fh			
010726 57                  B   839    				ld d,a							010727 ED5C                B   840    				mlt de							010729 CB23                B   841    				sla e							01072B CB12                B   842    				rl d
01072D CB23                B   843    				sla e
01072F CB12                B   844    				rl d
010731 5A                  B   845    				ld e,d
                           B   846    				
010732 FD7E 08             B   847    tshftl			ld a,(iy+volume_for_fx)			010735 FDCB 0D 7E          B   848    				bit 7,(iy+tremolo_pos)
010739 20 09               B   849    				jr nz,tre_sub	
01073B 83                  B   850    				add a,e							01073C FE40                B   851    				cp 64
01073E 38 08               B   852    				jr c,tre_done
010740 3E40                B   853    				ld a,64
010742 18 04               B   854    				jr tre_done
010744 93                  B   855    tre_sub			sub e							010745 30 01               B   856    				jr nc,tre_done
010747 AF                  B   857    				xor a
010748 FD77 03             B   858    tre_done		ld (iy+volume),a
                           B   859    				
01074B FD46 0D             B   860    				ld b,(iy+tremolo_pos)			01074E FD7E 0C             B   861    				ld a,(iy+tremolo_args)
010751 CB3F                B   862    				srl a
010753 CB3F                B   863    				srl a
010755 E63C                B   864    				and 3ch							010757 80                  B   865    				add a,b
010758 FD77 0D             B   866    				ld (iy+tremolo_pos),a			01075B C9                  B   867    				ret
                           B   868    
                           B   869    ;-------- FX $09 ------------------------------
                           B   870    
01075C                     B   871    fx_sample_offset
                           B   872    
01075C FD7E 05             B   873    				ld a,(iy+fx_args)		
01075F B7                  B   874    				or a
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  27


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010760 28 08               B   875    				jr z,usexoffs					010762 01000000            B   876    				ld bc,0
010766 47                  B   877    				ld b,a
010767 FD0F 23             B   878    				ld (iy+sample_offset),bc		                           B   879    							
01076A FD07 23             B   880    usexoffs		ld bc,(iy+sample_offset)		01076D FD27 1A             B   881    				ld hl,(iy+sample_length)
010770 AF                  B   882    				xor a
010771 ED42                B   883    				sbc hl,bc
010773 28 0D               B   884    				jr z,soffbad
010775 38 0B               B   885    				jr c,soffbad
010777 FD2F 1A             B   886    				ld (iy+sample_length),hl		01077A FD27 17             B   887    				ld hl,(iy+sample_location)
01077D 09                  B   888    				add hl,bc
01077E FD2F 17             B   889    				ld (iy+sample_location),hl		010781 C9                  B   890    				ret
                           B   891    
010782 21020000            B   892    soffbad			ld hl,2
010786 FD2F 1A             B   893    				ld (iy+sample_length),hl		010789 C9                  B   894    				ret
                           B   895    				
                           B   896    
                           B   897    ;-------- FX $0A ------------------------------
                           B   898    
                           B   899    
01078A FD7E 05             B   900    fx_volslide		ld a,(iy+fx_args)				01078D 47                  B   901    				ld b,a
01078E E60F                B   902    				and 15			
010790 28 0B               B   903    				jr z,volup
010792 FD7E 03             B   904    				ld a,(iy+volume)
010795 90                  B   905    				sub b
010796 30 01               B   906    				jr nc,voldok
010798 AF                  B   907    				xor a
010799 FD77 03             B   908    voldok			ld (iy+volume),a
01079C C9                  B   909    				ret
                           B   910    
01079D 78                  B   911    volup			ld a,b							01079E 0F                  B   912    				rrca
01079F 0F                  B   913    				rrca
0107A0 0F                  B   914    				rrca
0107A1 0F                  B   915    				rrca
0107A2 FD86 03             B   916    				add a,(iy+volume)
0107A5 FE40                B   917    				cp 64
0107A7 38 02               B   918    				jr c,voluok
0107A9 3E40                B   919    				ld a,64
0107AB FD77 03             B   920    voluok			ld (iy+volume),a
0107AE C9                  B   921    				ret
                           B   922    
                           B   923    
                           B   924    ;-------- FX $0B ------------------------------
                           B   925    
0107AF                     B   926    fx_position_jump
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  28


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B   927    
0107AF FD7E 05             B   928    				ld a,(iy+fx_args)
0107B2 32 B4 11 01         B   929    				ld (songpos),a
0107B6 3EFF                B   930    				ld a,255
0107B8 32 B5 11 01         B   931    				ld (patindex),a
0107BC C9                  B   932    				ret
                           B   933    
                           B   934    
                           B   935    ;-------- FX $0C ------------------------------
                           B   936    
0107BD                     B   937    fx_set_volume
                           B   938    				
0107BD FD7E 05             B   939    				ld a,(iy+fx_args)
0107C0 FE40                B   940    				cp 40h
0107C2 38 02               B   941    				jr c,vsetok
0107C4 3E40                B   942    				ld a,40h
0107C6 FD77 03             B   943    vsetok			ld (iy+volume),a
0107C9 FD77 13             B   944    				ld (iy+volume_waiting),a
0107CC C9                  B   945    				ret
                           B   946    
                           B   947    
                           B   948    ;-------- FX $0D ------------------------------
                           B   949    
0107CD                     B   950    fx_pattern_break
                           B   951    				
0107CD FD7E 05             B   952    				ld a,(iy+fx_args)
0107D0 47                  B   953    				ld b,a
0107D1 CB3F                B   954    				srl a
0107D3 CB3F                B   955    				srl a
0107D5 CB3F                B   956    				srl a
0107D7 CB3F                B   957    				srl a
0107D9 4F                  B   958    				ld c,a
0107DA 81                  B   959    				add a,c
0107DB 81                  B   960    				add a,c
0107DC 81                  B   961    				add a,c
0107DD 81                  B   962    				add a,c
0107DE CB27                B   963    				sla a
0107E0 4F                  B   964    				ld c,a
0107E1 78                  B   965    				ld a,b
0107E2 E60F                B   966    				and 0fh
0107E4 81                  B   967    				add a,c
0107E5 3D                  B   968    				dec a
0107E6 32 B5 11 01         B   969    				ld (patindex),a
0107EA 21 B4 11 01         B   970    				ld hl,songpos
0107EE 34                  B   971    				inc (hl)
0107EF 3A 64 1D 01         B   972    				ld a,(music_module+950)
0107F3 BE                  B   973    				cp (hl)							0107F4 20 02               B   974    				jr nz,nspw_pb
0107F6 3600                B   975    				ld (hl),0
0107F8 C9                  B   976    nspw_pb			ret
                           B   977    
                           B   978    				
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  29


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B   979    ;-------- FX $0E ------------------------------
                           B   980    
                           B   981    
0107F9                     B   982    fx_extended_fx
                           B   983    
0107F9 FD7E 05             B   984    				ld a,(iy+fx_args)
0107FC 47                  B   985    				ld b,a
0107FD E6F0                B   986    				and 0f0h
0107FF FE00                B   987    				cp 0h
010801 28 4B               B   988    				jr z,e0_filter
010803 FE10                B   989    				cp 10h
010805 28 4F               B   990    				jr z,e1_fineport_up
010807 FE20                B   991    				cp 20h
010809 28 78               B   992    				jr z,e2_fineport_down
01080B FE30                B   993    				cp 30h
01080D CA AF 08 01         B   994    				jp z,e3_glissando_control
010811 FE40                B   995    				cp 40h
010813 CA BC 08 01         B   996    				jp z,e4_vibrato_control
010817 FE50                B   997    				cp 50h
010819 CA CA 08 01         B   998    				jp z,e5_finetune_control
01081D FE60                B   999    				cp 60h
01081F CA D1 08 01         B  1000    				jp z,e6_pattern_loop
010823 FE70                B  1001    				cp 70h
010825 CA FD 08 01         B  1002    				jp z,e7_tremolo_control
010829 FE90                B  1003    				cp 90h
01082B CA 13 09 01         B  1004    				jp z,e9_retrigger_note
01082F FEA0                B  1005    				cp 0a0h
010831 CA 2A 09 01         B  1006    				jp z,ea_finevol_up
010835 FEB0                B  1007    				cp 0b0h
010837 CA 40 09 01         B  1008    				jp z,eb_finevol_down
01083B FEC0                B  1009    				cp 0c0h
01083D CA 55 09 01         B  1010    				jp z,ec_cutnote
010841 FED0                B  1011    				cp 0d0h
010843 CA 64 09 01         B  1012    				jp z,ed_delayedtrig
010847 FEE0                B  1013    				cp 0e0h
010849 CA A6 09 01         B  1014    				jp z,ee_pattdelay
01084D C9                  B  1015    				ret
                           B  1016    
01084E                     B  1017    e0_filter
                           B  1018    
01084E 78                  B  1019    				ld a,b							01084F E601                B  1020    				and 01h			
010851 32 BC 11 01         B  1021    				ld (filter_on_off),a
010855 C9                  B  1022    				ret
                           B  1023    				
                           B  1024    
010856                     B  1025    e1_fineport_up
                           B  1026    
010856 3A B3 11 01         B  1027    				ld a,(ticker)
01085A B7                  B  1028    				or a
01085B C0                  B  1029    				ret nz
01085C 0600                B  1030    				ld b,0							Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  30


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
01085E FD7E 05             B  1031    				ld a,(iy+fx_args)		
010861 E60F                B  1032    				and 0fh
010863 4F                  B  1033    				ld c,a
010864 FD6E 01             B  1034    				ld l,(iy+period_lo)
010867 FD66 02             B  1035    				ld h,(iy+period_hi)
01086A AF                  B  1036    				xor a
01086B 40ED42              B  1037    				sbc.sis hl,bc
01086E 38 08               B  1038    				jr c,fportumin
010870 B4                  B  1039    				or h
010871 20 09               B  1040    				jr nz,fportugnp
010873 7D                  B  1041    				ld a,l
010874 FE71                B  1042    				cp 113
010876 30 04               B  1043    				jr nc,fportugnp
010878 21710000            B  1044    fportumin		ld hl,113						01087C FD75 01             B  1045    fportugnp		ld (iy+period_lo),l
01087F FD74 02             B  1046    				ld (iy+period_hi),h
010882 C9                  B  1047    				ret
                           B  1048    
                           B  1049    
010883                     B  1050    e2_fineport_down
                           B  1051    				
010883 3A B3 11 01         B  1052    				ld a,(ticker)
010887 B7                  B  1053    				or a
010888 C0                  B  1054    				ret nz
010889 0600                B  1055    				ld b,0							01088B FD7E 05             B  1056    				ld a,(iy+fx_args)		
01088E E60F                B  1057    				and 0fh
010890 4F                  B  1058    				ld c,a
010891 FD6E 01             B  1059    				ld l,(iy+period_lo)
010894 FD66 02             B  1060    				ld h,(iy+period_hi)
010897 09                  B  1061    				add hl,bc
010898 7C                  B  1062    				ld a,h
010899 FE03                B  1063    				cp 3
01089B 38 0B               B  1064    				jr c,fportdgnp
01089D 20 05               B  1065    				jr nz,fportdmax
01089F 7D                  B  1066    				ld a,l
0108A0 FE58                B  1067    				cp 88
0108A2 38 04               B  1068    				jr c,fportdgnp
0108A4 21580300            B  1069    fportdmax		ld hl,856						0108A8 FD75 01             B  1070    fportdgnp		ld (iy+period_lo),l
0108AB FD74 02             B  1071    				ld (iy+period_hi),h
0108AE C9                  B  1072    				ret
                           B  1073    
                           B  1074    
0108AF                     B  1075    e3_glissando_control
                           B  1076    
0108AF FDCB 0F 8E          B  1077    				res 1,(iy+control_bits)
0108B3 78                  B  1078    				ld a,b
0108B4 E601                B  1079    				and 01h
0108B6 C8                  B  1080    				ret z
0108B7 FDCB 0F CE          B  1081    				set 1,(iy+control_bits)
0108BB C9                  B  1082    				ret
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  31


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B  1083    
                           B  1084    
0108BC                     B  1085    e4_vibrato_control
                           B  1086    				
0108BC 78                  B  1087    				ld a,b
0108BD E607                B  1088    				and 07h
0108BF 47                  B  1089    				ld b,a
0108C0 FD7E 0E             B  1090    				ld a,(iy+wave_type)
0108C3 E6F0                B  1091    				and 0f0h
0108C5 B0                  B  1092    				or b
0108C6 FD77 0E             B  1093    				ld (iy+wave_type),a
0108C9 C9                  B  1094    				ret
                           B  1095    
                           B  1096    
0108CA                     B  1097    e5_finetune_control
                           B  1098    				
0108CA 78                  B  1099    				ld a,b							0108CB E60F                B  1100    				and 0fh			
0108CD FD77 14             B  1101    				ld (iy+finetune),a
0108D0 C9                  B  1102    				ret
                           B  1103    
                           B  1104    
0108D1                     B  1105    e6_pattern_loop
                           B  1106    
0108D1 3A B3 11 01         B  1107    				ld a,(ticker)
0108D5 B7                  B  1108    				or a
0108D6 C0                  B  1109    				ret nz
0108D7 78                  B  1110    				ld a,b
0108D8 E60F                B  1111    				and 0fh
0108DA 28 18               B  1112    				jr z,setplp
0108DC 21 B9 11 01         B  1113    				ld hl,pattloop_count
0108E0 34                  B  1114    				inc (hl)
0108E1 BE                  B  1115    				cp (hl)
0108E2 38 0A               B  1116    				jr c,plp_end
0108E4 3A B8 11 01         B  1117    				ld a,(pattloop_pos)				0108E8 3D                  B  1118    				dec a							0108E9 32 B5 11 01         B  1119    				ld (patindex),a
0108ED C9                  B  1120    				ret
0108EE AF                  B  1121    plp_end			xor a			
0108EF 32 B9 11 01         B  1122    				ld (pattloop_count),a			0108F3 C9                  B  1123    				ret
0108F4 3A B5 11 01         B  1124    setplp			ld a,(patindex)					0108F8 32 B8 11 01         B  1125    				ld (pattloop_pos),a
0108FC C9                  B  1126    				ret
                           B  1127    				
                           B  1128    
0108FD                     B  1129    e7_tremolo_control
                           B  1130    				
0108FD 78                  B  1131    				ld a,b
0108FE E607                B  1132    				and 07h
010900 47                  B  1133    				ld b,a
010901 CB20                B  1134    				sla b
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  32


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010903 CB20                B  1135    				sla b
010905 CB20                B  1136    				sla b
010907 CB20                B  1137    				sla b
010909 FD7E 0E             B  1138    				ld a,(iy+wave_type)
01090C E60F                B  1139    				and 0fh
01090E B0                  B  1140    				or b
01090F FD77 0E             B  1141    				ld (iy+wave_type),a
010912 C9                  B  1142    				ret
                           B  1143    				
                           B  1144    
010913                     B  1145    e9_retrigger_note
                           B  1146    
010913 78                  B  1147    				ld a,b
010914 E60F                B  1148    				and 0fh
010916 C8                  B  1149    				ret z
010917 47                  B  1150    				ld b,a
010918 3A B3 11 01         B  1151    				ld a,(ticker)
01091C B7                  B  1152    				or a
01091D 28 06               B  1153    				jr z,retrigit
01091F 90                  B  1154    rtloop			sub b
010920 28 03               B  1155    				jr z,retrigit
010922 30 FB               B  1156    				jr nc,rtloop
010924 C9                  B  1157    				ret
010925 FDCB 0F C6          B  1158    retrigit		set 0,(iy+control_bits)
010929 C9                  B  1159    				ret
                           B  1160    				
                           B  1161    
                           B  1162    
01092A                     B  1163    ea_finevol_up
                           B  1164    
01092A 3A B3 11 01         B  1165    				ld a,(ticker)
01092E B7                  B  1166    				or a
01092F C0                  B  1167    				ret nz
010930 78                  B  1168    				ld a,b
010931 E60F                B  1169    				and 0fh
010933 FD86 03             B  1170    				add a,(iy+volume)
010936 FE40                B  1171    				cp 64
010938 38 02               B  1172    				jr c,eavolok
01093A 3E40                B  1173    				ld a,64
01093C FD77 03             B  1174    eavolok			ld (iy+volume),a
01093F C9                  B  1175    				ret
                           B  1176    				
                           B  1177    
010940                     B  1178    eb_finevol_down
                           B  1179    					
010940 3A B3 11 01         B  1180    				ld a,(ticker)
010944 B7                  B  1181    				or a
010945 C0                  B  1182    				ret nz
010946 78                  B  1183    				ld a,b
010947 E60F                B  1184    				and 0fh
010949 47                  B  1185    				ld b,a
01094A FD7E 03             B  1186    				ld a,(iy+volume)
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  33


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
01094D 90                  B  1187    				sub b
01094E 30 01               B  1188    				jr nc,ebvolok
010950 AF                  B  1189    				xor a
010951 FD77 03             B  1190    ebvolok			ld (iy+volume),a
010954 C9                  B  1191    				ret
                           B  1192    
                           B  1193    
010955                     B  1194    ec_cutnote
                           B  1195    
010955 78                  B  1196    				ld a,b
010956 E60F                B  1197    				and 0fh
010958 47                  B  1198    				ld b,a
010959 3A B3 11 01         B  1199    				ld a,(ticker)
01095D B8                  B  1200    				cp b
01095E C0                  B  1201    				ret nz
01095F AF                  B  1202    				xor a
010960 FD77 03             B  1203    				ld (iy+volume),a
010963 C9                  B  1204    				ret
                           B  1205    				
                           B  1206    
                           B  1207    
                           B  1208    				
010964                     B  1209    ed_delayedtrig	
                           B  1210    				
010964 78                  B  1211    				ld a,b
010965 E60F                B  1212    				and 0fh
010967 47                  B  1213    				ld b,a
010968 3A B3 11 01         B  1214    				ld a,(ticker)
01096C B8                  B  1215    				cp b
01096D C0                  B  1216    				ret nz
                           B  1217    				
01096E FDCB 0F 5E          B  1218    				bit 3,(iy+control_bits)			010972 28 17               B  1219    				jr z,ed_nonewp2
010974 FD4E 06             B  1220    				ld c,(iy+period_for_fx_lo)		010977 FD46 07             B  1221    				ld b,(iy+period_for_fx_hi)
01097A FD71 01             B  1222    				ld (iy+period_lo),c
01097D FD70 02             B  1223    				ld (iy+period_hi),b
010980 FDCB 0F C6          B  1224    				set 0,(iy+control_bits)			010984 FD7E 12             B  1225    				ld a,(iy+instrument_waiting)	010987 B7                  B  1226    				or a
010988 C8                  B  1227    				ret z
010989 18 0E               B  1228    				jr ed_do_vol					                           B  1229    				
01098B                     B  1230    ed_nonewp2
                           B  1231    
01098B FD7E 12             B  1232    				ld a,(iy+instrument_waiting)	01098E B7                  B  1233    				or a							01098F C8                  B  1234    				ret z
010990 FDBE 00             B  1235    				cp (iy+instrument)			
010993 28 04               B  1236    				jr z,ed_do_vol
010995 FDCB 0F C6          B  1237    				set 0,(iy+control_bits)
                           B  1238    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  34


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010999 FD77 00             B  1239    ed_do_vol		ld (iy+instrument),a
01099C FD7E 13             B  1240    				ld a,(iy+volume_waiting)		01099F FD77 03             B  1241    				ld (iy+volume),a	
0109A2 FD77 08             B  1242    				ld (iy+volume_for_fx),a			0109A5 C9                  B  1243    				ret
                           B  1244    
                           B  1245    
                           B  1246    
                           B  1247    				
                           B  1248    				
0109A6                     B  1249    ee_pattdelay
                           B  1250    
0109A6 3A BB 11 01         B  1251    				ld a,(pattdelay_flag)			0109AA B7                  B  1252    				or a
0109AB C0                  B  1253    				ret nz
0109AC 78                  B  1254    				ld a,b
0109AD E60F                B  1255    				and 0fh
0109AF 32 BA 11 01         B  1256    				ld (pattdelay_count),a
0109B3 3E01                B  1257    				ld a,1
0109B5 32 BB 11 01         B  1258    				ld (pattdelay_flag),a
0109B9 C9                  B  1259    				ret
                           B  1260    				
                           B  1261    
                           B  1262    
                           B  1263    ;-------- FX $0F ------------------------------
                           B  1264    
0109BA                     B  1265    fx_set_speed
0109BA FD7E 05             B  1266    				ld a,(iy+fx_args)
0109BD 32 B6 11 01         B  1267    				ld (songspeed),a
0109C1 C9                  B  1268    				ret
                           B  1269    
                           B  1270    
                           B  1271    ;---- Amiga Period List -----------------------
                           B  1272    
0109C2                     B  1273    period_lookup_table	
                           B  1274    
0109C2 23000000 00000022   B  1275    					DB 35,0,0,0,0,0,0,34,0,0,0,
0109CA 00000000 00002100 
0109D2 00000000 00002000   B  1276    					DB 0,0,0,0,0,0,32,0,0,0,0,0
0109DA 00000000 00001F00 
0109E2 00000000 00001E00   B  1277    					DB 0,0,0,0,0,0,30,0,0,0,0,0
0109EA 00000000 0000001D 
0109F2 00000000 00000000   B  1278    					DB 0,0,0,0,0,0,0,0,0,28,0,0
0109FA 001C0000 00000000 
010A02 0000001B 00000000   B  1279    					DB 0,0,0,27,0,0,0,0,0,0,0,0
010A0A 00000000 001A0000 
010A12 00000000 00000000   B  1280    					DB 0,0,0,0,0,0,0,0,0,25,0,0
010A1A 00190000 00000000 
010A22 00000000 00180000   B  1281    					DB 0,0,0,0,0,24,0,0,0,0,0,0
010A2A 00000000 00000000 
010A32 00170000 00000000   B  1282    					DB 0,23,0,0,0,0,0,0,0,0,0,0
010A3A 00000000 00000016 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  35


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010A42 00000000 00000000   B  1283    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010A4A 00000000 00150000 
010A52 00000000 00000000   B  1284    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010A5A 00000000 14000000 
010A62 00000000 00000000   B  1285    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010A6A 00000000 13000000 
010A72 00000000 00000000   B  1286    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010A7A 00000000 00120000 
010A82 00000000 00000000   B  1287    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010A8A 00000000 00000011 
010A92 00000000 00000000   B  1288    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010A9A 00000000 00000000 
010AA2 00001000 00000000   B  1289    					DB 0,0,16,0,0,0,0,0,0,0,0,0
010AAA 00000000 00000000 
010AB2 00000000 0000000F   B  1290    					DB 0,0,0,0,0,0,0,15,0,0,0,0
010ABA 00000000 00000000 
010AC2 00000000 00000000   B  1291    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010ACA 00000000 0E000000 
010AD2 00000000 00000000   B  1292    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010ADA 00000000 00000000 
010AE2 0000000D 00000000   B  1293    					DB 0,0,0,13,0,0,0,0,0,0,0,0
010AEA 00000000 00000000 
010AF2 00000000 00000000   B  1294    					DB 0,0,0,0,0,0,0,0,0,0,0,12
010AFA 0000000C 00000000 
010B02 00000000 00000000   B  1295    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010B0A 00000000 00000000 
010B12 00000000 0B000000   B  1296    					DB 0,0,0,0,11,0,0,0,0,0,0,0
010B1A 00000000 00000000 
010B22 00000000 00000000   B  1297    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010B2A 00000000 0000000A 
010B32 00000000 00000000   B  1298    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010B3A 00000000 00000000 
010B42 00000000 00000000   B  1299    					DB 0,0,0,0,0,0,0,0,0,0,0,9,
010B4A 00000009 00000000 
010B52 00000000 00000000   B  1300    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010B5A 00000000 00000000 
010B62 00000000 00000000   B  1301    					DB 0,0,0,0,0,0,0,0,0,8,0,0,
010B6A 00080000 00000000 
010B72 00000000 00000000   B  1302    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010B7A 00000000 00000000 
010B82 00000000 00000000   B  1303    					DB 0,0,0,0,0,0,0,0,0,7,0,0,
010B8A 00070000 00000000 
010B92 00000000 00000000   B  1304    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010B9A 00000000 00000000 
010BA2 00000000 00000000   B  1305    					DB 0,0,0,0,0,0,0,0,0,0,0,6,
010BAA 00000006 00000000 
010BB2 00000000 00000000   B  1306    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010BBA 00000000 00000000 
010BC2 00000000 00000000   B  1307    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010BCA 00000000 00000005 
010BD2 00000000 00000000   B  1308    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010BDA 00000000 00000000 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  36


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010BE2 00000000 00000000   B  1309    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010BEA 00000000 00000000 
010BF2 00000000 00040000   B  1310    					DB 0,0,0,0,0,4,0,0,0,0,0,0,
010BFA 00000000 00000000 
010C02 00000000 00000000   B  1311    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C0A 00000000 00000000 
010C12 00000000 00000000   B  1312    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C1A 00000000 00000003 
010C22 00000000 00000000   B  1313    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C2A 00000000 00000000 
010C32 00000000 00000000   B  1314    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C3A 00000000 00000000 
010C42 00000000 00000000   B  1315    					DB 0,0,0,0,0,0,0,0,0,2,0,0,
010C4A 00020000 00000000 
010C52 00000000 00000000   B  1316    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C5A 00000000 00000000 
010C62 00000000 00000000   B  1317    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C6A 00000000 00000000 
010C72 00000000 00000001   B  1318    					DB 0,0,0,0,0,0,0,1,0,0,0,0,
010C7A 00000000 00000000 
010C82 00000000 00000000   B  1319    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C8A 00000000 00000000 
010C92 00000000 00000000   B  1320    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C9A 00000000 00000000 
010CA2 00000000 00000000   B  1321    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010CAA 00000000 00000000 
                           B  1322    
                           B  1323    
010CB2 58032803 FA02D002   B  1324    period_table_p0	dw 856,808,762,720,678,640,604,
010CBA A6028002 5C023A02 
010CC2 1A02FC01 E001C501 
010CCA AC019401 7D016801   B  1325    				dw 428,404,381,360,339,320,302,
010CD2 53014001 2E011D01 
010CDA 0D01FE00 F000E200 
010CE2 D600CA00 BE00B400   B  1326    				dw 214,202,190,180,170,160,151,
010CEA AA00A000 97008F00 
010CF2 87007F00 78007100 
                           B  1327    
010CFA 52032203 F502CB02   B  1328    period_table_p1	dw 850,802,757,715,674,637,601,
010D02 A2027D02 59023702 
010D0A 1702F901 DD01C201 
010D12 A9019101 7B016501   B  1329    				dw 425,401,379,357,337,318,300,
010D1A 51013E01 2C011C01 
010D22 0C01FD00 EF00E100 
010D2A D500C900 BD00B300   B  1330    				dw 213,201,189,179,169,159,150,
010D32 A9009F00 96008E00 
010D3A 86007E00 77007100 
                           B  1331    
010D42 4C031C03 F002C502   B  1332    period_table_p2	dw 844,796,752,709,670,632,597,
010D4A 9E027802 55023302 
010D52 1402F601 DA01BF01 
010D5A A6018E01 78016301   B  1333    				dw 422,398,376,355,335,316,298,
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  37


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010D62 4F013C01 2A011A01 
010D6A 0A01FB00 ED00E000 
010D72 D300C700 BC00B100   B  1334    				dw 211,199,188,177,167,158,149,
010D7A A7009E00 95008D00 
010D82 85007D00 76007000 
                           B  1335    
010D8A 46031703 EA02C002   B  1336    period_table_p3	dw 838,791,746,704,665,628,592,
010D92 99027402 50022F02 
010D9A 1002F201 D601BC01 
010DA2 A3018B01 75016001   B  1337    				dw 419,395,373,352,332,314,296,
010DAA 4C013A01 28011801 
010DB2 0801F900 EB00DE00 
010DBA D100C600 BB00B000   B  1338    				dw 209,198,187,176,166,157,148,
010DC2 A6009D00 94008C00 
010DCA 84007D00 76006F00 
                           B  1339    
010DD2 40031103 E502BB02   B  1340    period_table_p4	dw 832,785,741,699,660,623,588,
010DDA 94026F02 4C022B02 
010DE2 0C02EF01 D301B901 
010DEA A0018801 72015E01   B  1341    				dw 416,392,370,350,330,312,294,
010DF2 4A013801 26011601 
010DFA 0601F700 E900DC00 
010E02 D000C400 B900AF00   B  1342    				dw 208,196,185,175,165,156,147,
010E0A A5009C00 93008B00 
010E12 83007C00 75006E00 
                           B  1343    
010E1A 3A030B03 E002B602   B  1344    period_table_p5	dw 826,779,736,694,655,619,584,
010E22 8F026B02 48022702 
010E2A 0802EB01 CF01B501 
010E32 9D018601 70015B01   B  1345    				dw 413,390,368,347,328,309,292,
010E3A 48013501 24011401 
010E42 0401F500 E800DB00 
010E4A CE00C300 B800AE00   B  1346    				dw 206,195,184,174,164,155,146,
010E52 A4009B00 92008A00 
010E5A 82007B00 74006D00 
                           B  1347    
010E62 34030603 DA02B102   B  1348    period_table_p6	dw 820,774,730,689,651,614,580,
010E6A 8B026602 44022302 
010E72 0402E701 CC01B201 
010E7A 9A018301 6D015901   B  1349    				dw 410,387,365,345,325,307,290,
010E82 45013301 22011201 
010E8A 0201F400 E600D900 
010E92 CD00C100 B700AC00   B  1350    				dw 205,193,183,172,163,154,145,
010E9A A3009A00 91008900 
010EA2 81007A00 73006D00 
                           B  1351    
010EAA 2E030003 D502AC02   B  1352    period_table_p7	dw 814,768,725,684,646,610,575,
010EB2 86026202 3F021F02 
010EBA 0102E401 C901AF01 
010EC2 97018001 6B015601   B  1353    				dw 407,384,363,342,323,305,288,
010ECA 43013101 20011001 
010ED2 0001F200 E400D800 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  38


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010EDA CC00C000 B500AB00   B  1354    				dw 204,192,181,171,161,152,144,
010EE2 A1009800 90008800 
010EEA 80007900 72006C00 
                           B  1355    
010EF2 8B035803 2803FA02   B  1356    period_table_m8	dw 907,856,808,762,720,678,640,
010EFA D002A602 80025C02 
010F02 3A021A02 FC01E001 
010F0A C501AC01 94017D01   B  1357    				dw 453,428,404,381,360,339,320,
010F12 68015301 40012E01 
010F1A 1D010D01 FE00F000 
010F22 E200D600 CA00BE00   B  1358    				dw 226,214,202,190,180,170,160,
010F2A B400AA00 A0009700 
010F32 8F008700 7F007800 
                           B  1359    
010F3A 84035203 2203F502   B  1360    period_table_m7	dw 900,850,802,757,715,675,636,
010F42 CB02A302 7C025902 
010F4A 37021702 F901DD01 
010F52 C201A901 91017B01   B  1361    				dw 450,425,401,379,357,337,318,
010F5A 65015101 3E012C01 
010F62 1C010C01 FD00EE00 
010F6A E100D400 C800BD00   B  1362    				dw 225,212,200,189,179,169,159,
010F72 B300A900 9F009600 
010F7A 8E008600 7E007700 
                           B  1363    
010F82 7E034C03 1C03F002   B  1364    period_table_m6	dw 894,844,796,752,709,670,632,
010F8A C5029E02 78025502 
010F92 33021402 F601DA01 
010F9A BF01A601 8E017801   B  1365    				dw 447,422,398,376,355,335,316,
010FA2 63014F01 3C012A01 
010FAA 1A010A01 FB00ED00 
010FB2 DF00D300 C700BC00   B  1366    				dw 223,211,199,188,177,167,158,
010FBA B100A700 9E009500 
010FC2 8D008500 7D007600 
                           B  1367    
010FCA 77034603 1703EA02   B  1368    period_table_m5	dw 887,838,791,746,704,665,628,
010FD2 C0029902 74025002 
010FDA 2F021002 F201D601 
010FE2 BC01A301 8B017501   B  1369    				dw 444,419,395,373,352,332,314,
010FEA 60014C01 3A012801 
010FF2 18010801 F900EB00 
010FFA DE00D100 C600BB00   B  1370    				dw 222,209,198,187,176,166,157,
011002 B000A600 9D009400 
01100A 8C008400 7D007600 
                           B  1371    
011012 71034003 1103E502   B  1372    period_table_m4	dw 881,832,785,741,699,660,623,
01101A BB029402 6F024C02 
011022 2B020C02 EE01D301 
01102A B901A001 88017201   B  1373    				dw 441,416,392,370,350,330,312,
011032 5E014A01 38012601 
01103A 16010601 F700E900 
011042 DC00D000 C400B900   B  1374    				dw 220,208,196,185,175,165,156,
01104A AF00A500 9C009300 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  39


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
011052 8B008300 7B007500 
                           B  1375    
01105A 6B033A03 0B03E002   B  1376    period_table_m3	dw 875,826,779,736,694,655,619,
011062 B6028F02 6B024802 
01106A 27020802 EB01CF01 
011072 B5019D01 86017001   B  1377    				dw 437,413,390,368,347,328,309,
01107A 5B014801 35012401 
011082 14010401 F500E800 
01108A DB00CE00 C300B800   B  1378    				dw 219,206,195,184,174,164,155,
011092 AE00A400 9B009200 
01109A 8A008200 7B007400 
                           B  1379    
0110A2 64033403 0603DA02   B  1380    period_table_m2	dw 868,820,774,730,689,651,614,
0110AA B1028B02 66024402 
0110B2 23020402 E701CC01 
0110BA B2019A01 83016D01   B  1381    				dw 434,410,387,365,345,325,307,
0110C2 59014501 33012201 
0110CA 12010201 F400E600 
0110D2 D900CD00 C100B700   B  1382    				dw 217,205,193,183,172,163,154,
0110DA AC00A300 9A009100 
0110E2 89008100 7A007300 
                           B  1383    
0110EA 5E032E03 0003D502   B  1384    period_table_m1	dw 862,814,768,725,684,646,610,
0110F2 AC028602 62023F02 
0110FA 1F020102 E401C901 
011102 AF019701 80016B01   B  1385    				dw 431,407,384,363,342,323,305,
01110A 56014301 31012001 
011112 10010001 F200E400 
01111A D800CB00 C000B500   B  1386    				dw 216,203,192,181,171,161,152,
011122 AB00A100 98009000 
01112A 88008000 79007200 
                           B  1387    
                           B  1388    ;----- Vibrato / Tremolo sine wave ------------
                           B  1389    
011132 0018314A 61788DA1   B  1390    vibrato_table		db 000,024,049,074,097,120,
01113A B4C5D4E0 EBF4FAFD   B  1391    					db 180,197,212,224,235,244,
011142 FFFDFAF4 EBE0D4C5   B  1392    					db 255,253,250,244,235,224,
01114A B4A18D78 614A3118   B  1393    					db 180,161,141,120,097,074,
                           B  1394    
                           B  1395    ;----------------------------------------------
                           B  1396    
011152 000000              B  1397    sample_base				dw24 0			; "init
011155 00                  B  1398    relocated_samples		db 0			; if se
                           B  1399    
011156 00 00 00 00 00 00   B  1400    sample_location_list	blkb 31*3,0		; 24bit
01115C 00 00 00 00 00 00 
011162 00 00 00 00 00 00 
011168 00 00 00 00 00 00 
01116E 00 00 00 00 00 00 
011174 00 00 00 00 00 00 
01117A 00 00 00 00 00 00 
011180 00 00 00 00 00 00 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  40


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
011186 00 00 00 00 00 00 
01118C 00 00 00 00 00 00 
011192 00 00 00 00 00 00 
011198 00 00 00 00 00 00 
01119E 00 00 00 00 00 00 
0111A4 00 00 00 00 00 00 
0111AA 00 00 00 00 00 00 
0111B0 00 00 00 
                           B  1401    
                           B  1402    ;----------------------------------------------
                           B  1403    
0111B3 00                  B  1404    ticker				db 0
0111B4 00                  B  1405    songpos				db 0
0111B5 00                  B  1406    patindex			db 0
0111B6 00                  B  1407    songspeed			db 0
0111B7 00                  B  1408    arpeggio_counter	db 0
0111B8 00                  B  1409    pattloop_pos		db 0
0111B9 00                  B  1410    pattloop_count		db 0
0111BA 00                  B  1411    pattdelay_count		db 0
0111BB 00                  B  1412    pattdelay_flag		db 0
0111BC 00                  B  1413    filter_on_off		db 0
                           B  1414    
                           B  1415    ;----------------------------------------------
                           B  1416    
       00000026            B  1417    vars_per_channel		equ 38
                           B  1418    
0111BD 00 00 00 00 00 00   B  1419    channel_data			blkb vars_per_channel*4
0111C3 00 00 00 00 00 00 
0111C9 00 00 00 00 00 00 
0111CF 00 00 00 00 00 00 
0111D5 00 00 00 00 00 00 
0111DB 00 00 00 00 00 00 
0111E1 00 00 00 00 00 00 
0111E7 00 00 00 00 00 00 
0111ED 00 00 00 00 00 00 
0111F3 00 00 00 00 00 00 
0111F9 00 00 00 00 00 00 
0111FF 00 00 00 00 00 00 
011205 00 00 00 00 00 00 
01120B 00 00 00 00 00 00 
011211 00 00 00 00 00 00 
011217 00 00 00 00 00 00 
01121D 00 00 00 00 00 00 
011223 00 00 00 00 00 00 
011229 00 00 00 00 00 00 
01122F 00 00 00 00 00 00 
011235 00 00 00 00 00 00 
01123B 00 00 00 00 00 00 
011241 00 00 00 00 00 00 
011247 00 00 00 00 00 00 
01124D 00 00 00 00 00 00 
011253 00 00 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  41


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B  1420    	
       00000000            B  1421    instrument				equ 0
       00000001            B  1422    period_lo				equ 1
       00000002            B  1423    period_hi				equ 2
       00000003            B  1424    volume					equ 3
       00000004            B  1425    fx_number				equ 4
       00000005            B  1426    fx_args					equ 5
       00000006            B  1427    period_for_fx_lo		equ 6
       00000007            B  1428    period_for_fx_hi		equ 7
       00000008            B  1429    volume_for_fx			equ 8
       00000009            B  1430    portamento_rate			equ 9
       0000000A            B  1431    vibrato_args			equ 10
       0000000B            B  1432    vibrato_pos				equ 11
       0000000C            B  1433    tremolo_args			equ 12
       0000000D            B  1434    tremolo_pos				equ 13
       0000000E            B  1435    wave_type 				equ 14		;bits 7:4 =
       0000000F            B  1436    control_bits			equ 15		;bit 0 = no
       00000010            B  1437    portamento_dest_lo		equ 16		;bit 2 = ch
       00000011            B  1438    portamento_dest_hi		equ 17
       00000012            B  1439    instrument_waiting		equ 18
       00000013            B  1440    volume_waiting			equ 19
       00000014            B  1441    finetune				equ 20
       00000015            B  1442    arp_base_period_lo  	equ 21
       00000016            B  1443    arp_base_period_hi		equ 22
                           B  1444    
       00000017            B  1445    sample_location			equ 23		;23,24,25	       0000001A            B  1446    sample_length			equ 26		;26,27,28	       0000001D            B  1447    sample_loop_location	equ 29		;29,30,31	       00000020            B  1448    sample_loop_length		equ 32		;32,33,34	       00000023            B  1449    sample_offset			equ 35		;35,36,37	                           B  1450    
                           B  1451    
                           B  1452    ;==============================================
                           B  1453    ; End of non-hardware specific eZ80 Protracker 
                           B  1454    ;==============================================
                           B  1455    
                           A   158    	
                           B     0    			include "routines/ADL_mode_Protrack
                           B     1    ;----------------------------------------------
                           B     2    ; Convert Amiga hardware values from eZ80 Protr
                           B     3    ; and writes to hardware registers
                           B     4    ;----------------------------------------------
                           B     5    ;
                           B     6    ; V1.02 - Changed audio register writes to AMOE
                           B     7    ; V1.01 - ADL mode
                           B     8    ;
                           B     9    ; Writes 4 tracker channels to left channels
                           B    10    ;----------------------------------------------
                           B    11    
                           B    12    .assume ADL = 1
                           B    13    
                           B    14    ;----------------------------------------------
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  42


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_AMOEBA_audio_v102.asm
                           B    15    
011255                     B    16    update_audio_hardware
                           B    17    
011255 3EFF                B    18    				ld a,0ffh						011257 328014FF            B    19    				ld (hw_audio_registers+80h),a	01125B 32 AD 19 01         B    20    				ld (a_chan_restarted),a
                           B    21    
01125F DD21 BD 11 01       B    22    				ld ix,channel_data
011264 FD210014 FF         B    23    				ld iy,hw_audio_registers
011269 0604                B    24    				ld b,4
                           B    25    				
01126B DDCB0F46            B    26    reg_loop1		bit 0,(ix+control_bits)			01126F 28 1B               B    27    				jr z,no_trig
011271 DD1717              B    28    				ld de,(ix+sample_location)		011274 FD1F00              B    29    				ld (iy),de
011277 DD171A              B    30    				ld de,(ix+sample_length)		01127A FD1F04              B    31    				ld (iy+4),de
01127D FD360E00            B    32    				ld (iy+0eh),0					011281 FD360F03            B    33    				ld (iy+0fh),011b				011285 3E04                B    34    				ld a,4
011287 90                  B    35    				sub a,b
011288 32 AD 19 01         B    36    				ld (a_chan_restarted),a			                           B    37    				
01128C DD1701              B    38    no_trig			ld de,(ix+period_lo)			01128F 21000000            B    39    				ld hl,0
011293 6B                  B    40    				ld l,e
011294 62                  B    41    				ld h,d
011295 29                  B    42    				add hl,hl
011296 11 3F 12 01         B    43    				ld de,period_conv_table-200		01129A 19                  B    44    				add hl,de
01129B 11000000            B    45    				ld de,0
01129F 5E                  B    46    				ld e,(hl)
0112A0 23                  B    47    				inc hl
0112A1 56                  B    48    				ld d,(hl)
0112A2 FD1F08              B    49    				ld (iy+08h),de					                           B    50    				
0112A5 DD7E03              B    51    				ld a,(ix+volume)				0112A8 FD770C              B    52    				ld (iy+0ch),a					                           B    53    				
0112AB ED3226              B    54    				lea ix,ix+vars_per_channel
0112AE ED3310              B    55    				lea iy,iy+16
0112B1 10 B8               B    56    				djnz reg_loop1
0112B3 AF                  B    57    				xor a
0112B4 328014FF            B    58    				ld (hw_audio_registers+80h),a	                           B    59    
                           B    60    ;----------------------------------------------
                           B    61    
0112B8 3A AD 19 01         B    62    				ld a,(a_chan_restarted)			0112BC FEFF                B    63    				cp 0ffh
0112BE C8                  B    64    				ret z
0112BF ED3908              B    65    				out0 (port_selector),a			0112C2 ED3801              B    66    wait_audio		in0 a,(port_hw_flags)
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  43


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_AMOEBA_audio_v102.asm
0112C5 CB77                B    67    				bit 6,a
0112C7 28 F9               B    68    				jr z,wait_audio
                           B    69    
                           B    70    ;----------------------------------------------
                           B    71    					
                           B    72    				
0112C9 3EFF                B    73    				ld a,0ffh
0112CB 328014FF            B    74    				ld (hw_audio_registers+80h),a	                           B    75    				
0112CF DD21 BD 11 01       B    76    				ld ix,channel_data
0112D4 FD210014 FF         B    77    				ld iy,hw_audio_registers
0112D9 0604                B    78    				ld b,4
0112DB DDCB0F46            B    79    reg_loop2		bit 0,(ix+control_bits)
0112DF 28 18               B    80    				jr z,no_trig2
0112E1 DDCB0F86            B    81    				res 0,(ix+control_bits)
                           B    82    				
0112E5 DD171D              B    83    				ld de,(ix+sample_loop_location)
0112E8 FD1F00              B    84    				ld (iy),de
0112EB DD1720              B    85    				ld de,(ix+sample_loop_length)	0112EE FD1F04              B    86    				ld (iy+4),de
0112F1 FD360E00            B    87    				ld (iy+0eh),0
0112F5 FD360F00            B    88    				ld (iy+0fh),000b				                           B    89    
0112F9 ED3226              B    90    no_trig2		lea ix,ix+vars_per_channel
0112FC ED3310              B    91    				lea iy,iy+16
0112FF 10 DA               B    92    				djnz reg_loop2
                           B    93    				
011301 AF                  B    94    				xor a
011302 328014FF            B    95    				ld (hw_audio_registers+80h),a	                           B    96    					
011306 C9                  B    97    				ret
                           B    98    		
                           B    99    
                           B   100    ;----------------------------------------------
                           B   101    ; Table for equivalent EZ80P constants to Amiga
                           B   102    ;----------------------------------------------
                           B   103    ;
                           B   104    ; Formula: (1/48828) / ((1/3579545) * period) *
                           B   105    ;
                           B   106    ; Starts at Amiga period 100, one 16-bit consta
                           B   107    
011307                     B   108    period_conv_table:
                           B   109    
011307 ABBBD0B9 FDB734B6   B   110                    db 0ABh,0BBh,0D0h,0B9h,0FDh,0B7
01130F 74B4BCB2 0CB164AF 
011317 C5AD2DAC 9CAA12A9   B   111                    db 0C5h,0ADh,02Dh,0ACh,09Ch,0AA
01131F 90A714A6 9FA431A3 
011327 C9A167A0 0B9FB59D   B   112                    db 0C9h,0A1h,067h,0A0h,00Bh,09F
01132F 649C199B D4999498 
011337 59972396 F294C593   B   113                    db 059h,097h,023h,096h,0F2h,094
01133F 9E927B91 5C90428F 
011347 2C8E1B8D 0D8C048B   B   114                    db 02Ch,08Eh,01Bh,08Dh,00Dh,08C
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  44


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_AMOEBA_audio_v102.asm
01134F FE89FC88 FE870487 
011357 0D861985 29843D83   B   115                    db 00Dh,086h,019h,085h,029h,084
01135F 53826D81 8A80AA7F 
011367 CE7EF47D 1D7D497C   B   116                    db 0CEh,07Eh,0F4h,07Dh,01Dh,07D
01136F 777BA97A DD791479 
011377 4D788977 C7760876   B   117                    db 04Dh,078h,089h,077h,0C7h,076
01137F 4B759074 D8732273 
011387 6F72BD71 0E716070   B   118                    db 06Fh,072h,0BDh,071h,00Eh,071
01138F B56F0C6F 656EBF6D 
011397 1C6D7B6C DB6B3D6B   B   119                    db 01Ch,06Dh,07Bh,06Ch,0DBh,06B
01139F A16A076A 6E69D868 
0113A7 4368AF67 1D678D66   B   120                    db 043h,068h,0AFh,067h,01Dh,067
0113AF FE657165 E6645B64 
0113B7 D3634C63 C6624162   B   121                    db 0D3h,063h,04Ch,063h,0C6h,062
0113BF BE613D61 BC603D60 
0113C7 C05F435F C85E4E5E   B   122                    db 0C0h,05Fh,043h,05Fh,0C8h,05E
0113CF D55D5E5D E85C725C 
0113D7 FE5B8C5B 1A5BA95A   B   123                    db 0FEh,05Bh,08Ch,05Bh,01Ah,05B
0113DF 3A5ACB59 5E59F158 
0113E7 86581B58 B2574A57   B   124                    db 086h,058h,01Bh,058h,0B2h,057
0113EF E2567C56 1656B155 
0113F7 4E55EB54 89542854   B   125                    db 04Eh,055h,0EBh,054h,089h,054
0113FF C8536853 0A53AC52 
011407 4F52F351 98513E51   B   126                    db 04Fh,052h,0F3h,051h,098h,051
01140F E4508B50 3350DC4F 
011417 854F2F4F DA4E864E   B   127                    db 085h,04Fh,02Fh,04Fh,0DAh,04E
01141F 324EDF4D 8C4D3B4D 
011427 EA4C994C 4A4CFA4B   B   128                    db 0EAh,04Ch,099h,04Ch,04Ah,04C
01142F AC4B5E4B 114BC54A 
011437 794A2D4A E2499849   B   129                    db 079h,04Ah,02Dh,04Ah,0E2h,049
01143F 4F490649 BD487548 
011447 2E48E747 A1475B47   B   130                    db 02Eh,048h,0E7h,047h,0A1h,047
01144F 1647D146 8D464946 
011457 0646C445 82454045   B   131                    db 006h,046h,0C4h,045h,082h,045
01145F FF44BE44 7E443E44 
011467 FF43C043 82434443   B   132                    db 0FFh,043h,0C0h,043h,082h,043
01146F 0643C942 8C425042 
011477 1442D941 9E416441   B   133                    db 014h,042h,0D9h,041h,09Eh,041
01147F 2941F040 B6407D40 
011487 45400D40 D53F9E3F   B   134                    db 045h,040h,00Dh,040h,0D5h,03F
01148F 673F303F FA3EC43E 
011497 8E3E593E 243EF03D   B   135                    db 08Eh,03Eh,059h,03Eh,024h,03E
01149F BB3D883D 543D213D 
0114A7 EE3CBC3C 8A3C583C   B   136                    db 0EEh,03Ch,0BCh,03Ch,08Ah,03C
0114AF 263CF53B C43B943B 
0114B7 633B333B 043BD43A   B   137                    db 063h,03Bh,033h,03Bh,004h,03B
0114BF A53A763A 483A1A3A 
0114C7 EC39BE39 91396439   B   138                    db 0ECh,039h,0BEh,039h,091h,039
0114CF 37390B39 DE38B238 
0114D7 87385B38 30380538   B   139                    db 087h,038h,05Bh,038h,030h,038
0114DF DA37B037 86375C37 
0114E7 32370937 DF36B636   B   140                    db 032h,037h,009h,037h,0DFh,036
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  45


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_AMOEBA_audio_v102.asm
0114EF 8E366536 3D361536 
0114F7 ED35C635 9E357735   B   141                    db 0EDh,035h,0C6h,035h,09Eh,035
0114FF 50352A35 0335DD34 
011507 B7349134 6C344634   B   142                    db 0B7h,034h,091h,034h,06Ch,034
01150F 2134FC33 D733B333 
011517 8E336A33 46332233   B   143                    db 08Eh,033h,06Ah,033h,046h,033
01151F FF32DC32 B8329532 
011527 73325032 2D320B32   B   144                    db 073h,032h,050h,032h,02Dh,032
01152F E931C731 A6318431 
011537 63314131 20310031   B   145                    db 063h,031h,041h,031h,020h,031
01153F DF30BE30 9E307E30 
011547 5E303E30 1E30FF2F   B   146                    db 05Eh,030h,03Eh,030h,01Eh,030
01154F E02FC02F A12F832F 
011557 642F452F 272F092F   B   147                    db 064h,02Fh,045h,02Fh,027h,02F
01155F EA2ECD2E AF2E912E 
011567 742E562E 392E1C2E   B   148                    db 074h,02Eh,056h,02Eh,039h,02E
01156F FF2DE22D C62DA92D 
011577 8D2D702D 542D382D   B   149                    db 08Dh,02Dh,070h,02Dh,054h,02D
01157F 1D2D012D E52CCA2C 
011587 AF2C932C 782C5D2C   B   150                    db 0AFh,02Ch,093h,02Ch,078h,02C
01158F 432C282C 0D2CF32B 
011597 D92BBF2B A52B8B2B   B   151                    db 0D9h,02Bh,0BFh,02Bh,0A5h,02B
01159F 712B572B 3E2B242B 
0115A7 0B2BF22A D82ABF2A   B   152                    db 00Bh,02Bh,0F2h,02Ah,0D8h,02A
0115AF A72A8E2A 752A5D2A 
0115B7 442A2C2A 142AFC29   B   153                    db 044h,02Ah,02Ch,02Ah,014h,02A
0115BF E429CC29 B4299C29 
0115C7 85296D29 56293F29   B   154                    db 085h,029h,06Dh,029h,056h,029
0115CF 27291029 F928E328 
0115D7 CC28B528 9F288828   B   155                    db 0CCh,028h,0B5h,028h,09Fh,028
0115DF 72285C28 45282F28 
0115E7 19280328 EE27D827   B   156                    db 019h,028h,003h,028h,0EEh,027
0115EF C227AD27 97278227 
0115F7 6D275827 43272E27   B   157                    db 06Dh,027h,058h,027h,043h,027
0115FF 19270427 EF26DA26 
011607 C626B126 9D268926   B   158                    db 0C6h,026h,0B1h,026h,09Dh,026
01160F 75266026 4C263826 
011617 25261126 FD25E925   B   159                    db 025h,026h,011h,026h,0FDh,025
01161F D625C225 AF259C25 
011627 88257525 62254F25   B   160                    db 088h,025h,075h,025h,062h,025
01162F 3C252925 16250425 
011637 F124DE24 CC24B924   B   161                    db 0F1h,024h,0DEh,024h,0CCh,024
01163F A7249524 83247024 
011647 5E244C24 3A242924   B   162                    db 05Eh,024h,04Ch,024h,03Ah,024
01164F 17240524 F323E223 
011657 D023BF23 AD239C23   B   163                    db 0D0h,023h,0BFh,023h,0ADh,023
01165F 8B237A23 68235723 
011667 46233523 24231423   B   164                    db 046h,023h,035h,023h,024h,023
01166F 0323F222 E222D122 
011677 C122B022 A0228F22   B   165                    db 0C1h,022h,0B0h,022h,0A0h,022
01167F 7F226F22 5F224F22 
011687 3F222F22 1F220F22   B   166                    db 03Fh,022h,02Fh,022h,01Fh,022
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  46


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_AMOEBA_audio_v102.asm
01168F FF21EF21 E021D021 
011697 C121B121 A2219221   B   167                    db 0C1h,021h,0B1h,021h,0A2h,021
01169F 83217321 64215521 
0116A7 46213721 28211921   B   168                    db 046h,021h,037h,021h,028h,021
0116AF 0A21FB20 EC20DE20 
0116B7 CF20C020 B220A320   B   169                    db 0CFh,020h,0C0h,020h,0B2h,020
0116BF 94208620 78206920 
0116C7 5B204D20 3E203020   B   170                    db 05Bh,020h,04Dh,020h,03Eh,020
0116CF 22201420 0620F81F 
0116D7 EA1FDC1F CF1FC11F   B   171                    db 0EAh,01Fh,0DCh,01Fh,0CFh,01F
0116DF B31FA51F 981F8A1F 
0116E7 7D1F6F1F 621F541F   B   172                    db 07Dh,01Fh,06Fh,01Fh,062h,01F
0116EF 471F3A1F 2C1F1F1F 
0116F7 121F051F F81EEA1E   B   173                    db 012h,01Fh,005h,01Fh,0F8h,01E
0116FF DD1ED01E C41EB71E 
011707 AA1E9D1E 901E841E   B   174                    db 0AAh,01Eh,09Dh,01Eh,090h,01E
01170F 771E6A1E 5E1E511E 
011717 451E381E 2C1E1F1E   B   175                    db 045h,01Eh,038h,01Eh,02Ch,01E
01171F 131E071E FA1DEE1D 
011727 E21DD61D CA1DBD1D   B   176                    db 0E2h,01Dh,0D6h,01Dh,0CAh,01D
01172F B11DA51D 991D8D1D 
011737 821D761D 6A1D5E1D   B   177                    db 082h,01Dh,076h,01Dh,06Ah,01D
01173F 521D471D 3B1D2F1D 
011747 241D181D 0D1D011D   B   178                    db 024h,01Dh,018h,01Dh,00Dh,01D
01174F F61CEA1C DF1CD41C 
011757 C81CBD1C B21CA61C   B   179                    db 0C8h,01Ch,0BDh,01Ch,0B2h,01C
01175F 9B1C901C 851C7A1C 
011767 6F1C641C 591C4E1C   B   180                    db 06Fh,01Ch,064h,01Ch,059h,01C
01176F 431C381C 2D1C221C 
011777 181C0D1C 021CF81B   B   181                    db 018h,01Ch,00Dh,01Ch,002h,01C
01177F ED1BE21B D81BCD1B 
011787 C31BB81B AE1BA31B   B   182                    db 0C3h,01Bh,0B8h,01Bh,0AEh,01B
01178F 991B8E1B 841B7A1B 
011797 6F1B651B 5B1B511B   B   183                    db 06Fh,01Bh,065h,01Bh,05Bh,01B
01179F 471B3C1B 321B281B 
0117A7 1E1B141B 0A1B001B   B   184                    db 01Eh,01Bh,014h,01Bh,00Ah,01B
0117AF F61AEC1A E31AD91A 
0117B7 CF1AC51A BB1AB21A   B   185                    db 0CFh,01Ah,0C5h,01Ah,0BBh,01A
0117BF A81A9E1A 951A8B1A 
0117C7 811A781A 6E1A651A   B   186                    db 081h,01Ah,078h,01Ah,06Eh,01A
0117CF 5B1A521A 481A3F1A 
0117D7 361A2C1A 231A1A1A   B   187                    db 036h,01Ah,02Ch,01Ah,023h,01A
0117DF 101A071A FE19F519 
0117E7 EB19E219 D919D019   B   188                    db 0EBh,019h,0E2h,019h,0D9h,019
0117EF C719BE19 B519AC19 
0117F7 A3199A19 91198819   B   189                    db 0A3h,019h,09Ah,019h,091h,019
0117FF 7F197619 6E196519 
011807 5C195319 4A194219   B   190                    db 05Ch,019h,053h,019h,04Ah,019
01180F 39193019 28191F19 
011817 16190E19 0519FD18   B   191                    db 016h,019h,00Eh,019h,005h,019
01181F F418EC18 E318DB18 
011827 D318CA18 C218B918   B   192                    db 0D3h,018h,0CAh,018h,0C2h,018
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  47


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_AMOEBA_audio_v102.asm
01182F B118A918 A0189818 
011837 90188818 80187718   B   193                    db 090h,018h,088h,018h,080h,018
01183F 6F186718 5F185718 
011847 4F184718 3F183718   B   194                    db 04Fh,018h,047h,018h,03Fh,018
01184F 2F182718 1F181718 
011857 0F180718 FF17F717   B   195                    db 00Fh,018h,007h,018h,0FFh,017
01185F F017E817 E017D817 
011867 D017C917 C117B917   B   196                    db 0D0h,017h,0C9h,017h,0C1h,017
01186F B217AA17 A2179B17 
011877 93178C17 84177D17   B   197                    db 093h,017h,08Ch,017h,084h,017
01187F 75176D17 66175F17 
011887 57175017 48174117   B   198                    db 057h,017h,050h,017h,048h,017
01188F 3A173217 2B172417 
011897 1C171517 0E170617   B   199                    db 01Ch,017h,015h,017h,00Eh,017
01189F FF16F816 F116EA16 
0118A7 E316DB16 D416CD16   B   200                    db 0E3h,016h,0DBh,016h,0D4h,016
0118AF C616BF16 B816B116 
0118B7 AA16A316 9C169516   B   201                    db 0AAh,016h,0A3h,016h,09Ch,016
0118BF 8E168716 80167916 
0118C7 72166C16 65165E16   B   202                    db 072h,016h,06Ch,016h,065h,016
0118CF 57165016 49164316 
0118D7 3C163516 2E162816   B   203                    db 03Ch,016h,035h,016h,02Eh,016
0118DF 21161A16 14160D16 
0118E7 06160016 F915F315   B   204                    db 006h,016h,000h,016h,0F9h,015
0118EF EC15E615 DF15D915 
0118F7 D215CC15 C515BF15   B   205                    db 0D2h,015h,0CCh,015h,0C5h,015
0118FF B815B215 AB15A515 
011907 9F159815 92158B15   B   206                    db 09Fh,015h,098h,015h,092h,015
01190F 85157F15 79157215 
011917 6C156615 5F155915   B   207                    db 06Ch,015h,066h,015h,05Fh,015
01191F 53154D15 47154015 
011927 3A153415 2E152815   B   208                    db 03Ah,015h,034h,015h,02Eh,015
01192F 22151C15 16151015 
011937 0A150415 FE14F814   B   209                    db 00Ah,015h,004h,015h,0FEh,014
01193F F214EC14 E614E014 
011947 DA14D414 CE14C814   B   210                    db 0DAh,014h,0D4h,014h,0CEh,014
01194F C214BC14 B614B114 
011957 AB14A514 9F149914   B   211                    db 0ABh,014h,0A5h,014h,09Fh,014
01195F 93148E14 88148214 
011967 7C147714 71146B14   B   212                    db 07Ch,014h,077h,014h,071h,014
01196F 66146014 5A145514 
011977 4F144914 44143E14   B   213                    db 04Fh,014h,049h,014h,044h,014
01197F 39143314 2E142814 
011987 22141D14 17141214   B   214                    db 022h,014h,01Dh,014h,017h,014
01198F 0C140714 0114FC13 
011997 F713F113 EC13E613   B   215                    db 0F7h,013h,0F1h,013h,0ECh,013
01199F E113DC13 D613D113 
0119A7 CB13C613 C113       B   216                    db 0CBh,013h,0C6h,013h,0C1h,013
                           B   217    				
0119AD 00                  B   218    a_chan_restarted db 0
                           B   219    
                           B   220    ;----------------------------------------------
Zilog eZ80 Macro Assembler Version 4.1 (10060805)27-Sep-11     11:51:34     page:  48


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_AMOEBA_audio_v102.asm
                           B   221    
                           A   160    
                           A   161    ;----------------------------------------------
                           A   162    
                           A   163    ALIGN 2
                           A   164    
0119AE 00                  A   165    music_module	db 0
                           A   166    
                           A   167    ;----------------------------------------------
                           A   168    
                           A   169    		


Errors: 0
Warnings: 0
Lines Assembled: 2187
