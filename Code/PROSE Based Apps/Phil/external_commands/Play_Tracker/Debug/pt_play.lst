Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Play Protracker Module V1.02 (sample data can
                           A     2    
                           A     3    ;----------------------------------------------
                           A     4    
       00000000            A     5    amoeba_version_req	equ	0				; 0 = d
       0000003B            A     6    prose_version_req	equ 03bh			; 0 = d
       00000001            A     7    ADL_mode			equ 1				; 0 if 
       00010000            A     8    load_location		equ 10000h			; anywh
                           A     9    
                           B     0    			include	'PROSE_header.asm'
                           B     1    
                           B     2    ;----------------------------------------------
                           B     3    
                           C     0    include "ez80_cpu_equates.asm"
                           C     1    ;--- EZ80 Internal Ports ----------------------
                           C     2    
       0000009A            C     3    PB_DR			equ 09ah
       0000009B            C     4    PB_DDR			equ 09bh
       0000009C            C     5    PB_ALT1			equ 09ch
       0000009D            C     6    PB_ALT2			equ 09dh
                           C     7    
       0000009E            C     8    PC_DR			equ 09eh
       0000009F            C     9    PC_DDR			equ 09fh
       000000A0            C    10    PC_ALT1			equ 0a0h
       000000A1            C    11    PC_ALT2			equ 0a1h
                           C    12    
       000000A2            C    13    PD_DR			equ 0a2h
       000000A3            C    14    PD_DDR			equ 0a3h
       000000A4            C    15    PD_ALT1			equ 0a4h
       000000A5            C    16    PD_ALT2			equ 0a5h
                           C    17    
       000000C0            C    18    UART0_RBR		equ 0c0h
       000000C0            C    19    UART0_THR		equ 0c0h
       000000C0            C    20    UART0_BRG_L		equ 0c0h
       000000C1            C    21    UART0_BRG_H		equ 0c1h
       000000C1            C    22    UART0_IER		equ 0c1h
       000000C2            C    23    UART0_FCTL		equ 0c2h
       000000C3            C    24    UART0_LCTL		equ 0c3h
       000000C4            C    25    UART0_MCTL		equ 0c4h
       000000C5            C    26    UART0_LSR		equ 0c5h
       000000C6            C    27    UART0_MSR		equ 0c6h
                           C    28    
       000000A8            C    29    CS0_LBR			equ 0a8h			;eZ80 wait 
       000000A9            C    30    CS0_UBR			equ 0a9h
       000000AA            C    31    CS0_CTL			equ 0aah			
       000000AB            C    32    CS1_LBR			equ 0abh			;eZ80 wait 
       000000AC            C    33    CS1_UBR			equ 0ach
       000000AD            C    34    CS1_CTL			equ 0adh
       000000AE            C    35    CS2_LBR			equ 0aeh			;eZ80 wait 
       000000AF            C    36    CS2_UBR			equ 0afh
       000000B0            C    37    CS2_CTL			equ 0b0h
       000000B1            C    38    CS3_LBR			equ 0b1h			;eZ80 wait 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:   2


PC     Object              I  Line    Source ..\..\..\..\..\Includes\ez80_cpu_equates.asm
       000000B2            C    39    CS3_UBR			equ 0b2h
       000000B3            C    40    CS3_CTL			equ 0b3h
                           C    41    
       00000080            C    42    TMR0_CTL		equ 080h			;timer 0 eq
       00000081            C    43    TMR0_DR_L		equ 081h
       00000081            C    44    TMR0_RR_L		equ 081h
       00000082            C    45    TMR0_DR_H		equ 082h
       00000082            C    46    TMR0_RR_H		equ 082h
       00000092            C    47    TMR_ISS			equ 092h
                           C    48    
       00000083            C    49    TMR1_CTL		equ 083h 
       00000084            C    50    TMR1_RR_L		equ 084h
       00000085            C    51    TMR1_RR_H		equ 085h
                           C    52    
       000000ED            C    53    RTC_CTRL		equ 0edh			;RTC equate
       000000EC            C    54    RTC_ACTRL		equ 0ech
       000000E0            C    55    RTC_SEC			equ 0e0h
       000000E1            C    56    RTC_MIN			equ 0e1h
       000000E2            C    57    RTC_HRS			equ 0e2h
       000000E3            C    58    RTC_DOW			equ 0e3h
       000000E4            C    59    RTC_DOM			equ 0e4h
       000000E5            C    60    RTC_MON			equ 0e5h
       000000E6            C    61    RTC_YR			equ 0e6h
       000000E7            C    62    RTC_CEN			equ 0e7h
                           C    63    
                           C    64    ;----------------------------------------------
                           B     5    
                           B     6    
                           C     0    include "amoeba_hardware_equates.asm"
                           C     1    ;-- AMOEBA Hardware equates -------------------
                           C     2    
       00000000            C     3    port_pic_data  			equ 000h
       00000001            C     4    port_pic_ctrl			equ 001h
       00000001            C     5    port_hw_flags			equ 001h
       00000002            C     6    port_sdc_ctrl			equ 002h	; this is a
       00000002            C     7    port_keyboard_data		equ 002h
       00000003            C     8    port_sdc_data		 	equ 003h	
       00000004            C     9    port_memory_paging		equ 004h
       00000005            C    10    port_irq_ctrl			equ 005h
       00000005            C    11    port_irq_flags			equ 005h
       00000006            C    12    port_nmi_ack			equ 006h
       00000007            C    13    port_ps2_ctrl			equ 007h
       00000008            C    14    port_selector			equ 008h
       00000006            C    15    port_mouse_data			equ 006h
       00000009            C    16    port_clear_flags		equ 009h
                           C    17    
       00000000            C    18    sdc_power				equ 0		;(port_sd_c
       00000001            C    19    sdc_cs					equ 1		;(port_sd_c
       00000002            C    20    sdc_speed				equ 2 		;(port_sd_c
                           C    21    
       00000004            C    22    sdc_serializer_busy		equ 4 		;(port_hw_f
       00000005            C    23    vrt						equ 5		;(port_hw_f
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:   3


PC     Object              I  Line    Source ..\..\..\..\..\Includes\amoeba_hardware_equates.asm
                           C    24    
                           C    25    
                           C    26    ;-- Memory locations --------------------------
                           C    27    
       00000000            C    28    sysram_addr				equ 0000000h
       00800000            C    29    vram_a_addr				equ 0800000h
       00C00000            C    30    vram_b_addr				equ 0c00000h
                           C    31    
                           C    32    ;-- Hardware registers ------------------------
                           C    33    
       00FF0000            C    34    hw_palette				equ 0ff0000h
       00FF0800            C    35    hw_sprite_registers		equ 0ff0800h
       00FF1000            C    36    hw_video_parameters		equ 0ff1000h
       00FF1400            C    37    hw_audio_registers		equ 0ff1400h
       00FF1800            C    38    hw_video_settings		equ 0ff1800h
                           C    39    
       00FF1000            C    40    tilemap_parameters		equ hw_video_parameters
       00FF1020            C    41    bitmap_parameters		equ hw_video_parameters
                           C    42    
       00FF1800            C    43    video_control			equ hw_video_settings+0
       00FF1801            C    44    sprite_control			equ hw_video_settings+0
       00FF1802            C    45    bgnd_palette_select		equ hw_video_settings+0
       00FF1803            C    46    sprite_palette_select	equ hw_video_settings+0
       00FF1804            C    47    right_border_position	equ hw_video_settings+0
       00FF1805            C    48    irq_line_lo				equ hw_video_settings+0
       00FF1806            C    49    irq_line_hi				equ hw_video_settings+0
                           C    50    
                           C    51    ;----------------------------------------------
                           B     8    
                           B     9    
                           C     0    include "prose_kernal_labels.asm"
                           C     1    ;--------- PROSE Kernal Routine labels --------
                           C     2    		
       00000000            C     3    kr_mount_volumes				equ 00h	
       00000001            C     4    kr_get_device_info				equ 01h	
       00000002            C     5    kr_check_volume_format			equ 02h	
       00000003            C     6    kr_change_volume				equ 03h	
       00000004            C     7    kr_get_volume_info				equ 04h	
       00000005            C     8    kr_format_device				equ 05h	
       00000006            C     9    kr_make_dir						equ 06h
                           C    10    
       00000007            C    11    kr_change_dir					equ 07h	
       00000008            C    12    kr_parent_dir					equ 08h	
       00000009            C    13    kr_root_dir						equ 09h
       0000000A            C    14    kr_delete_dir					equ 0ah
                           C    15    
       0000000B            C    16    kr_find_file					equ 0bh
       0000000B            C    17    kr_open_file					equ 0bh		; p
                           C    18    
       0000000C            C    19    kr_set_file_pointer				equ 0ch
       0000000D            C    20    kr_set_load_length				equ 0dh
       0000000E            C    21    kr_read_file					equ 0eh
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:   4


PC     Object              I  Line    Source ..\..\..\..\..\Includes\prose_kernal_labels.asm
                           C    22    
       0000000F            C    23    kr_erase_file					equ 0fh
       00000010            C    24    kr_rename_file					equ 10h
       00000011            C    25    kr_create_file					equ 11h
       00000012            C    26    kr_write_file					equ 12h
       00000013            C    27    kr_get_total_sectors			equ 13h
       00000014            C    28    kr_dir_list_first_entry			equ 14h
       00000015            C    29    kr_dir_list_get_entry			equ 15h
       00000016            C    30    kr_dir_list_next_entry			equ 16h
                           C    31    
       00000017            C    32    kr_read_sector					equ 17h
       00000018            C    33    kr_write_sector					equ 18h
       00000019            C    34    kr_file_sector_list				equ 19h
       0000001A            C    35    kr_get_dir_cluster				equ 1ah
       0000001B            C    36    kr_set_dir_cluster				equ 1bh
       0000001C            C    37    kr_get_dir_name					equ 1ch
       0000001D            C    38    kr_wait_key						equ 1dh
       0000001E            C    39    kr_get_key						equ 1eh
                           C    40    
       0000001F            C    41    kr_get_key_mod_flags			equ 1fh
       00000020            C    42    kr_serial_receive_header		equ 20h
       00000021            C    43    kr_serial_receive_file			equ 21h
       00000022            C    44    kr_serial_send_file				equ 22h
       00000023            C    45    kr_serial_tx_byte				equ 23h
       00000024            C    46    kr_serial_rx_byte				equ 24h
                           C    47    
       00000025            C    48    kr_print_string					equ 25h
       00000026            C    49    kr_clear_screen					equ 26h
       00000027            C    50    kr_wait_vrt						equ 27h
       00000028            C    51    kr_set_cursor_position			equ 28h
       00000029            C    52    kr_plot_char					equ 29h
       0000002A            C    53    kr_set_pen						equ 2ah
       0000002B            C    54    kr_background_colours			equ 2bh
       0000002C            C    55    kr_draw_cursor					equ 2ch
       0000002D            C    56    kr_get_pen						equ 2dh
       0000002E            C    57    kr_scroll_up					equ 2eh
       0000002F            C    58    kr_os_display					equ 2fh
                           C    59    
       00000030            C    60    kr_get_display_size				equ 30h	
       00000030            C    61    kr_get_video_mode				equ 30h		;pr
                           C    62    
       00000031            C    63    kr_get_charmap_addr_xy			equ 31h
       00000032            C    64    kr_get_cursor_position			equ 32h
                           C    65    
       00000033            C    66    kr_set_envar					equ 33h
       00000034            C    67    kr_get_envar					equ 34h
       00000035            C    68    kr_delete_envar					equ 35h
                           C    69    
       00000036            C    70    kr_init_mouse					equ 36h 	; n
                           C    71    
       00000037            C    72    kr_get_mouse_position			equ 37h
                           C    73    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:   5


PC     Object              I  Line    Source ..\..\..\..\..\Includes\prose_kernal_labels.asm
       00000038            C    74    kr_get_mouse_motion				equ 38h
       00000038            C    75    kr_get_mouse_counters			equ 38h		;pr
                           C    76    
       00000039            C    77    kr_time_delay					equ 39h
       0000003A            C    78    kr_compare_strings				equ 3ah
       0000003B            C    79    kr_hex_byte_to_ascii			equ 3bh
       0000003C            C    80    kr_ascii_to_hex_word			equ 3ch
       0000003D            C    81    kr_get_string					equ 3dh
                           C    82    
       0000003E            C    83    kr_get_version					equ 3eh
       0000003F            C    84    kr_dont_store_registers			equ 3fh
       00000040            C    85    kr_get_font_info				equ 40h
       00000041            C    86    kr_read_rtc						equ 41h
       00000042            C    87    kr_write_rtc					equ 42h
                           C    88    
       00000043            C    89    kr_get_keymap_location			equ 43h
                           C    90    
       00000044            C    91    kr_get_os_high_mem				equ 44h
       00000044            C    92    kr_get_mem_base					equ 44h		
       00000044            C    93    kr_get_ram_base					equ 44h		;pr
                           C    94    
       00000045            C    95    kr_play_audio					equ 45h
       00000046            C    96    kr_disable_audio				equ 46h
       00000047            C    97    kr_get_joysticks				equ 47h
       00000048            C    98    kr_set_video_mode				equ 48h
       00000049            C    99    kr_set_cursor_image				equ 49h
       0000004A            C   100    kr_remove_cursor				equ 4ah
       0000004B            C   101    kr_char_to_font					equ 4bh
                           C   102    
       0000004C            C   103    kr_get_disk_sector_ptr			equ 4ch
       0000004D            C   104    kr_set_timeout					equ 4dh
       0000004E            C   105    kr_test_timeout					equ 4eh
       0000004F            C   106    kr_set_pointer					equ 4fh
       00000050            C   107    kr_allocate_ram					equ 50h
       00000051            C   108    kr_deallocate_ram				equ 51h
                           C   109    
       00000052            C   110    kr_get_mem_top					equ 52h
       00000052            C   111    kr_get_ram_top					equ 52h		;pr
                           C   112    
       00000053            C   113    kr_init_msec_counter			equ 53h
       00000054            C   114    kr_read_msec_counter			equ 54h
       00000055            C   115    kr_parse_path					equ 55h
                           C   116    
                           C   117    ;----------------------------------------------
                           B    11    
                           B    12    
                           C     0    include "misc_system_equates.asm"
                           C     1    
                           C     2    ;-- System Equates ----------------------------
                           C     3    
       00000A00            C     4    os_location			equ 0a00h
                           C     5    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:   6


PC     Object              I  Line    Source ..\..\..\..\..\Includes\misc_system_equates.asm
       00000A14            C     6    prose_return 		equ os_location + 14h
       00000A18            C     7    prose_relativize_hl	equ os_location + 18h
       00000A1C            C     8    prose_relative_call	equ os_location + 1ch
                           C     9    
       00000A20            C    10    prose_kernal 		equ os_location + 20h
                           C    11    
                           C    12    ;----------------------------------------------
                           C    13    
                           C    14    ; Add to sprite locations to position a 0,0 spr
                           C    15    
       0000009A            C    16    x_display_offset	equ 09ah
       00000025            C    17    y_display_offset	equ 025h
                           C    18    
                           C    19    ;----------------------------------------------
                           B    14    
                           B    15    
                           B    16    ;----------------------------------------------
                           B    17    ; Standard PROSE executable header
                           B    18    ;----------------------------------------------
                           B    19    
                           B    20    
                           B    21    	IF ADL_mode = 0
                           B    22    		org load_location&0ffffh	; if Z80 mo
                           B    23    	ELSE
010000                     B    24    		org load_location			; otherwise
                           B    25    	ENDIF
                           B    26    	
                           B    27    		.assume ADL = 1				; All PROSE
                           B    28    
010000 18 0E               B    29    		jr skip_header				; $0 - Jump
010002 50524F              B    30    		db 'PRO'					; $2 - ASCI
010005 000001              B    31    mb_loc	dw24 load_location			; $5 - Desi
010008 000000              B    32    		dw24 0						; $8 - If >
01000B 3B00                B    33    		dw prose_version_req		; $B - If >
01000D 0000                B    34    		dw amoeba_version_req		; $D - If >
01000F 01                  B    35    		db ADL_mode					; $F - Z80 
                           B    36    
010010                     B    37    skip_header
                           B    38    	
                           B    39    	IF ADL_mode = 0 
                           B    40    		
                           B    41    mbase_offset equ load_location & 0ff0000h
                           B    42    
                           B    43    		ld a,load_location/65536	; Additiona
                           B    44    		ld MB,a						; Set MBASE
                           B    45    		jp.sis go_z80_mode			; switches 
                           B    46    
                           B    47    go_z80_mode
                           B    48    
                           B    49    		.assume ADL = 0
                           B    50    
                           B    51    	ENDIF
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:   7


PC     Object              I  Line    Source ..\..\..\..\..\Includes\PROSE_header.asm
                           B    52    	
                           B    53    ;----------------------------------------------
                           B    54    	
                           A    11    
                           A    12    ;----------------------------------------------
                           A    13    ; ADL-mode user program follows..
                           A    14    ;----------------------------------------------
                           A    15    
010010 E5                  A    16    			push hl
010011 3E04                A    17    			ld a,kr_get_volume_info		;store 
010013 5BCD200A 00         A    18    			call.lil prose_kernal
010018 32 4C 00 01         A    19    			ld (orig_volume),a
01001C 3E1A                A    20    			ld a,kr_get_dir_cluster
01001E 5BCD200A 00         A    21    			call.lil prose_kernal
010023 ED53 4D 00 01       A    22    			ld (orig_dir_cluster),de
010028 E1                  A    23     			pop hl
                           A    24    			
010029 CD 50 00 01         A    25    			call my_prog
                           A    26    			
01002D F5                  A    27    			push af						;restor
01002E 3A 4C 00 01         A    28    			ld a,(orig_volume)
010032 5F                  A    29    			ld e,a
010033 3E03                A    30    			ld a,kr_change_volume
010035 5BCD200A 00         A    31    			call.lil prose_kernal
01003A ED5B 4D 00 01       A    32    			ld de,(orig_dir_cluster)
01003F 3E1B                A    33    			ld a,kr_set_dir_cluster
010041 5BCD200A 00         A    34    			call.lil prose_kernal
010046 F1                  A    35    			pop af
010047 5BC3140A 00         A    36    			jp.lil prose_return
                           A    37    
                           A    38    
01004C 00                  A    39    orig_volume			db 0
01004D 000000              A    40    orig_dir_cluster	dw24 0
                           A    41    
                           A    42    ;----------------------------------------------
                           A    43    					
010050 7E                  A    44    my_prog		ld a,(hl)						; g
010051 B7                  A    45    			or a
010052 CA F3 00 01         A    46    			jr z,no_args
                           A    47    		
010056 1E00                A    48    			ld e,0
010058 3E55                A    49    			ld a,kr_parse_path
01005A 5BCD200A 00         A    50    			call.lil prose_kernal
                           A    51    
01005F 3E0B                A    52    			ld a,kr_find_file				; l
010061 5BCD200A 00         A    53    			call.lil prose_kernal
010066 C2 FD 00 01         A    54    			jr nz,load_error
01006A ED53 93 01 01       A    55    			ld (pt_mod_length),de			; n
                           A    56    			
01006F 21 2C 01 01         A    57    			ld hl,loading_txt					010073 CD 1C 01 01         A    58    			call print_string
                           A    59    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:   8


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\ez80p\Code\PROSEB~1\Phil\EXTERN~1\PLAY_T~1\src\pt_play.asm
010077 21 82 1A 01         A    60    			ld hl,music_module
01007B 3E0E                A    61    			ld a,kr_read_file
01007D 5BCD200A 00         A    62    			call.lil prose_kernal
010082 20 79               A    63    			jr nz,load_error
                           A    64    			
010084 AF                  A    65    			xor a
010085 32 73 11 01         A    66    			ld (relocated_samples),a
010089 CD A3 01 01         A    67    			call init_tracker				; i
                           A    68    			
01008D 21 82 1A 01         A    69    			ld hl,music_module			
010091 ED4B 93 01 01       A    70    			ld bc,(pt_mod_length)
010096 09                  A    71    			add hl,bc						; h
010097 AF                  A    72    			xor a
010098 ED4B 70 11 01       A    73    			ld bc,(sample_base)
01009D ED42                A    74    			sbc hl,bc						; s
01009F E5                  A    75    			push hl
0100A0 C1                  A    76    			pop bc							; b
0100A1 2A 70 11 01         A    77    			ld hl,(sample_base)
0100A5 110000C0            A    78    			ld de,vram_b_addr
0100A9 EDB0                A    79    			ldir							; c
                           A    80    			
0100AB 3E01                A    81    			ld a,1							; i
0100AD 32 73 11 01         A    82    			ld (relocated_samples),a
0100B1 21000000            A    83    			ld hl,0							; o
0100B5 22 70 11 01         A    84    			ld (sample_base),hl
0100B9 CD A3 01 01         A    85    			call init_tracker
                           A    86    					
0100BD 21 49 01 01         A    87    			ld hl,playing_txt					0100C1 CD 1C 01 01         A    88    			call print_string
                           A    89    						
                           A    90    ;----------------------------------------------
                           A    91    
0100C5 118F0200            A    92    			ld de,655							0100C9 7B                  A    93    			ld a,e							
0100CA ED3981              A    94    			out0 (TMR0_RR_L),a					0100CD 7A                  A    95    			ld a,d
0100CE ED3982              A    96    			out0 (TMR0_RR_H),a					0100D1 3E13                A    97    			ld a,00010011b						0100D3 ED3980              A    98    			out0 (TMR0_CTL),a					                           A    99    
0100D6 ED3880              A   100    wait_50hz	in0 a,(TMR0_CTL)					0100D9 CB7F                A   101    			bit 7,a
0100DB C4 07 01 01         A   102    			call nz,do_tracker_update			                           A   103    		
0100DF 3E1E                A   104    			ld a,kr_get_key						0100E1 5BCD200A 00         A   105    			call.lil prose_kernal
0100E6 FE76                A   106    			cp 076h
0100E8 20 EC               A   107    			jr nz,wait_50hz
                           A   108    
0100EA 3E00                A   109    endit		ld a,0
0100EC 5B320314 FF         A   110    			ld.lil (hw_audio_registers+3),a		0100F1 AF                  A   111    			xor a
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:   9


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\ez80p\Code\PROSEB~1\Phil\EXTERN~1\PLAY_T~1\src\pt_play.asm
0100F2 C9                  A   112    			ret			
                           A   113    
                           A   114    ;----------------------------------------------
                           A   115    
0100F3 21 67 01 01         A   116    no_args		ld hl,no_args_txt
0100F7 CD 1C 01 01         A   117    			call print_string
0100FB 18 ED               A   118    			jr endit
                           A   119    
0100FD 21 83 01 01         A   120    load_error	ld hl,fnf_txt
010101 CD 1C 01 01         A   121    			call print_string
010105 18 E3               A   122    			jr endit
                           A   123    
                           A   124    ;----------------------------------------------
                           A   125    
                           A   126    
010107                     A   127    do_tracker_update
                           A   128    
                           A   129    ; call this routine every 50 Hz
                           A   130    
010107 3E08                A   131    			ld a,08h							010109 320100FF            A   132    			ld (hw_palette+1),a					                           A   133    			
01010D CD 26 02 01         A   134    			call play_tracker					                           A   135    			
010111 3E00                A   136    			ld a,00h							010113 320100FF            A   137    			ld (hw_palette+1),a					                           A   138    			
010117 CD 73 12 01         A   139    			call update_audio_hardware			01011B C9                  A   140    			ret
                           A   141    			
                           A   142    ;----------------------------------------------
                           A   143    
01011C                     A   144    print_string
                           A   145    
01011C 3E25                A   146    			ld a,kr_print_string			 
01011E 5BCD200A 00         A   147    			call.lil prose_kernal			 
010123 C9                  A   148    			ret
                           A   149    
                           A   150    
010124 3E1D                A   151    waitkey		ld a,kr_wait_key
010126 5BCD200A 00         A   152    			call.lil prose_kernal
01012B C9                  A   153    			ret
                           A   154    
                           A   155    
                           A   156    ;----------------------------------------------
                           A   157    		
01012C 4C6F6164 696E6720   A   158    loading_txt		db 'Loading Protracker module..
010134 50726F74 7261636B 
01013C 6572206D 6F64756C 
010144 652E2E20 00 
010149 506C6179 696E6721   A   159    playing_txt		db 'Playing! Press ESC to quit.
010151 20507265 73732045 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  10


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\ez80p\Code\PROSEB~1\Phil\EXTERN~1\PLAY_T~1\src\pt_play.asm
010159 53432074 6F207175 
010161 69742E2E 0B00 
                           A   160    
010167 55736167 65205054   A   161    no_args_txt		db 'Usage PTPLAY [module name]'
01016F 504C4159 205B6D6F 
010177 64756C65 206E616D 
01017F 655D0B00 
                           A   162    
010183 46696C65 206E6F74   A   163    fnf_txt			db 'File not found',11,0
01018B 20666F75 6E640B00 
                           A   164    
010193 000000              A   165    pt_mod_length	dw24 0
                           A   166    
010196 696E7465 72666572   A   167    test_fn			db 'interfer.mod',0
01019E 2E6D6F64 00 
                           A   168    
                           A   169    ;----------------------------------------------
                           A   170    		
                           B     0    			include "routines/ADL_mode_Protrack
                           B     1    ;----------------------------------------------
                           B     2    ; ADL mode eZ80 Protracker Music Player - V1.01
                           B     3    ; http://www.retroleum.co.uk
                           B     4    ;
                           B     5    ; SYNTAX ZDSII STANDARD.. STILL NOT OPTIMIZED A
                           B     6    ;
                           B     7    ; Revisions:
                           B     8    ; ----------
                           B     9    ;
                           B    10    ; V1.01 Arpeggio fix 
                           B    11    ; V1.00 First version of ADL-mode player
                           B    12    ; 
                           B    13    ; Known issues:
                           B    14    ; -------------
                           B    15    ; $EF - invert loop is not implemented (rarely 
                           B    16    ;
                           B    17    ;----------------------------------------------
                           B    18    ;
                           B    19    ; ADL mode eZ80 Code to play standard 31 instru
                           B    20    ;
                           B    21    ; The code has been designed so that is hardwar
                           B    22    ; does not write to any hardware registers. It 
                           B    23    ; below) for the Amiga hardware registers which
                           B    24    ; to drive whatever is the output hardware.
                           B    25    ;
                           B    26    ; Equates (must be defined in external code)
                           B    27    ; -------
                           B    28    ; "music_module" = location of protracker modul
                           B    29    ; The music module must be located at a word ad
                           B    30    ;
                           B    31    ; Routines:
                           B    32    ; ---------
                           B    33    ; call "init_tracker" to initialize/reset tune
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  11


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B    34    ; call "play_tracker" every 50th of a second to
                           B    35    ; call your conversion routine after this.)
                           B    36    ;
                           B    37    ; Variables:
                           B    38    ; ----------
                           B    39    ; "relocated_samples" (byte) - if set to 1, the
                           B    40    ; by the "init_tracker" routine and will remain
                           B    41    ; the sample data to be seperated from the modu
                           B    42    ; audio RAM.
                           B    43    ;
                           B    44    ; Replacing the Amiga hardware registers is a b
                           B    45    ; These begin at "channel_data". There are 38 b
                           B    46    ; within each block are:
                           B    47    ;
                           B    48    ; "sample_location" (24 bit address)	
                           B    49    ; "sample_length" (24 bit value in bytes, NOT W
                           B    50    ;
                           B    51    ; "sample_loop_location" (24 bit address)		                           B    52    ; "sample_loop_length" (24 bit value in bytes, 
                           B    53    ;
                           B    54    ; "period_lo" (forms a 16 bit word with period_
                           B    55    ; "period_hi" (see above)
                           B    56    ;
                           B    57    ; "volume" (8 bit - values: 0 to 64, same as Am
                           B    58    ;
                           B    59    ; "control_bits" (8 bit)
                           B    60    ; When bit 0 of each channel's control_bits var
                           B    61    ; routine should trigger a sample (ie: reload s
                           B    62    ; The conversion routine should clear bit 0 of 
                           B    63    ;
                           B    64    ; "filter_on_off" (BYTE) reads ONE if player ha
                           B    65    ; zero if not. (Whether or not this is of any u
                           B    66    
                           B    67    ;==============================================
                           B    68    ; Start of hardware-agnostic specific eZ80 Prot
                           B    69    ;==============================================
                           B    70    
                           B    71    .assume ADL = 1
                           B    72    
0101A3                     B    73    init_tracker
                           B    74    
0101A3 3E06                B    75    				ld a,6							0101A5 32 D4 11 01         B    76    				ld (songspeed),a
0101A9 AF                  B    77    				xor a							0101AA 32 D1 11 01         B    78    				ld (ticker),a
0101AE 32 D2 11 01         B    79    				ld (songpos),a
0101B2 32 D3 11 01         B    80    				ld (patindex),a
0101B6 32 D5 11 01         B    81    				ld (arpeggio_counter),a
0101BA 32 D6 11 01         B    82    				ld (pattloop_pos),a
0101BE 32 D7 11 01         B    83    				ld (pattloop_count),a
0101C2 32 D8 11 01         B    84    				ld (pattdelay_count),a	
0101C6 32 D9 11 01         B    85    				ld (pattdelay_flag),a	
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  12


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
0101CA 21 DB 11 01         B    86    				ld hl,channel_data
0101CE 06 98               B    87    				ld b,vars_per_channel*4
0101D0 77                  B    88    clchdlp			ld (hl),a
0101D1 23                  B    89    				inc hl
0101D2 10 FC               B    90    				djnz clchdlp
                           B    91    
0101D4 2A 70 11 01         B    92    				ld hl,(sample_base)
0101D8 3A 73 11 01         B    93    				ld a,(relocated_samples)
0101DC B7                  B    94    				or a
0101DD 20 21               B    95    				jr nz,use_reloc_sb
                           B    96    				
0101DF 21 3A 1E 01         B    97    				ld hl,music_module+952			0101E3 0680                B    98    				ld b,128						0101E5 0E00                B    99    				ld c,0
0101E7 7E                  B   100    ptfhplp			ld a,(hl)	
0101E8 B9                  B   101    				cp c
0101E9 38 01               B   102    				jr c,patlower
0101EB 4F                  B   103    				ld c,a
0101EC 23                  B   104    patlower		inc hl
0101ED 10 F8               B   105    				djnz ptfhplp
0101EF 0C                  B   106    				inc c
0101F0 21000000            B   107    				ld hl,0
0101F4 61                  B   108    				ld h,c
0101F5 29                  B   109    				add hl,hl
0101F6 29                  B   110    				add hl,hl						0101F7 01 BE 1E 01         B   111    				ld bc,music_module+1084			0101FB 09                  B   112    				add hl,bc						0101FC 22 70 11 01         B   113    				ld (sample_base),hl
                           B   114    
010200 DD21 74 11 01       B   115    use_reloc_sb	ld ix,sample_location_list		010205 FD21 AC 1A 01       B   116    				ld iy,music_module+42
01020A 061F                B   117    				ld b,31
01020C DD2F00              B   118    bsstlp			ld (ix),hl						01020F 11000000            B   119    				ld de,0							010213 FD5600              B   120    				ld d,(iy)
010216 FD5E01              B   121    				ld e,(iy+1)
010219 EB                  B   122    				ex de,hl
01021A 29                  B   123    				add hl,hl						01021B EB                  B   124    				ex de,hl
01021C 19                  B   125    				add hl,de				
01021D ED3203              B   126    				lea ix,ix+3		
010220 ED331E              B   127    				lea iy,iy+30					010223 10 E7               B   128    				djnz bsstlp
010225 C9                  B   129    				ret
                           B   130    
                           B   131    ;----------------------------------------------
                           B   132    
010226                     B   133    play_tracker
                           B   134    
010226 3A D1 11 01         B   135    				ld a,(ticker)
01022A B7                  B   136    				or a			
01022B C2 E4 03 01         B   137    				jp nz,not_new_line
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  13


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B   138    
01022F 3A D2 11 01         B   139    				ld a,(songpos)					010233 01000000            B   140    				ld bc,0
010237 4F                  B   141    				ld c,a
010238 21 3A 1E 01         B   142    				ld hl,music_module+952			01023C 09                  B   143    				add hl,bc						01023D 46                  B   144    				ld b,(hl)			
01023E 0E00                B   145    				ld c,0
010240 CB20                B   146    				sla b
010242 CB20                B   147    				sla b							                           B   148    				
010244 3A D3 11 01         B   149    				ld a,(patindex)					010248 21001000            B   150    				ld hl,1000h						01024C 6F                  B   151    				ld l,a
01024D ED6C                B   152    				mlt hl							01024F 09                  B   153    				add hl,bc						010250 EB                  B   154    				ex de,hl						                           B   155    				
010251 FD21 DB 11 01       B   156    				ld iy,channel_data	
010256 DD21 BE 1E 01       B   157    				ld ix,music_module+1084			01025B DD19                B   158    				add ix,de						01025D 0604                B   159    				ld b,4							01025F C5                  B   160    chan_loop		push bc
010260 DD7E00              B   161    				ld a,(ix)						010263 DDB601              B   162    				or (ix+1)
010266 DDB602              B   163    				or (ix+2)
010269 DDB603              B   164    				or (ix+3)
01026C 20 06               B   165    				jr nz,parse_dat
01026E FD36 04 FF          B   166    				ld (iy+fx_number),0ffh			010272 18 04               B   167    				jr skipchan	
010274 CD 85 02 01         B   168    parse_dat		call new_note_data	
010278 ED33 26             B   169    skipchan		lea iy,iy+vars_per_channel		01027B ED3204              B   170    				lea ix,ix+4						01027E C1                  B   171    				pop bc
01027F 10 DE               B   172    				djnz chan_loop
010281 C3 F6 03 01         B   173    				jp tick_advance
                           B   174    
                           B   175    
                           B   176    ;----- New note routines ----------------------
                           B   177    
010285                     B   178    new_note_data
                           B   179    				
010285 FD36 12 00          B   180    				ld (iy+instrument_waiting),0
010289 DD7E00              B   181    				ld a,(ix)						01028C E6F0                B   182    				and 0f0h
01028E DD4602              B   183    				ld b,(ix+2)
010291 CB38                B   184    				srl b
010293 CB38                B   185    				srl b
010295 CB38                B   186    				srl b
010297 CB38                B   187    				srl b
010299 B0                  B   188    				or b			
01029A 28 55               B   189    				jr z,no_new_instrument			Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  14


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B   190    
01029C FD77 12             B   191    				ld (iy+instrument_waiting),a
01029F 3D                  B   192    				dec a
0102A0 21 74 11 01         B   193    				ld hl,sample_location_list		0102A4 01030000            B   194    				ld bc,3
0102A8 47                  B   195    				ld b,a
0102A9 ED4C                B   196    				mlt bc
0102AB 09                  B   197    				add hl,bc						0102AC ED07                B   198    				ld bc,(hl)
0102AE FD0F 17             B   199    				ld (iy+sample_location),bc		                           B   200    			
0102B1 011E0000            B   201    				ld bc,30						0102B5 47                  B   202    				ld b,a
0102B6 ED4C                B   203    				mlt bc
0102B8 21 AC 1A 01         B   204    				ld hl,music_module+42	
0102BC 09                  B   205    				add hl,bc						0102BD 11000000            B   206    				ld de,0
0102C1 56                  B   207    				ld d,(hl)
0102C2 23                  B   208    				inc hl
0102C3 5E                  B   209    				ld e,(hl)
0102C4 23                  B   210    				inc hl
0102C5 EB                  B   211    				ex de,hl
0102C6 29                  B   212    				add hl,hl
0102C7 EB                  B   213    				ex de,hl
0102C8 FD1F 1A             B   214    				ld (iy+sample_length),de		                           B   215    								
0102CB 7E                  B   216    				ld a,(hl)			
0102CC E60F                B   217    				and 0fh
0102CE FD77 14             B   218    				ld (iy+finetune),a				0102D1 23                  B   219    				inc hl
0102D2 7E                  B   220    				ld a,(hl)
0102D3 FD77 13             B   221    				ld (iy+volume_waiting),a		0102D6 23                  B   222    				inc hl
0102D7 46                  B   223    				ld b,(hl)						0102D8 23                  B   224    				inc hl
0102D9 4E                  B   225    				ld c,(hl)						0102DA 23                  B   226    				inc hl
0102DB E5                  B   227    				push hl
0102DC FD27 17             B   228    				ld hl,(iy+sample_location)
0102DF 09                  B   229    				add hl,bc						0102E0 09                  B   230    				add hl,bc						0102E1 FD2F 1D             B   231    				ld (iy+sample_loop_location),hl
0102E4 E1                  B   232    				pop hl	
0102E5 11000000            B   233    				ld de,0
0102E9 56                  B   234    				ld d,(hl)						0102EA 23                  B   235    				inc hl
0102EB 5E                  B   236    				ld e,(hl)						0102EC EB                  B   237    				ex de,hl
0102ED 29                  B   238    				add hl,hl
0102EE FD2F 20             B   239    				ld (iy+sample_loop_length),hl	                           B   240    								
                           B   241    				
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  15


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B   242    				
0102F1                     B   243    no_new_instrument	
                           B   244    
0102F1 DD7E00              B   245    				ld a,(ix)						0102F4 E60F                B   246    				and 0fh
0102F6 47                  B   247    				ld b,a
0102F7 DD4E01              B   248    				ld c,(ix+1)						                           B   249    					
0102FA DD7E03              B   250    				ld a,(ix+3)						0102FD FD77 05             B   251    				ld (iy+fx_args),a				010300 DD7E02              B   252    				ld a,(ix+2)						010303 E60F                B   253    				and 0fh							010305 FD77 04             B   254    				ld (iy+fx_number),a
                           B   255    
010308 FE03                B   256    				cp 3							01030A CA 98 03 01         B   257    				jp z,set_portadest				01030E FE05                B   258    				cp 5 			
010310 CA 98 03 01         B   259    				jr z,set_portadest
                           B   260    
010314 FE0E                B   261    				cp 0eh							010316 20 11               B   262    				jr nz,no_ftoveride
010318 FD7E 05             B   263    				ld a,(iy+fx_args)
01031B E6F0                B   264    				and 0f0h
01031D FE50                B   265    				cp 050h
01031F 20 08               B   266    				jr nz,no_ftoveride
010321 FD7E 05             B   267    				ld a,(iy+fx_args)
010324 E60F                B   268    				and 0fh
010326 FD77 14             B   269    				ld (iy+finetune),a				                           B   270    
010329                     B   271    no_ftoveride
                           B   272    
010329 FDCB 0F 9E          B   273    				res 3,(iy+control_bits)			01032D 78                  B   274    				ld a,b							01032E B1                  B   275    				or c							01032F 28 16               B   276    				jr z,nonewp1
                           B   277    
010331 FDCB 0F DE          B   278    				set 3,(iy+control_bits)			010335 C5                  B   279    				push bc
010336 FD71 15             B   280    				ld (iy+arp_base_period_lo),c	010339 FD70 16             B   281    				ld (iy+arp_base_period_hi),b	01033C CD C1 03 01         B   282    				call finetune_bc_period
010340 FD71 06             B   283    				ld (iy+period_for_fx_lo),c		010343 FD70 07             B   284    				ld (iy+period_for_fx_hi),b
010346 C1                  B   285    				pop bc
                           B   286    				
010347 FD7E 04             B   287    nonewp1			ld a,(iy+fx_number)
01034A FE0E                B   288    				cp 0eh							01034C 20 0B               B   289    				jr nz,not_ed		 
01034E FD7E 05             B   290    				ld a,(iy+fx_args)
010351 E6F0                B   291    				and 0f0h
010353 FED0                B   292    				cp 0d0h
010355 CA 87 04 01         B   293    				jp z,check_more_fx
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  16


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B   294    				
010359 78                  B   295    not_ed			ld a,b							01035A B1                  B   296    				or c			
01035B 28 1A               B   297    				jr z,nonewp2
01035D FD4E 06             B   298    				ld c,(iy+period_for_fx_lo)		010360 FD46 07             B   299    				ld b,(iy+period_for_fx_hi)
010363 FD71 01             B   300    				ld (iy+period_lo),c
010366 FD70 02             B   301    				ld (iy+period_hi),b
010369 FDCB 0F C6          B   302    				set 0,(iy+control_bits)			01036D FD7E 12             B   303    				ld a,(iy+instrument_waiting)	010370 B7                  B   304    				or a
010371 CA 87 04 01         B   305    				jp z,check_more_fx
010375 18 11               B   306    				jr do_vol						                           B   307    				
010377 FD7E 12             B   308    nonewp2			ld a,(iy+instrument_waiting)	01037A B7                  B   309    				or a							01037B CA 87 04 01         B   310    				jp z,check_more_fx
01037F FDBE 00             B   311    				cp (iy+instrument)			
010382 28 04               B   312    				jr z,do_vol
010384 FDCB 0F C6          B   313    				set 0,(iy+control_bits)
                           B   314    
010388 FD77 00             B   315    do_vol			ld (iy+instrument),a
01038B FD7E 13             B   316    				ld a,(iy+volume_waiting)		01038E FD77 03             B   317    				ld (iy+volume),a	
010391 FD77 08             B   318    				ld (iy+volume_for_fx),a			010394 C3 87 04 01         B   319    				jp check_more_fx
                           B   320    				
                           B   321    
010398                     B   322    set_portadest
                           B   323    
010398 78                  B   324    				ld a,b							010399 B1                  B   325    				or c			
01039A 28 0A               B   326    				jr z,spd_same			
01039C CD C1 03 01         B   327    				call finetune_bc_period
0103A0 FD71 10             B   328    				ld (iy+portamento_dest_lo),c	0103A3 FD70 11             B   329    				ld (iy+portamento_dest_hi),b
                           B   330    				
0103A6 FD7E 12             B   331    spd_same		ld a,(iy+instrument_waiting)	0103A9 B7                  B   332    				or a			
0103AA C8                  B   333    				ret z
0103AB FDBE 00             B   334    				cp (iy+instrument)				0103AE 28 07               B   335    				jr z,skiptrig
0103B0 FDCB 0F C6          B   336    				set 0,(iy+control_bits)			0103B4 FD77 00             B   337    				ld (iy+instrument),a
0103B7 FD7E 13             B   338    skiptrig		ld a,(iy+volume_waiting)
0103BA FD77 03             B   339    				ld (iy+volume),a	
0103BD FD77 08             B   340    				ld (iy+volume_for_fx),a	
0103C0 C9                  B   341    				ret
                           B   342    				
                           B   343    
                           B   344    
0103C1                     B   345    finetune_bc_period
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  17


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B   346    
0103C1 FD7E 14             B   347    				ld a,(iy+finetune)				0103C4 B7                  B   348    				or a
0103C5 C8                  B   349    				ret z
                           B   350    
0103C6 21 D0 0C 01         B   351    				ld hl,period_table_p0			0103CA 11480000            B   352    				ld de,72
0103CE 57                  B   353    				ld d,a
0103CF ED5C                B   354    				mlt de
0103D1 19                  B   355    				add hl,de
0103D2 EB                  B   356    				ex de,hl						                           B   357    				
0103D3 21 6F 09 01         B   358    				ld hl,period_lookup_table-113
0103D7 09                  B   359    				add hl,bc
0103D8 7E                  B   360    				ld a,(hl)						0103D9 21000000            B   361    				ld hl,0
0103DD 6F                  B   362    				ld l,a
0103DE 29                  B   363    				add hl,hl						                           B   364    
0103DF 19                  B   365    				add hl,de						0103E0 4E                  B   366    				ld c,(hl)
0103E1 23                  B   367    				inc hl
0103E2 46                  B   368    				ld b,(hl)						0103E3 C9                  B   369    				ret
                           B   370    				
                           B   371    				
                           B   372    ;-------- "FX during line" routines -----------
                           B   373    
                           B   374    
0103E4                     B   375    not_new_line
                           B   376    
0103E4 FD21 DB 11 01       B   377    				ld iy,channel_data				0103E9 0604                B   378    				ld b,4							0103EB C5                  B   379    chanfxlp		push bc							0103EC CD 48 04 01         B   380    				call check_fx		
0103F0 ED33 26             B   381    				lea iy,iy+vars_per_channel
0103F3 C1                  B   382    				pop bc
0103F4 10 F5               B   383    				djnz chanfxlp
                           B   384    				
0103F6                     B   385    tick_advance
                           B   386    
0103F6 21 D5 11 01         B   387    				ld hl,arpeggio_counter			0103FA 34                  B   388    				inc (hl)
0103FB 7E                  B   389    				ld a,(hl)
0103FC FE03                B   390    				cp 3
0103FE 20 02               B   391    				jr nz,arp_ok
010400 3600                B   392    				ld (hl),0
010402 21 D1 11 01         B   393    arp_ok			ld hl,ticker					010406 34                  B   394    				inc (hl)
010407 3A D4 11 01         B   395    				ld a,(songspeed)	
01040B BE                  B   396    				cp (hl)							01040C 20 39               B   397    				jr nz,nspwrap
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  18


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
01040E AF                  B   398    				xor a
01040F 77                  B   399    				ld (hl),a						010410 32 D5 11 01         B   400    				ld (arpeggio_counter),a			010414 21 D8 11 01         B   401    				ld hl,pattdelay_count			010418 B6                  B   402    				or (hl)
010419 28 05               B   403    				jr z,nopatdel
01041B 35                  B   404    				dec (hl)						01041C C3 47 04 01         B   405    				jp nspwrap
010420 AF                  B   406    nopatdel		xor a
010421 32 D9 11 01         B   407    				ld (pattdelay_flag),a
010425 21 D3 11 01         B   408    				ld hl,patindex
010429 34                  B   409    				inc (hl)						01042A 7E                  B   410    				ld a,(hl)
01042B FE40                B   411    				cp 64							01042D 20 18               B   412    				jr nz,nspwrap
01042F AF                  B   413    				xor a
010430 77                  B   414    				ld (hl),a
010431 32 D6 11 01         B   415    				ld (pattloop_pos),a				010435 32 D7 11 01         B   416    				ld (pattloop_count),a			010439 21 D2 11 01         B   417    				ld hl,songpos		
01043D 34                  B   418    				inc (hl)						01043E 3A 38 1E 01         B   419    				ld a,(music_module+950)
010442 BE                  B   420    				cp (hl)							010443 20 02               B   421    				jr nz,nspwrap
010445 3600                B   422    				ld (hl),0
010447 C9                  B   423    nspwrap			ret
                           B   424    
                           B   425    
                           B   426    ;----------------------------------------------
                           B   427    				
010448 FD7E 04             B   428    check_fx		ld a,(iy+fx_number)	
01044B B7                  B   429    				or a							01044C CA AF 04 01         B   430    				jp z,fx_arpeggio				010450 FE01                B   431    				cp 1
010452 CA 01 05 01         B   432    				jp z,fx_portamento_up
010456 FE02                B   433    				cp 2
010458 CA 2B 05 01         B   434    				jp z,fx_portamento_down
01045C FE03                B   435    				cp 3
01045E CA 55 05 01         B   436    				jp z,fx_tone_portamento
010462 FE04                B   437    				cp 4
010464 CA 2F 06 01         B   438    				jp z,fx_vibrato
010468 FE05                B   439    				cp 5
01046A CA CB 06 01         B   440    				jp z,fx_tone_portamento_volslid
01046E FE06                B   441    				cp 6
010470 CA D3 06 01         B   442    				jp z,fx_vibrato_volslide
010474 FE07                B   443    				cp 7
010476 CA DB 06 01         B   444    				jp z,fx_tremolo
01047A FE0A                B   445    				cp 0ah
01047C CA A8 07 01         B   446    				jp z,fx_volslide
010480 FE0E                B   447    				cp 0eh
010482 CA 17 08 01         B   448    				jp z,fx_extended_fx
010486 C9                  B   449    				ret
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  19


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B   450    
                           B   451    
010487                     B   452    check_more_fx
                           B   453    
010487 FD7E 04             B   454    				ld a,(iy+fx_number)				01048A FE09                B   455    				cp 9
01048C CA 7A 07 01         B   456    				jp z,fx_sample_offset
010490 FE0B                B   457    				cp 0bh			
010492 CA CD 07 01         B   458    				jp z,fx_position_jump
010496 FE0D                B   459    				cp 0dh
010498 CA EB 07 01         B   460    				jp z,fx_pattern_break
01049C FE0E                B   461    				cp 0eh
01049E CA 17 08 01         B   462    				jp z,fx_extended_fx
0104A2 FE0F                B   463    				cp 0fh
0104A4 CA D8 09 01         B   464    				jp z,fx_set_speed
0104A8 FE0C                B   465    				cp 0ch
0104AA CA DB 07 01         B   466    				jp z,fx_set_volume
0104AE C9                  B   467    				ret
                           B   468    					
                           B   469    
                           B   470    ;------- FX $00 -------------------------------
                           B   471    
0104AF FD7E 05             B   472    fx_arpeggio		ld a,(iy+fx_args)				0104B2 B7                  B   473    				or a
0104B3 C8                  B   474    				ret z
0104B4 01000000            B   475    				ld bc,0
0104B8 FD4E 15             B   476    				ld c,(iy+arp_base_period_lo)	0104BB FD46 16             B   477    				ld b,(iy+arp_base_period_hi)
0104BE 3A D5 11 01         B   478    				ld a,(arpeggio_counter)	
0104C2 11000000            B   479    				ld de,0
0104C6 B7                  B   480    				or a	
0104C7 28 17               B   481    				jr z,doarp		
0104C9 FE02                B   482    				cp 2
0104CB 28 0D               B   483    				jr z,arptwo
0104CD FD5E 05             B   484    arpone			ld e,(iy+fx_args)
0104D0 CB3B                B   485    				srl e
0104D2 CB3B                B   486    				srl e
0104D4 CB3B                B   487    				srl e
0104D6 CB3B                B   488    				srl e							0104D8 18 06               B   489    				jr doarp
0104DA FD7E 05             B   490    arptwo			ld a,(iy+fx_args)
0104DD E60F                B   491    				and 15
0104DF 5F                  B   492    				ld e,a							                           B   493    
0104E0 21 6F 09 01         B   494    doarp			ld hl,period_lookup_table-113
0104E4 09                  B   495    				add hl,bc
0104E5 7E                  B   496    				ld a,(hl)						0104E6 83                  B   497    				add a,e							0104E7 CB27                B   498    				sla a							0104E9 21000000            B   499    				ld hl,0
0104ED 6F                  B   500    				ld l,a
0104EE 11 D0 0C 01         B   501    				ld de,period_table_p0
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  20


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
0104F2 19                  B   502    				add hl,de
0104F3 4E                  B   503    				ld c,(hl)
0104F4 23                  B   504    				inc hl
0104F5 46                  B   505    				ld b,(hl)
0104F6 CD C1 03 01         B   506    				call finetune_bc_period
0104FA FD71 01             B   507    				ld (iy+period_lo),c
0104FD FD70 02             B   508    				ld (iy+period_hi),b
010500 C9                  B   509    				ret
                           B   510    
                           B   511    
                           B   512    ;-------- FX $01 ------------------------------
                           B   513    
010501                     B   514    fx_portamento_up
                           B   515    
010501 0600                B   516    				ld b,0							010503 FD4E 05             B   517    				ld c,(iy+fx_args)				010506 FD6E 06             B   518    				ld l,(iy+period_for_fx_lo)
010509 FD66 07             B   519    				ld h,(iy+period_for_fx_hi)
01050C AF                  B   520    				xor a
01050D 40ED42              B   521    				sbc.sis hl,bc
010510 38 08               B   522    				jr c,portumin
010512 B4                  B   523    				or h
010513 20 09               B   524    				jr nz,portugnp
010515 7D                  B   525    				ld a,l
010516 FE71                B   526    				cp 113
010518 30 04               B   527    				jr nc,portugnp
01051A 21710000            B   528    portumin		ld hl,113
01051E FD75 06             B   529    portugnp		ld (iy+period_for_fx_lo),l
010521 FD74 07             B   530    				ld (iy+period_for_fx_hi),h
010524 FD75 01             B   531    				ld (iy+period_lo),l
010527 FD74 02             B   532    				ld (iy+period_hi),h
01052A C9                  B   533    				ret
                           B   534    
                           B   535    				
                           B   536    ;--------- FX $02 -----------------------------
                           B   537    
01052B                     B   538    fx_portamento_down			
                           B   539    
01052B 0600                B   540    				ld b,0							01052D FD4E 05             B   541    				ld c,(iy+fx_args)				010530 FD6E 06             B   542    				ld l,(iy+period_for_fx_lo)
010533 FD66 07             B   543    				ld h,(iy+period_for_fx_hi)
010536 4009                B   544    				add.sis hl,bc
010538 7C                  B   545    				ld a,h
010539 FE03                B   546    				cp 3
01053B 38 0B               B   547    				jr c,portdgnp
01053D 20 05               B   548    				jr nz,portdmax
01053F 7D                  B   549    				ld a,l
010540 FE8B                B   550    				cp 139
010542 38 04               B   551    				jr c,portdgnp
010544 21580300            B   552    portdmax		ld hl,856
010548 FD75 06             B   553    portdgnp		ld (iy+period_for_fx_lo),l
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  21


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
01054B FD74 07             B   554    				ld (iy+period_for_fx_hi),h
01054E FD75 01             B   555    				ld (iy+period_lo),l
010551 FD74 02             B   556    				ld (iy+period_hi),h
010554 C9                  B   557    				ret
                           B   558    
                           B   559    
                           B   560    ;--------- FX $03 -----------------------------
                           B   561    
010555                     B   562    fx_tone_portamento
                           B   563    
010555 FD4E 09             B   564    				ld c,(iy+portamento_rate)		010558 FD7E 05             B   565    				ld a,(iy+fx_args)
01055B B7                  B   566    				or a
01055C 28 0B               B   567    				jr z,uexistpr
01055E 4F                  B   568    				ld c,a
01055F FD7E 04             B   569    				ld a,(iy+fx_number)
010562 FE03                B   570    				cp 3							010564 20 03               B   571    				jr nz,uexistpr
010566 FD71 09             B   572    				ld (iy+portamento_rate),c	
010569 FD5E 10             B   573    uexistpr		ld e,(iy+portamento_dest_lo)	01056C FD56 11             B   574    				ld d,(iy+portamento_dest_hi)
01056F FD6E 06             B   575    				ld l,(iy+period_for_fx_lo)		010572 FD66 07             B   576    				ld h,(iy+period_for_fx_hi)
010575 AF                  B   577    				xor a
010576 40ED52              B   578    				sbc.sis hl,de					010579 C8                  B   579    				ret z							01057A 38 1E               B   580    				jr c,tp_peru					                           B   581    
01057C FD6E 06             B   582    tp_perd			ld l,(iy+period_for_fx_lo)		01057F FD66 07             B   583    				ld h,(iy+period_for_fx_hi)
010582 0600                B   584    				ld b,0
010584 AF                  B   585    				xor a
010585 40ED42              B   586    				sbc.sis hl,bc					010588 30 04               B   587    				jr nc,tp_dnw					01058A 21000000            B   588    				ld hl,0
01058E 4D                  B   589    tp_dnw			ld c,l							01058F 44                  B   590    				ld b,h
010590 AF                  B   591    				xor a
010591 40ED52              B   592    				sbc.sis hl,de					010594 30 1A               B   593    				jr nc,chk_gliss
010596 4B                  B   594    				ld c,e
010597 42                  B   595    				ld b,d
010598 18 1C               B   596    				jr tp_end						                           B   597    
01059A FD6E 06             B   598    tp_peru			ld l,(iy+period_for_fx_lo)		01059D FD66 07             B   599    				ld h,(iy+period_for_fx_hi)
0105A0 0600                B   600    				ld b,0
0105A2 4009                B   601    				add.sis hl,bc
0105A4 4D                  B   602    				ld c,l							0105A5 44                  B   603    				ld b,h
0105A6 AF                  B   604    				xor a
0105A7 40ED52              B   605    				sbc.sis hl,de		
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  22


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
0105AA 38 04               B   606    				jr c,chk_gliss
0105AC 4B                  B   607    				ld c,e							0105AD 42                  B   608    				ld b,d
0105AE 18 06               B   609    				jr tp_end	
                           B   610    
0105B0 FDCB 0F 4E          B   611    chk_gliss		bit 1,(iy+control_bits)			0105B4 20 0D               B   612    				jr nz,do_gliss		
                           B   613    				
0105B6 FD71 06             B   614    tp_end			ld (iy+period_for_fx_lo),c
0105B9 FD70 07             B   615    				ld (iy+period_for_fx_hi),b
0105BC FD71 01             B   616    				ld (iy+period_lo),c	
0105BF FD70 02             B   617    				ld (iy+period_hi),b
0105C2 C9                  B   618    				ret	
                           B   619    				
0105C3 FD71 06             B   620    do_gliss		ld (iy+period_for_fx_lo),c		0105C6 FD70 07             B   621    				ld (iy+period_for_fx_hi),b
0105C9 11480000            B   622    				ld de,72
0105CD FD56 14             B   623    				ld d,(iy+finetune)	
0105D0 ED5C                B   624    				mlt de
0105D2 21 D0 0C 01         B   625    				ld hl,period_table_p0	
0105D6 19                  B   626    				add hl,de						0105D7 EB                  B   627    				ex de,hl						                           B   628    
0105D8 DDE5                B   629    				push ix
0105DA D5                  B   630    				push de
0105DB DDE1                B   631    				pop ix
0105DD AF                  B   632    				xor a
0105DE 11000000            B   633    				ld de,0							0105E2 DD6E16              B   634    				ld l,(ix+22)					0105E5 DD6617              B   635    				ld h,(ix+23)
0105E8 40ED42              B   636    				sbc.sis hl,bc
0105EB 28 2F               B   637    				jr z,tp_glend
0105ED 38 15               B   638    				jr c,gltest
0105EF 11180000            B   639    				ld de,24
0105F3 DD6E2E              B   640    				ld l,(ix+46)
0105F6 DD662F              B   641    				ld h,(ix+47)
0105F9 40ED42              B   642    				sbc.sis hl,bc
0105FC 28 1E               B   643    				jr z,tp_glend
0105FE 38 04               B   644    				jr c,gltest
010600 11300000            B   645    				ld de,48
                           B   646    
010604 DD19                B   647    gltest			add ix,de
010606 50                  B   648    				ld d,b
010607 59                  B   649    				ld e,c
010608 AF                  B   650    				xor a
010609 060C                B   651    				ld b,12
01060B DD6E00              B   652    glissfper		ld l,(ix)						01060E DD6601              B   653    				ld h,(ix+1)
010611 40ED52              B   654    				sbc.sis hl,de
010614 30 0F               B   655    				jr nc,nggliss
010616 DD4E00              B   656    				ld c,(ix)
010619 DD4601              B   657    				ld b,(ix+1)
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  23


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
01061C FD71 01             B   658    tp_glend		ld (iy+period_lo),c	
01061F FD70 02             B   659    				ld (iy+period_hi),b
010622 DDE1                B   660    				pop ix
010624 C9                  B   661    				ret
                           B   662    
010625 DD23                B   663    nggliss			inc ix
010627 DD23                B   664    				inc ix
010629 10 E0               B   665    				djnz glissfper
01062B 42                  B   666    				ld b,d
01062C 4B                  B   667    				ld c,e
01062D 18 ED               B   668    				jr tp_glend
                           B   669    
                           B   670    
                           B   671    ;--------- FX $04 -----------------------------
                           B   672    
01062F FD46 0A             B   673    fx_vibrato		ld b,(iy+vibrato_args)			010632 FD7E 04             B   674    				ld a,(iy+fx_number)
010635 FE04                B   675    				cp 4
010637 20 1C               B   676    				jr nz,vibrsame					010639 FD7E 05             B   677    				ld a,(iy+fx_args)
01063C B7                  B   678    				or a
01063D 28 16               B   679    				jr z,vibrsame					01063F 4F                  B   680    				ld c,a
010640 E60F                B   681    				and 15
010642 28 06               B   682    				jr z,vibdsame					010644 57                  B   683    				ld d,a
010645 78                  B   684    				ld a,b
010646 E6F0                B   685    				and 0f0h
010648 B2                  B   686    				or d
010649 47                  B   687    				ld b,a							01064A 79                  B   688    vibdsame		ld a,c
01064B E6F0                B   689    				and 0f0h
01064D 28 06               B   690    				jr z,vibrsame					01064F 4F                  B   691    				ld c,a
010650 78                  B   692    				ld a,b
010651 E60F                B   693    				and 0fh
010653 B1                  B   694    				or c							010654 47                  B   695    				ld b,a			
010655 FD70 0A             B   696    vibrsame		ld (iy+vibrato_args),b			                           B   697    				
010658 FD4E 0B             B   698    				ld c,(iy+vibrato_pos)
01065B CB39                B   699    				srl c
01065D CB39                B   700    				srl c
01065F 79                  B   701    				ld a,c
010660 E61F                B   702    				and 1fh
010662 4F                  B   703    				ld c,a							010663 FD7E 0E             B   704    				ld a,(iy+wave_type)	
010666 E60F                B   705    				and 0fh
010668 B7                  B   706    				or a							010669 28 1D               B   707    				jr z,vib_sine					01066B CB21                B   708    				sla c		
01066D CB21                B   709    				sla c
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  24


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
01066F CB21                B   710    				sla c							010671 FE01                B   711    				cp 1
010673 28 04               B   712    				jr z,vib_ramp					010675 1EFF                B   713    				ld e,255			
010677 18 1A               B   714    				jr vib_gotd						                           B   715    
010679 FDCB 0B 7E          B   716    vib_ramp		bit 7,(iy+vibrato_pos)			01067D 28 06               B   717    				jr z,vibr2
01067F 3EFF                B   718    				ld a,255
010681 91                  B   719    				sub c
010682 5F                  B   720    				ld e,a
010683 18 0E               B   721    				jr vib_gotd
010685 59                  B   722    vibr2			ld e,c
010686 18 0B               B   723    				jr vib_gotd
                           B   724    
010688 21 50 11 01         B   725    vib_sine		ld hl,vibrato_table				01068C 11000000            B   726    				ld de,0
010690 59                  B   727    				ld e,c
010691 19                  B   728    				add hl,de
010692 5E                  B   729    				ld e,(hl)			
                           B   730    
010693 FD7E 0A             B   731    vib_gotd		ld a,(iy+vibrato_args)	
010696 E60F                B   732    				and 0fh			
010698 57                  B   733    				ld d,a							010699 ED5C                B   734    				mlt de							01069B CB23                B   735    				sla e							01069D CB12                B   736    				rl d
01069F 5A                  B   737    				ld e,d
0106A0 1600                B   738    				ld d,0
                           B   739    								
0106A2 FD6E 06             B   740    				ld l,(iy+period_for_fx_lo)		0106A5 FD66 07             B   741    				ld h,(iy+period_for_fx_hi)
0106A8 FDCB 0B 7E          B   742    				bit 7,(iy+vibrato_pos)
0106AC 20 03               B   743    				jr nz,vib_sub	
0106AE 19                  B   744    				add hl,de						0106AF 18 03               B   745    				jr vib_pdone
0106B1 AF                  B   746    vib_sub			xor a
0106B2 ED52                B   747    				sbc hl,de						0106B4 FD75 01             B   748    vib_pdone		ld (iy+period_lo),l
0106B7 FD74 02             B   749    				ld (iy+period_hi),h
                           B   750    
0106BA FD46 0B             B   751    				ld b,(iy+vibrato_pos)			0106BD FD7E 0A             B   752    				ld a,(iy+vibrato_args)
0106C0 CB3F                B   753    				srl a
0106C2 CB3F                B   754    				srl a
0106C4 E63C                B   755    				and 3ch							0106C6 80                  B   756    				add a,b
0106C7 FD77 0B             B   757    				ld (iy+vibrato_pos),a			0106CA C9                  B   758    				ret
                           B   759    
                           B   760    
                           B   761    ;-------- FX $05 ------------------------------
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  25


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B   762    				
0106CB                     B   763    fx_tone_portamento_volslide
                           B   764    
0106CB CD 55 05 01         B   765    				call fx_tone_portamento
0106CF C3 A8 07 01         B   766    				jp fx_volslide
                           B   767    
                           B   768    			
                           B   769    ;-------- FX $06 ------------------------------
                           B   770    				
0106D3                     B   771    fx_vibrato_volslide	
                           B   772    				
0106D3 CD 2F 06 01         B   773    				call fx_vibrato
0106D7 C3 A8 07 01         B   774    				jp fx_volslide
                           B   775    				
                           B   776    				
                           B   777    ;-------- FX $07 ------------------------------
                           B   778    
0106DB FD46 0C             B   779    fx_tremolo		ld b,(iy+tremolo_args)			0106DE FD7E 05             B   780    				ld a,(iy+fx_args)
0106E1 B7                  B   781    				or a
0106E2 28 16               B   782    				jr z,trersame					0106E4 4F                  B   783    				ld c,a
0106E5 E60F                B   784    				and 15
0106E7 28 06               B   785    				jr z,tredsame					0106E9 57                  B   786    				ld d,a
0106EA 78                  B   787    				ld a,b
0106EB E6F0                B   788    				and 0f0h
0106ED B2                  B   789    				or d
0106EE 47                  B   790    				ld b,a							0106EF 79                  B   791    tredsame		ld a,c
0106F0 E6F0                B   792    				and 0f0h
0106F2 28 06               B   793    				jr z,trersame					0106F4 4F                  B   794    				ld c,a
0106F5 78                  B   795    				ld a,b
0106F6 E60F                B   796    				and 0fh
0106F8 B1                  B   797    				or c							0106F9 47                  B   798    				ld b,a			
0106FA FD70 0C             B   799    trersame		ld (iy+tremolo_args),b			                           B   800    				
0106FD FD4E 0D             B   801    				ld c,(iy+tremolo_pos)
010700 CB39                B   802    				srl c
010702 CB39                B   803    				srl c
010704 79                  B   804    				ld a,c
010705 E61F                B   805    				and 1fh
010707 4F                  B   806    				ld c,a							010708 FD7E 0E             B   807    				ld a,(iy+wave_type)				01070B CB3F                B   808    				srl a
01070D CB3F                B   809    				srl a
01070F CB3F                B   810    				srl a
010711 CB3F                B   811    				srl a
010713 E60F                B   812    				and 0fh							010715 28 1D               B   813    				jr z,tre_sine					Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  26


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010717 CB21                B   814    				sla c		
010719 CB21                B   815    				sla c
01071B CB21                B   816    				sla c							01071D FE01                B   817    				cp 1
01071F 28 04               B   818    				jr z,tre_ramp					010721 1EFF                B   819    				ld e,255			
010723 18 1A               B   820    				jr tre_gotd						                           B   821    
010725 FDCB 0D 7E          B   822    tre_ramp		bit 7,(iy+tremolo_pos)			010729 28 06               B   823    				jr z,trer2
01072B 3EFF                B   824    				ld a,255
01072D 91                  B   825    				sub c
01072E 5F                  B   826    				ld e,a
01072F 18 0E               B   827    				jr tre_gotd
010731 59                  B   828    trer2			ld e,c
010732 18 0B               B   829    				jr tre_gotd
                           B   830    
010734 21 50 11 01         B   831    tre_sine		ld hl,vibrato_table				010738 11000000            B   832    				ld de,0
01073C 59                  B   833    				ld e,c
01073D 19                  B   834    				add hl,de
01073E 5E                  B   835    				ld e,(hl)
                           B   836    		
01073F FD7E 0C             B   837    tre_gotd		ld a,(iy+tremolo_args)	
010742 E60F                B   838    				and 0fh			
010744 57                  B   839    				ld d,a							010745 ED5C                B   840    				mlt de							010747 CB23                B   841    				sla e							010749 CB12                B   842    				rl d
01074B CB23                B   843    				sla e
01074D CB12                B   844    				rl d
01074F 5A                  B   845    				ld e,d
                           B   846    				
010750 FD7E 08             B   847    tshftl			ld a,(iy+volume_for_fx)			010753 FDCB 0D 7E          B   848    				bit 7,(iy+tremolo_pos)
010757 20 09               B   849    				jr nz,tre_sub	
010759 83                  B   850    				add a,e							01075A FE40                B   851    				cp 64
01075C 38 08               B   852    				jr c,tre_done
01075E 3E40                B   853    				ld a,64
010760 18 04               B   854    				jr tre_done
010762 93                  B   855    tre_sub			sub e							010763 30 01               B   856    				jr nc,tre_done
010765 AF                  B   857    				xor a
010766 FD77 03             B   858    tre_done		ld (iy+volume),a
                           B   859    				
010769 FD46 0D             B   860    				ld b,(iy+tremolo_pos)			01076C FD7E 0C             B   861    				ld a,(iy+tremolo_args)
01076F CB3F                B   862    				srl a
010771 CB3F                B   863    				srl a
010773 E63C                B   864    				and 3ch							010775 80                  B   865    				add a,b
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  27


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010776 FD77 0D             B   866    				ld (iy+tremolo_pos),a			010779 C9                  B   867    				ret
                           B   868    
                           B   869    ;-------- FX $09 ------------------------------
                           B   870    
01077A                     B   871    fx_sample_offset
                           B   872    
01077A FD7E 05             B   873    				ld a,(iy+fx_args)		
01077D B7                  B   874    				or a
01077E 28 08               B   875    				jr z,usexoffs					010780 01000000            B   876    				ld bc,0
010784 47                  B   877    				ld b,a
010785 FD0F 23             B   878    				ld (iy+sample_offset),bc		                           B   879    							
010788 FD07 23             B   880    usexoffs		ld bc,(iy+sample_offset)		01078B FD27 1A             B   881    				ld hl,(iy+sample_length)
01078E AF                  B   882    				xor a
01078F ED42                B   883    				sbc hl,bc
010791 28 0D               B   884    				jr z,soffbad
010793 38 0B               B   885    				jr c,soffbad
010795 FD2F 1A             B   886    				ld (iy+sample_length),hl		010798 FD27 17             B   887    				ld hl,(iy+sample_location)
01079B 09                  B   888    				add hl,bc
01079C FD2F 17             B   889    				ld (iy+sample_location),hl		01079F C9                  B   890    				ret
                           B   891    
0107A0 21020000            B   892    soffbad			ld hl,2
0107A4 FD2F 1A             B   893    				ld (iy+sample_length),hl		0107A7 C9                  B   894    				ret
                           B   895    				
                           B   896    
                           B   897    ;-------- FX $0A ------------------------------
                           B   898    
                           B   899    
0107A8 FD7E 05             B   900    fx_volslide		ld a,(iy+fx_args)				0107AB 47                  B   901    				ld b,a
0107AC E60F                B   902    				and 15			
0107AE 28 0B               B   903    				jr z,volup
0107B0 FD7E 03             B   904    				ld a,(iy+volume)
0107B3 90                  B   905    				sub b
0107B4 30 01               B   906    				jr nc,voldok
0107B6 AF                  B   907    				xor a
0107B7 FD77 03             B   908    voldok			ld (iy+volume),a
0107BA C9                  B   909    				ret
                           B   910    
0107BB 78                  B   911    volup			ld a,b							0107BC 0F                  B   912    				rrca
0107BD 0F                  B   913    				rrca
0107BE 0F                  B   914    				rrca
0107BF 0F                  B   915    				rrca
0107C0 FD86 03             B   916    				add a,(iy+volume)
0107C3 FE40                B   917    				cp 64
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  28


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
0107C5 38 02               B   918    				jr c,voluok
0107C7 3E40                B   919    				ld a,64
0107C9 FD77 03             B   920    voluok			ld (iy+volume),a
0107CC C9                  B   921    				ret
                           B   922    
                           B   923    
                           B   924    ;-------- FX $0B ------------------------------
                           B   925    
0107CD                     B   926    fx_position_jump
                           B   927    
0107CD FD7E 05             B   928    				ld a,(iy+fx_args)
0107D0 32 D2 11 01         B   929    				ld (songpos),a
0107D4 3EFF                B   930    				ld a,255
0107D6 32 D3 11 01         B   931    				ld (patindex),a
0107DA C9                  B   932    				ret
                           B   933    
                           B   934    
                           B   935    ;-------- FX $0C ------------------------------
                           B   936    
0107DB                     B   937    fx_set_volume
                           B   938    				
0107DB FD7E 05             B   939    				ld a,(iy+fx_args)
0107DE FE40                B   940    				cp 40h
0107E0 38 02               B   941    				jr c,vsetok
0107E2 3E40                B   942    				ld a,40h
0107E4 FD77 03             B   943    vsetok			ld (iy+volume),a
0107E7 FD77 13             B   944    				ld (iy+volume_waiting),a
0107EA C9                  B   945    				ret
                           B   946    
                           B   947    
                           B   948    ;-------- FX $0D ------------------------------
                           B   949    
0107EB                     B   950    fx_pattern_break
                           B   951    				
0107EB FD7E 05             B   952    				ld a,(iy+fx_args)
0107EE 47                  B   953    				ld b,a
0107EF CB3F                B   954    				srl a
0107F1 CB3F                B   955    				srl a
0107F3 CB3F                B   956    				srl a
0107F5 CB3F                B   957    				srl a
0107F7 4F                  B   958    				ld c,a
0107F8 81                  B   959    				add a,c
0107F9 81                  B   960    				add a,c
0107FA 81                  B   961    				add a,c
0107FB 81                  B   962    				add a,c
0107FC CB27                B   963    				sla a
0107FE 4F                  B   964    				ld c,a
0107FF 78                  B   965    				ld a,b
010800 E60F                B   966    				and 0fh
010802 81                  B   967    				add a,c
010803 3D                  B   968    				dec a
010804 32 D3 11 01         B   969    				ld (patindex),a
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  29


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010808 21 D2 11 01         B   970    				ld hl,songpos
01080C 34                  B   971    				inc (hl)
01080D 3A 38 1E 01         B   972    				ld a,(music_module+950)
010811 BE                  B   973    				cp (hl)							010812 20 02               B   974    				jr nz,nspw_pb
010814 3600                B   975    				ld (hl),0
010816 C9                  B   976    nspw_pb			ret
                           B   977    
                           B   978    				
                           B   979    ;-------- FX $0E ------------------------------
                           B   980    
                           B   981    
010817                     B   982    fx_extended_fx
                           B   983    
010817 FD7E 05             B   984    				ld a,(iy+fx_args)
01081A 47                  B   985    				ld b,a
01081B E6F0                B   986    				and 0f0h
01081D FE00                B   987    				cp 0h
01081F 28 4B               B   988    				jr z,e0_filter
010821 FE10                B   989    				cp 10h
010823 28 4F               B   990    				jr z,e1_fineport_up
010825 FE20                B   991    				cp 20h
010827 28 78               B   992    				jr z,e2_fineport_down
010829 FE30                B   993    				cp 30h
01082B CA CD 08 01         B   994    				jp z,e3_glissando_control
01082F FE40                B   995    				cp 40h
010831 CA DA 08 01         B   996    				jp z,e4_vibrato_control
010835 FE50                B   997    				cp 50h
010837 CA E8 08 01         B   998    				jp z,e5_finetune_control
01083B FE60                B   999    				cp 60h
01083D CA EF 08 01         B  1000    				jp z,e6_pattern_loop
010841 FE70                B  1001    				cp 70h
010843 CA 1B 09 01         B  1002    				jp z,e7_tremolo_control
010847 FE90                B  1003    				cp 90h
010849 CA 31 09 01         B  1004    				jp z,e9_retrigger_note
01084D FEA0                B  1005    				cp 0a0h
01084F CA 48 09 01         B  1006    				jp z,ea_finevol_up
010853 FEB0                B  1007    				cp 0b0h
010855 CA 5E 09 01         B  1008    				jp z,eb_finevol_down
010859 FEC0                B  1009    				cp 0c0h
01085B CA 73 09 01         B  1010    				jp z,ec_cutnote
01085F FED0                B  1011    				cp 0d0h
010861 CA 82 09 01         B  1012    				jp z,ed_delayedtrig
010865 FEE0                B  1013    				cp 0e0h
010867 CA C4 09 01         B  1014    				jp z,ee_pattdelay
01086B C9                  B  1015    				ret
                           B  1016    
01086C                     B  1017    e0_filter
                           B  1018    
01086C 78                  B  1019    				ld a,b							01086D E601                B  1020    				and 01h			
01086F 32 DA 11 01         B  1021    				ld (filter_on_off),a
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  30


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010873 C9                  B  1022    				ret
                           B  1023    				
                           B  1024    
010874                     B  1025    e1_fineport_up
                           B  1026    
010874 3A D1 11 01         B  1027    				ld a,(ticker)
010878 B7                  B  1028    				or a
010879 C0                  B  1029    				ret nz
01087A 0600                B  1030    				ld b,0							01087C FD7E 05             B  1031    				ld a,(iy+fx_args)		
01087F E60F                B  1032    				and 0fh
010881 4F                  B  1033    				ld c,a
010882 FD6E 01             B  1034    				ld l,(iy+period_lo)
010885 FD66 02             B  1035    				ld h,(iy+period_hi)
010888 AF                  B  1036    				xor a
010889 40ED42              B  1037    				sbc.sis hl,bc
01088C 38 08               B  1038    				jr c,fportumin
01088E B4                  B  1039    				or h
01088F 20 09               B  1040    				jr nz,fportugnp
010891 7D                  B  1041    				ld a,l
010892 FE71                B  1042    				cp 113
010894 30 04               B  1043    				jr nc,fportugnp
010896 21710000            B  1044    fportumin		ld hl,113						01089A FD75 01             B  1045    fportugnp		ld (iy+period_lo),l
01089D FD74 02             B  1046    				ld (iy+period_hi),h
0108A0 C9                  B  1047    				ret
                           B  1048    
                           B  1049    
0108A1                     B  1050    e2_fineport_down
                           B  1051    				
0108A1 3A D1 11 01         B  1052    				ld a,(ticker)
0108A5 B7                  B  1053    				or a
0108A6 C0                  B  1054    				ret nz
0108A7 0600                B  1055    				ld b,0							0108A9 FD7E 05             B  1056    				ld a,(iy+fx_args)		
0108AC E60F                B  1057    				and 0fh
0108AE 4F                  B  1058    				ld c,a
0108AF FD6E 01             B  1059    				ld l,(iy+period_lo)
0108B2 FD66 02             B  1060    				ld h,(iy+period_hi)
0108B5 09                  B  1061    				add hl,bc
0108B6 7C                  B  1062    				ld a,h
0108B7 FE03                B  1063    				cp 3
0108B9 38 0B               B  1064    				jr c,fportdgnp
0108BB 20 05               B  1065    				jr nz,fportdmax
0108BD 7D                  B  1066    				ld a,l
0108BE FE58                B  1067    				cp 88
0108C0 38 04               B  1068    				jr c,fportdgnp
0108C2 21580300            B  1069    fportdmax		ld hl,856						0108C6 FD75 01             B  1070    fportdgnp		ld (iy+period_lo),l
0108C9 FD74 02             B  1071    				ld (iy+period_hi),h
0108CC C9                  B  1072    				ret
                           B  1073    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  31


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B  1074    
0108CD                     B  1075    e3_glissando_control
                           B  1076    
0108CD FDCB 0F 8E          B  1077    				res 1,(iy+control_bits)
0108D1 78                  B  1078    				ld a,b
0108D2 E601                B  1079    				and 01h
0108D4 C8                  B  1080    				ret z
0108D5 FDCB 0F CE          B  1081    				set 1,(iy+control_bits)
0108D9 C9                  B  1082    				ret
                           B  1083    
                           B  1084    
0108DA                     B  1085    e4_vibrato_control
                           B  1086    				
0108DA 78                  B  1087    				ld a,b
0108DB E607                B  1088    				and 07h
0108DD 47                  B  1089    				ld b,a
0108DE FD7E 0E             B  1090    				ld a,(iy+wave_type)
0108E1 E6F0                B  1091    				and 0f0h
0108E3 B0                  B  1092    				or b
0108E4 FD77 0E             B  1093    				ld (iy+wave_type),a
0108E7 C9                  B  1094    				ret
                           B  1095    
                           B  1096    
0108E8                     B  1097    e5_finetune_control
                           B  1098    				
0108E8 78                  B  1099    				ld a,b							0108E9 E60F                B  1100    				and 0fh			
0108EB FD77 14             B  1101    				ld (iy+finetune),a
0108EE C9                  B  1102    				ret
                           B  1103    
                           B  1104    
0108EF                     B  1105    e6_pattern_loop
                           B  1106    
0108EF 3A D1 11 01         B  1107    				ld a,(ticker)
0108F3 B7                  B  1108    				or a
0108F4 C0                  B  1109    				ret nz
0108F5 78                  B  1110    				ld a,b
0108F6 E60F                B  1111    				and 0fh
0108F8 28 18               B  1112    				jr z,setplp
0108FA 21 D7 11 01         B  1113    				ld hl,pattloop_count
0108FE 34                  B  1114    				inc (hl)
0108FF BE                  B  1115    				cp (hl)
010900 38 0A               B  1116    				jr c,plp_end
010902 3A D6 11 01         B  1117    				ld a,(pattloop_pos)				010906 3D                  B  1118    				dec a							010907 32 D3 11 01         B  1119    				ld (patindex),a
01090B C9                  B  1120    				ret
01090C AF                  B  1121    plp_end			xor a			
01090D 32 D7 11 01         B  1122    				ld (pattloop_count),a			010911 C9                  B  1123    				ret
010912 3A D3 11 01         B  1124    setplp			ld a,(patindex)					010916 32 D6 11 01         B  1125    				ld (pattloop_pos),a
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  32


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
01091A C9                  B  1126    				ret
                           B  1127    				
                           B  1128    
01091B                     B  1129    e7_tremolo_control
                           B  1130    				
01091B 78                  B  1131    				ld a,b
01091C E607                B  1132    				and 07h
01091E 47                  B  1133    				ld b,a
01091F CB20                B  1134    				sla b
010921 CB20                B  1135    				sla b
010923 CB20                B  1136    				sla b
010925 CB20                B  1137    				sla b
010927 FD7E 0E             B  1138    				ld a,(iy+wave_type)
01092A E60F                B  1139    				and 0fh
01092C B0                  B  1140    				or b
01092D FD77 0E             B  1141    				ld (iy+wave_type),a
010930 C9                  B  1142    				ret
                           B  1143    				
                           B  1144    
010931                     B  1145    e9_retrigger_note
                           B  1146    
010931 78                  B  1147    				ld a,b
010932 E60F                B  1148    				and 0fh
010934 C8                  B  1149    				ret z
010935 47                  B  1150    				ld b,a
010936 3A D1 11 01         B  1151    				ld a,(ticker)
01093A B7                  B  1152    				or a
01093B 28 06               B  1153    				jr z,retrigit
01093D 90                  B  1154    rtloop			sub b
01093E 28 03               B  1155    				jr z,retrigit
010940 30 FB               B  1156    				jr nc,rtloop
010942 C9                  B  1157    				ret
010943 FDCB 0F C6          B  1158    retrigit		set 0,(iy+control_bits)
010947 C9                  B  1159    				ret
                           B  1160    				
                           B  1161    
                           B  1162    
010948                     B  1163    ea_finevol_up
                           B  1164    
010948 3A D1 11 01         B  1165    				ld a,(ticker)
01094C B7                  B  1166    				or a
01094D C0                  B  1167    				ret nz
01094E 78                  B  1168    				ld a,b
01094F E60F                B  1169    				and 0fh
010951 FD86 03             B  1170    				add a,(iy+volume)
010954 FE40                B  1171    				cp 64
010956 38 02               B  1172    				jr c,eavolok
010958 3E40                B  1173    				ld a,64
01095A FD77 03             B  1174    eavolok			ld (iy+volume),a
01095D C9                  B  1175    				ret
                           B  1176    				
                           B  1177    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  33


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
01095E                     B  1178    eb_finevol_down
                           B  1179    					
01095E 3A D1 11 01         B  1180    				ld a,(ticker)
010962 B7                  B  1181    				or a
010963 C0                  B  1182    				ret nz
010964 78                  B  1183    				ld a,b
010965 E60F                B  1184    				and 0fh
010967 47                  B  1185    				ld b,a
010968 FD7E 03             B  1186    				ld a,(iy+volume)
01096B 90                  B  1187    				sub b
01096C 30 01               B  1188    				jr nc,ebvolok
01096E AF                  B  1189    				xor a
01096F FD77 03             B  1190    ebvolok			ld (iy+volume),a
010972 C9                  B  1191    				ret
                           B  1192    
                           B  1193    
010973                     B  1194    ec_cutnote
                           B  1195    
010973 78                  B  1196    				ld a,b
010974 E60F                B  1197    				and 0fh
010976 47                  B  1198    				ld b,a
010977 3A D1 11 01         B  1199    				ld a,(ticker)
01097B B8                  B  1200    				cp b
01097C C0                  B  1201    				ret nz
01097D AF                  B  1202    				xor a
01097E FD77 03             B  1203    				ld (iy+volume),a
010981 C9                  B  1204    				ret
                           B  1205    				
                           B  1206    
                           B  1207    
                           B  1208    				
010982                     B  1209    ed_delayedtrig	
                           B  1210    				
010982 78                  B  1211    				ld a,b
010983 E60F                B  1212    				and 0fh
010985 47                  B  1213    				ld b,a
010986 3A D1 11 01         B  1214    				ld a,(ticker)
01098A B8                  B  1215    				cp b
01098B C0                  B  1216    				ret nz
                           B  1217    				
01098C FDCB 0F 5E          B  1218    				bit 3,(iy+control_bits)			010990 28 17               B  1219    				jr z,ed_nonewp2
010992 FD4E 06             B  1220    				ld c,(iy+period_for_fx_lo)		010995 FD46 07             B  1221    				ld b,(iy+period_for_fx_hi)
010998 FD71 01             B  1222    				ld (iy+period_lo),c
01099B FD70 02             B  1223    				ld (iy+period_hi),b
01099E FDCB 0F C6          B  1224    				set 0,(iy+control_bits)			0109A2 FD7E 12             B  1225    				ld a,(iy+instrument_waiting)	0109A5 B7                  B  1226    				or a
0109A6 C8                  B  1227    				ret z
0109A7 18 0E               B  1228    				jr ed_do_vol					                           B  1229    				
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  34


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
0109A9                     B  1230    ed_nonewp2
                           B  1231    
0109A9 FD7E 12             B  1232    				ld a,(iy+instrument_waiting)	0109AC B7                  B  1233    				or a							0109AD C8                  B  1234    				ret z
0109AE FDBE 00             B  1235    				cp (iy+instrument)			
0109B1 28 04               B  1236    				jr z,ed_do_vol
0109B3 FDCB 0F C6          B  1237    				set 0,(iy+control_bits)
                           B  1238    
0109B7 FD77 00             B  1239    ed_do_vol		ld (iy+instrument),a
0109BA FD7E 13             B  1240    				ld a,(iy+volume_waiting)		0109BD FD77 03             B  1241    				ld (iy+volume),a	
0109C0 FD77 08             B  1242    				ld (iy+volume_for_fx),a			0109C3 C9                  B  1243    				ret
                           B  1244    
                           B  1245    
                           B  1246    
                           B  1247    				
                           B  1248    				
0109C4                     B  1249    ee_pattdelay
                           B  1250    
0109C4 3A D9 11 01         B  1251    				ld a,(pattdelay_flag)			0109C8 B7                  B  1252    				or a
0109C9 C0                  B  1253    				ret nz
0109CA 78                  B  1254    				ld a,b
0109CB E60F                B  1255    				and 0fh
0109CD 32 D8 11 01         B  1256    				ld (pattdelay_count),a
0109D1 3E01                B  1257    				ld a,1
0109D3 32 D9 11 01         B  1258    				ld (pattdelay_flag),a
0109D7 C9                  B  1259    				ret
                           B  1260    				
                           B  1261    
                           B  1262    
                           B  1263    ;-------- FX $0F ------------------------------
                           B  1264    
0109D8                     B  1265    fx_set_speed
0109D8 FD7E 05             B  1266    				ld a,(iy+fx_args)
0109DB 32 D4 11 01         B  1267    				ld (songspeed),a
0109DF C9                  B  1268    				ret
                           B  1269    
                           B  1270    
                           B  1271    ;---- Amiga Period List -----------------------
                           B  1272    
0109E0                     B  1273    period_lookup_table	
                           B  1274    
0109E0 23000000 00000022   B  1275    					DB 35,0,0,0,0,0,0,34,0,0,0,
0109E8 00000000 00002100 
0109F0 00000000 00002000   B  1276    					DB 0,0,0,0,0,0,32,0,0,0,0,0
0109F8 00000000 00001F00 
010A00 00000000 00001E00   B  1277    					DB 0,0,0,0,0,0,30,0,0,0,0,0
010A08 00000000 0000001D 
010A10 00000000 00000000   B  1278    					DB 0,0,0,0,0,0,0,0,0,28,0,0
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  35


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010A18 001C0000 00000000 
010A20 0000001B 00000000   B  1279    					DB 0,0,0,27,0,0,0,0,0,0,0,0
010A28 00000000 001A0000 
010A30 00000000 00000000   B  1280    					DB 0,0,0,0,0,0,0,0,0,25,0,0
010A38 00190000 00000000 
010A40 00000000 00180000   B  1281    					DB 0,0,0,0,0,24,0,0,0,0,0,0
010A48 00000000 00000000 
010A50 00170000 00000000   B  1282    					DB 0,23,0,0,0,0,0,0,0,0,0,0
010A58 00000000 00000016 
010A60 00000000 00000000   B  1283    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010A68 00000000 00150000 
010A70 00000000 00000000   B  1284    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010A78 00000000 14000000 
010A80 00000000 00000000   B  1285    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010A88 00000000 13000000 
010A90 00000000 00000000   B  1286    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010A98 00000000 00120000 
010AA0 00000000 00000000   B  1287    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010AA8 00000000 00000011 
010AB0 00000000 00000000   B  1288    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010AB8 00000000 00000000 
010AC0 00001000 00000000   B  1289    					DB 0,0,16,0,0,0,0,0,0,0,0,0
010AC8 00000000 00000000 
010AD0 00000000 0000000F   B  1290    					DB 0,0,0,0,0,0,0,15,0,0,0,0
010AD8 00000000 00000000 
010AE0 00000000 00000000   B  1291    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010AE8 00000000 0E000000 
010AF0 00000000 00000000   B  1292    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010AF8 00000000 00000000 
010B00 0000000D 00000000   B  1293    					DB 0,0,0,13,0,0,0,0,0,0,0,0
010B08 00000000 00000000 
010B10 00000000 00000000   B  1294    					DB 0,0,0,0,0,0,0,0,0,0,0,12
010B18 0000000C 00000000 
010B20 00000000 00000000   B  1295    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010B28 00000000 00000000 
010B30 00000000 0B000000   B  1296    					DB 0,0,0,0,11,0,0,0,0,0,0,0
010B38 00000000 00000000 
010B40 00000000 00000000   B  1297    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010B48 00000000 0000000A 
010B50 00000000 00000000   B  1298    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010B58 00000000 00000000 
010B60 00000000 00000000   B  1299    					DB 0,0,0,0,0,0,0,0,0,0,0,9,
010B68 00000009 00000000 
010B70 00000000 00000000   B  1300    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010B78 00000000 00000000 
010B80 00000000 00000000   B  1301    					DB 0,0,0,0,0,0,0,0,0,8,0,0,
010B88 00080000 00000000 
010B90 00000000 00000000   B  1302    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010B98 00000000 00000000 
010BA0 00000000 00000000   B  1303    					DB 0,0,0,0,0,0,0,0,0,7,0,0,
010BA8 00070000 00000000 
010BB0 00000000 00000000   B  1304    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  36


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010BB8 00000000 00000000 
010BC0 00000000 00000000   B  1305    					DB 0,0,0,0,0,0,0,0,0,0,0,6,
010BC8 00000006 00000000 
010BD0 00000000 00000000   B  1306    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010BD8 00000000 00000000 
010BE0 00000000 00000000   B  1307    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010BE8 00000000 00000005 
010BF0 00000000 00000000   B  1308    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010BF8 00000000 00000000 
010C00 00000000 00000000   B  1309    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C08 00000000 00000000 
010C10 00000000 00040000   B  1310    					DB 0,0,0,0,0,4,0,0,0,0,0,0,
010C18 00000000 00000000 
010C20 00000000 00000000   B  1311    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C28 00000000 00000000 
010C30 00000000 00000000   B  1312    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C38 00000000 00000003 
010C40 00000000 00000000   B  1313    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C48 00000000 00000000 
010C50 00000000 00000000   B  1314    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C58 00000000 00000000 
010C60 00000000 00000000   B  1315    					DB 0,0,0,0,0,0,0,0,0,2,0,0,
010C68 00020000 00000000 
010C70 00000000 00000000   B  1316    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C78 00000000 00000000 
010C80 00000000 00000000   B  1317    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010C88 00000000 00000000 
010C90 00000000 00000001   B  1318    					DB 0,0,0,0,0,0,0,1,0,0,0,0,
010C98 00000000 00000000 
010CA0 00000000 00000000   B  1319    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010CA8 00000000 00000000 
010CB0 00000000 00000000   B  1320    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010CB8 00000000 00000000 
010CC0 00000000 00000000   B  1321    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
010CC8 00000000 00000000 
                           B  1322    
                           B  1323    
010CD0 58032803 FA02D002   B  1324    period_table_p0	dw 856,808,762,720,678,640,604,
010CD8 A6028002 5C023A02 
010CE0 1A02FC01 E001C501 
010CE8 AC019401 7D016801   B  1325    				dw 428,404,381,360,339,320,302,
010CF0 53014001 2E011D01 
010CF8 0D01FE00 F000E200 
010D00 D600CA00 BE00B400   B  1326    				dw 214,202,190,180,170,160,151,
010D08 AA00A000 97008F00 
010D10 87007F00 78007100 
                           B  1327    
010D18 52032203 F502CB02   B  1328    period_table_p1	dw 850,802,757,715,674,637,601,
010D20 A2027D02 59023702 
010D28 1702F901 DD01C201 
010D30 A9019101 7B016501   B  1329    				dw 425,401,379,357,337,318,300,
010D38 51013E01 2C011C01 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  37


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010D40 0C01FD00 EF00E100 
010D48 D500C900 BD00B300   B  1330    				dw 213,201,189,179,169,159,150,
010D50 A9009F00 96008E00 
010D58 86007E00 77007100 
                           B  1331    
010D60 4C031C03 F002C502   B  1332    period_table_p2	dw 844,796,752,709,670,632,597,
010D68 9E027802 55023302 
010D70 1402F601 DA01BF01 
010D78 A6018E01 78016301   B  1333    				dw 422,398,376,355,335,316,298,
010D80 4F013C01 2A011A01 
010D88 0A01FB00 ED00E000 
010D90 D300C700 BC00B100   B  1334    				dw 211,199,188,177,167,158,149,
010D98 A7009E00 95008D00 
010DA0 85007D00 76007000 
                           B  1335    
010DA8 46031703 EA02C002   B  1336    period_table_p3	dw 838,791,746,704,665,628,592,
010DB0 99027402 50022F02 
010DB8 1002F201 D601BC01 
010DC0 A3018B01 75016001   B  1337    				dw 419,395,373,352,332,314,296,
010DC8 4C013A01 28011801 
010DD0 0801F900 EB00DE00 
010DD8 D100C600 BB00B000   B  1338    				dw 209,198,187,176,166,157,148,
010DE0 A6009D00 94008C00 
010DE8 84007D00 76006F00 
                           B  1339    
010DF0 40031103 E502BB02   B  1340    period_table_p4	dw 832,785,741,699,660,623,588,
010DF8 94026F02 4C022B02 
010E00 0C02EF01 D301B901 
010E08 A0018801 72015E01   B  1341    				dw 416,392,370,350,330,312,294,
010E10 4A013801 26011601 
010E18 0601F700 E900DC00 
010E20 D000C400 B900AF00   B  1342    				dw 208,196,185,175,165,156,147,
010E28 A5009C00 93008B00 
010E30 83007C00 75006E00 
                           B  1343    
010E38 3A030B03 E002B602   B  1344    period_table_p5	dw 826,779,736,694,655,619,584,
010E40 8F026B02 48022702 
010E48 0802EB01 CF01B501 
010E50 9D018601 70015B01   B  1345    				dw 413,390,368,347,328,309,292,
010E58 48013501 24011401 
010E60 0401F500 E800DB00 
010E68 CE00C300 B800AE00   B  1346    				dw 206,195,184,174,164,155,146,
010E70 A4009B00 92008A00 
010E78 82007B00 74006D00 
                           B  1347    
010E80 34030603 DA02B102   B  1348    period_table_p6	dw 820,774,730,689,651,614,580,
010E88 8B026602 44022302 
010E90 0402E701 CC01B201 
010E98 9A018301 6D015901   B  1349    				dw 410,387,365,345,325,307,290,
010EA0 45013301 22011201 
010EA8 0201F400 E600D900 
010EB0 CD00C100 B700AC00   B  1350    				dw 205,193,183,172,163,154,145,
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  38


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
010EB8 A3009A00 91008900 
010EC0 81007A00 73006D00 
                           B  1351    
010EC8 2E030003 D502AC02   B  1352    period_table_p7	dw 814,768,725,684,646,610,575,
010ED0 86026202 3F021F02 
010ED8 0102E401 C901AF01 
010EE0 97018001 6B015601   B  1353    				dw 407,384,363,342,323,305,288,
010EE8 43013101 20011001 
010EF0 0001F200 E400D800 
010EF8 CC00C000 B500AB00   B  1354    				dw 204,192,181,171,161,152,144,
010F00 A1009800 90008800 
010F08 80007900 72006C00 
                           B  1355    
010F10 8B035803 2803FA02   B  1356    period_table_m8	dw 907,856,808,762,720,678,640,
010F18 D002A602 80025C02 
010F20 3A021A02 FC01E001 
010F28 C501AC01 94017D01   B  1357    				dw 453,428,404,381,360,339,320,
010F30 68015301 40012E01 
010F38 1D010D01 FE00F000 
010F40 E200D600 CA00BE00   B  1358    				dw 226,214,202,190,180,170,160,
010F48 B400AA00 A0009700 
010F50 8F008700 7F007800 
                           B  1359    
010F58 84035203 2203F502   B  1360    period_table_m7	dw 900,850,802,757,715,675,636,
010F60 CB02A302 7C025902 
010F68 37021702 F901DD01 
010F70 C201A901 91017B01   B  1361    				dw 450,425,401,379,357,337,318,
010F78 65015101 3E012C01 
010F80 1C010C01 FD00EE00 
010F88 E100D400 C800BD00   B  1362    				dw 225,212,200,189,179,169,159,
010F90 B300A900 9F009600 
010F98 8E008600 7E007700 
                           B  1363    
010FA0 7E034C03 1C03F002   B  1364    period_table_m6	dw 894,844,796,752,709,670,632,
010FA8 C5029E02 78025502 
010FB0 33021402 F601DA01 
010FB8 BF01A601 8E017801   B  1365    				dw 447,422,398,376,355,335,316,
010FC0 63014F01 3C012A01 
010FC8 1A010A01 FB00ED00 
010FD0 DF00D300 C700BC00   B  1366    				dw 223,211,199,188,177,167,158,
010FD8 B100A700 9E009500 
010FE0 8D008500 7D007600 
                           B  1367    
010FE8 77034603 1703EA02   B  1368    period_table_m5	dw 887,838,791,746,704,665,628,
010FF0 C0029902 74025002 
010FF8 2F021002 F201D601 
011000 BC01A301 8B017501   B  1369    				dw 444,419,395,373,352,332,314,
011008 60014C01 3A012801 
011010 18010801 F900EB00 
011018 DE00D100 C600BB00   B  1370    				dw 222,209,198,187,176,166,157,
011020 B000A600 9D009400 
011028 8C008400 7D007600 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  39


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B  1371    
011030 71034003 1103E502   B  1372    period_table_m4	dw 881,832,785,741,699,660,623,
011038 BB029402 6F024C02 
011040 2B020C02 EE01D301 
011048 B901A001 88017201   B  1373    				dw 441,416,392,370,350,330,312,
011050 5E014A01 38012601 
011058 16010601 F700E900 
011060 DC00D000 C400B900   B  1374    				dw 220,208,196,185,175,165,156,
011068 AF00A500 9C009300 
011070 8B008300 7B007500 
                           B  1375    
011078 6B033A03 0B03E002   B  1376    period_table_m3	dw 875,826,779,736,694,655,619,
011080 B6028F02 6B024802 
011088 27020802 EB01CF01 
011090 B5019D01 86017001   B  1377    				dw 437,413,390,368,347,328,309,
011098 5B014801 35012401 
0110A0 14010401 F500E800 
0110A8 DB00CE00 C300B800   B  1378    				dw 219,206,195,184,174,164,155,
0110B0 AE00A400 9B009200 
0110B8 8A008200 7B007400 
                           B  1379    
0110C0 64033403 0603DA02   B  1380    period_table_m2	dw 868,820,774,730,689,651,614,
0110C8 B1028B02 66024402 
0110D0 23020402 E701CC01 
0110D8 B2019A01 83016D01   B  1381    				dw 434,410,387,365,345,325,307,
0110E0 59014501 33012201 
0110E8 12010201 F400E600 
0110F0 D900CD00 C100B700   B  1382    				dw 217,205,193,183,172,163,154,
0110F8 AC00A300 9A009100 
011100 89008100 7A007300 
                           B  1383    
011108 5E032E03 0003D502   B  1384    period_table_m1	dw 862,814,768,725,684,646,610,
011110 AC028602 62023F02 
011118 1F020102 E401C901 
011120 AF019701 80016B01   B  1385    				dw 431,407,384,363,342,323,305,
011128 56014301 31012001 
011130 10010001 F200E400 
011138 D800CB00 C000B500   B  1386    				dw 216,203,192,181,171,161,152,
011140 AB00A100 98009000 
011148 88008000 79007200 
                           B  1387    
                           B  1388    ;----- Vibrato / Tremolo sine wave ------------
                           B  1389    
011150 0018314A 61788DA1   B  1390    vibrato_table		db 000,024,049,074,097,120,
011158 B4C5D4E0 EBF4FAFD   B  1391    					db 180,197,212,224,235,244,
011160 FFFDFAF4 EBE0D4C5   B  1392    					db 255,253,250,244,235,224,
011168 B4A18D78 614A3118   B  1393    					db 180,161,141,120,097,074,
                           B  1394    
                           B  1395    ;----------------------------------------------
                           B  1396    
011170 000000              B  1397    sample_base				dw24 0			; "init
011173 00                  B  1398    relocated_samples		db 0			; if se
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  40


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
                           B  1399    
011174 00 00 00 00 00 00   B  1400    sample_location_list	blkb 31*3,0		; 24bit
01117A 00 00 00 00 00 00 
011180 00 00 00 00 00 00 
011186 00 00 00 00 00 00 
01118C 00 00 00 00 00 00 
011192 00 00 00 00 00 00 
011198 00 00 00 00 00 00 
01119E 00 00 00 00 00 00 
0111A4 00 00 00 00 00 00 
0111AA 00 00 00 00 00 00 
0111B0 00 00 00 00 00 00 
0111B6 00 00 00 00 00 00 
0111BC 00 00 00 00 00 00 
0111C2 00 00 00 00 00 00 
0111C8 00 00 00 00 00 00 
0111CE 00 00 00 
                           B  1401    
                           B  1402    ;----------------------------------------------
                           B  1403    
0111D1 00                  B  1404    ticker				db 0
0111D2 00                  B  1405    songpos				db 0
0111D3 00                  B  1406    patindex			db 0
0111D4 00                  B  1407    songspeed			db 0
0111D5 00                  B  1408    arpeggio_counter	db 0
0111D6 00                  B  1409    pattloop_pos		db 0
0111D7 00                  B  1410    pattloop_count		db 0
0111D8 00                  B  1411    pattdelay_count		db 0
0111D9 00                  B  1412    pattdelay_flag		db 0
0111DA 00                  B  1413    filter_on_off		db 0
                           B  1414    
                           B  1415    ;----------------------------------------------
                           B  1416    
       00000026            B  1417    vars_per_channel		equ 38
                           B  1418    
0111DB 00 00 00 00 00 00   B  1419    channel_data			blkb vars_per_channel*4
0111E1 00 00 00 00 00 00 
0111E7 00 00 00 00 00 00 
0111ED 00 00 00 00 00 00 
0111F3 00 00 00 00 00 00 
0111F9 00 00 00 00 00 00 
0111FF 00 00 00 00 00 00 
011205 00 00 00 00 00 00 
01120B 00 00 00 00 00 00 
011211 00 00 00 00 00 00 
011217 00 00 00 00 00 00 
01121D 00 00 00 00 00 00 
011223 00 00 00 00 00 00 
011229 00 00 00 00 00 00 
01122F 00 00 00 00 00 00 
011235 00 00 00 00 00 00 
01123B 00 00 00 00 00 00 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  41


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_Player_v101.asm
011241 00 00 00 00 00 00 
011247 00 00 00 00 00 00 
01124D 00 00 00 00 00 00 
011253 00 00 00 00 00 00 
011259 00 00 00 00 00 00 
01125F 00 00 00 00 00 00 
011265 00 00 00 00 00 00 
01126B 00 00 00 00 00 00 
011271 00 00 
                           B  1420    	
       00000000            B  1421    instrument				equ 0
       00000001            B  1422    period_lo				equ 1
       00000002            B  1423    period_hi				equ 2
       00000003            B  1424    volume					equ 3
       00000004            B  1425    fx_number				equ 4
       00000005            B  1426    fx_args					equ 5
       00000006            B  1427    period_for_fx_lo		equ 6
       00000007            B  1428    period_for_fx_hi		equ 7
       00000008            B  1429    volume_for_fx			equ 8
       00000009            B  1430    portamento_rate			equ 9
       0000000A            B  1431    vibrato_args			equ 10
       0000000B            B  1432    vibrato_pos				equ 11
       0000000C            B  1433    tremolo_args			equ 12
       0000000D            B  1434    tremolo_pos				equ 13
       0000000E            B  1435    wave_type 				equ 14		;bits 7:4 =
       0000000F            B  1436    control_bits			equ 15		;bit 0 = no
       00000010            B  1437    portamento_dest_lo		equ 16		;bit 2 = ch
       00000011            B  1438    portamento_dest_hi		equ 17
       00000012            B  1439    instrument_waiting		equ 18
       00000013            B  1440    volume_waiting			equ 19
       00000014            B  1441    finetune				equ 20
       00000015            B  1442    arp_base_period_lo  	equ 21
       00000016            B  1443    arp_base_period_hi		equ 22
                           B  1444    
       00000017            B  1445    sample_location			equ 23		;23,24,25	       0000001A            B  1446    sample_length			equ 26		;26,27,28	       0000001D            B  1447    sample_loop_location	equ 29		;29,30,31	       00000020            B  1448    sample_loop_length		equ 32		;32,33,34	       00000023            B  1449    sample_offset			equ 35		;35,36,37	                           B  1450    
                           B  1451    
                           B  1452    ;==============================================
                           B  1453    ; End of non-hardware specific eZ80 Protracker 
                           B  1454    ;==============================================
                           B  1455    
                           A   172    	
                           B     0    			include "routines/ADL_mode_Protrack
                           B     1    ;----------------------------------------------
                           B     2    ; Convert Amiga hardware values from eZ80 Protr
                           B     3    ; and writes to hardware registers
                           B     4    ;----------------------------------------------
                           B     5    ;
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  42


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_EZ80P_audio.asm
                           B     6    ; V1.01 - ADL mode
                           B     7    ;
                           B     8    ; Writes 4 tracker channels to left channels, a
                           B     9    ;----------------------------------------------
                           B    10    
                           B    11    .assume ADL = 1
                           B    12    
       000111DC            B    13    firstchan_period	equ channel_data+period_lo
       000111DE            B    14    firstchan_volume	equ channel_data+volume
       000111F2            B    15    firstchan_location	equ channel_data+sample_loc
       000111F5            B    16    firstchan_length	equ channel_data+sample_len
       000111EA            B    17    firstchan_control	equ channel_data+control_bi
       000111F8            B    18    firstchan_loop_loc	equ channel_data+sample_loo
       000111FB            B    19    firstchan_loop_len	equ channel_data+sample_loo
                           B    20    
       00011202            B    21    secondchan_period	equ channel_data+vars_per_c
       00011204            B    22    secondchan_volume	equ channel_data+vars_per_c
       00011218            B    23    secondchan_location	equ channel_data+vars_per_c
       0001121B            B    24    secondchan_length	equ channel_data+vars_per_c
       00011210            B    25    secondchan_control	equ channel_data+vars_per_c
       0001121E            B    26    secondchan_loop_loc	equ channel_data+vars_per_c
       00011221            B    27    secondchan_loop_len	equ channel_data+vars_per_c
                           B    28    
       00011228            B    29    thirdchan_period	equ channel_data+(vars_per_
       0001122A            B    30    thirdchan_volume	equ channel_data+(vars_per_
       0001123E            B    31    thirdchan_location	equ channel_data+(vars_per_
       00011241            B    32    thirdchan_length	equ channel_data+(vars_per_
       00011236            B    33    thirdchan_control	equ channel_data+(vars_per_
       00011244            B    34    thirdchan_loop_loc	equ channel_data+(vars_per_
       00011247            B    35    thirdchan_loop_len	equ channel_data+(vars_per_
                           B    36    
       0001124E            B    37    fourthchan_period	equ channel_data+(vars_per_
       00011250            B    38    fourthchan_volume	equ channel_data+(vars_per_
       00011264            B    39    fourthchan_location	equ channel_data+(vars_per_
       00011267            B    40    fourthchan_length	equ channel_data+(vars_per_
       0001125C            B    41    fourthchan_control	equ channel_data+(vars_per_
       0001126A            B    42    fourthchan_loop_loc	equ channel_data+(vars_per_
       0001126D            B    43    fourthchan_loop_len	equ channel_data+(vars_per_
                           B    44    
                           B    45    ;----------------------------------------------
                           B    46    ; EZ80P specific code
                           B    47    ;----------------------------------------------
                           B    48    
011273                     B    49    update_audio_hardware
                           B    50    
011273 3E01                B    51    				ld a,1
011275 320314FF            B    52    				ld (hw_audio_registers+3),a		011279 0E01                B    53    				ld c,port_hw_flags
01127B ED7440              B    54    wait_audreg		tstio 40h						01127E 28 FB               B    55    				jr z,wait_audreg
                           B    56    				
                           B    57    ;				ld a,0ffh						Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  43


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_EZ80P_audio.asm
                           B    58    ;				ld (hw_palette),a				                           B    59    				
                           B    60    ;----------------------------------------------
                           B    61    ; Write Period Constants - must be done in max 
                           B    62    ;----------------------------------------------
                           B    63    								
011280 DD210014 FF         B    64    				ld ix,hw_audio_registers		011285 FD218014 FF         B    65    				ld iy,hw_audio_registers+80h
01128A 11 13 13 01         B    66    				ld de,period_conv_table-200		                           B    67    
01128E ED4B DC 11 01       B    68    				ld bc,(firstchan_period)
011293 21000000            B    69    				ld hl,0
011297 69                  B    70    				ld l,c
011298 60                  B    71    				ld h,b
011299 29                  B    72    				add hl,hl
01129A 19                  B    73    				add hl,de
01129B 4E                  B    74    				ld c,(hl)
01129C 23                  B    75    				inc hl
01129D 46                  B    76    				ld b,(hl)
01129E DD0F08              B    77    				ld (ix+08h),bc					0112A1 FD0F08              B    78    				ld (iy+08h),bc
                           B    79    				
0112A4 ED4B 02 12 01       B    80    				ld bc,(secondchan_period)
0112A9 21000000            B    81    				ld hl,0
0112AD 69                  B    82    				ld l,c
0112AE 60                  B    83    				ld h,b	  	
0112AF 29                  B    84    				add hl,hl
0112B0 19                  B    85    				add hl,de
0112B1 4E                  B    86    				ld c,(hl)
0112B2 23                  B    87    				inc hl
0112B3 46                  B    88    				ld b,(hl)
0112B4 DD0F28              B    89    				ld (ix+28h),bc					0112B7 FD0F28              B    90    				ld (iy+28h),bc					                           B    91    	
0112BA ED4B 28 12 01       B    92    				ld bc,(thirdchan_period)
0112BF 21000000            B    93    				ld hl,0
0112C3 69                  B    94    				ld l,c
0112C4 60                  B    95    				ld h,b  	
0112C5 29                  B    96    				add hl,hl
0112C6 19                  B    97    				add hl,de
0112C7 4E                  B    98    				ld c,(hl)
0112C8 23                  B    99    				inc hl
0112C9 46                  B   100    				ld b,(hl)
0112CA DD0F48              B   101    				ld (ix+48h),bc					0112CD FD0F48              B   102    				ld (iy+48h),bc	
                           B   103    
0112D0 ED4B 4E 12 01       B   104    				ld bc,(fourthchan_period)
0112D5 21000000            B   105    				ld hl,0
0112D9 69                  B   106    				ld l,c
0112DA 60                  B   107    				ld h,b  	
0112DB 29                  B   108    				add hl,hl
0112DC 19                  B   109    				add hl,de
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  44


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_EZ80P_audio.asm
0112DD 4E                  B   110    				ld c,(hl)
0112DE 23                  B   111    				inc hl
0112DF 46                  B   112    				ld b,(hl)
0112E0 DD0F68              B   113    				ld (ix+68h),bc					0112E3 FD0F68              B   114    				ld (iy+68h),bc
                           B   115    				
                           B   116    ;----------------------------------------------
                           B   117    ; Write Volume
                           B   118    ;----------------------------------------------
                           B   119    
                           B   120    
0112E6 3A DE 11 01         B   121    				ld a,(firstchan_volume)			0112EA 5F                  B   122    				ld e,a
0112EB DD1F0C              B   123    				ld (ix+0ch),de					0112EE FD1F0C              B   124    				ld (iy+0ch),de
                           B   125    				
0112F1 3A 04 12 01         B   126    				ld a,(secondchan_volume)
0112F5 5F                  B   127    				ld e,a
0112F6 DD1F2C              B   128    				ld (ix+2ch),de					0112F9 FD1F2C              B   129    				ld (iy+2ch),de
                           B   130    				
0112FC 3A 2A 12 01         B   131    				ld a,(thirdchan_volume)
011300 5F                  B   132    				ld e,a
011301 DD1F4C              B   133    				ld (ix+4ch),de					011304 FD1F4C              B   134    				ld (iy+4ch),de
                           B   135    				
011307 3A 50 12 01         B   136    				ld a,(fourthchan_volume)
01130B 5F                  B   137    				ld e,a
01130C DD1F6C              B   138    				ld (ix+6ch),de					01130F FD1F6C              B   139    				ld (iy+6ch),de
                           B   140    				
                           B   141    ;----------------------------------------------
                           B   142    ; Write Loc and Len of triggered channels
                           B   143    ;----------------------------------------------
                           B   144    
011312 21 EA 11 01         B   145    				ld hl,firstchan_control			011316 CB46                B   146    				bit 0,(hl)						011318 28 2A               B   147    				jr z,no_rt_ch0					01131A CB86                B   148    				res 0,(hl)
01131C 2A F2 11 01         B   149    				ld hl,(firstchan_location)
011320 DD2F00              B   150    				ld (ix+00h),hl					011323 FD2F00              B   151    				ld (iy+00h),hl
011326 2A F8 11 01         B   152    				ld hl,(firstchan_loop_loc)
01132A DD2F10              B   153    				ld (ix+10h),hl					01132D FD2F10              B   154    				ld (iy+10h),hl	
011330 2A F5 11 01         B   155    				ld hl,(firstchan_length)
011334 DD2F04              B   156    				ld (ix+04h),hl					011337 FD2F04              B   157    				ld (iy+04h),hl
01133A 2A FB 11 01         B   158    				ld hl,(firstchan_loop_len)
01133E DD2F14              B   159    				ld (ix+14h),hl					011341 FD2F14              B   160    				ld (iy+14h),hl
                           B   161    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  45


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_EZ80P_audio.asm
011344                     B   162    no_rt_ch0
011344 21 10 12 01         B   163    				ld hl,secondchan_control
011348 CB46                B   164    				bit 0,(hl)
01134A 28 2A               B   165    				jr z,no_rt_ch1
01134C CB86                B   166    				res 0,(hl)
01134E 2A 18 12 01         B   167    				ld hl,(secondchan_location)
011352 DD2F20              B   168    				ld (ix+20h),hl					011355 FD2F20              B   169    				ld (iy+20h),hl
011358 2A 1E 12 01         B   170    				ld hl,(secondchan_loop_loc)
01135C DD2F30              B   171    				ld (ix+30h),hl					01135F FD2F30              B   172    				ld (iy+30h),hl
011362 2A 1B 12 01         B   173    				ld hl,(secondchan_length)
011366 DD2F24              B   174    				ld (ix+24h),hl					011369 FD2F24              B   175    				ld (iy+24h),hl	
01136C 2A 21 12 01         B   176    				ld hl,(secondchan_loop_len)		011370 DD2F34              B   177    				ld (ix+34h),hl					011373 FD2F34              B   178    				ld (iy+34h),hl	
                           B   179    
011376                     B   180    no_rt_ch1
                           B   181    								
011376 21 36 12 01         B   182    				ld hl,thirdchan_control
01137A CB46                B   183    				bit 0,(hl)
01137C 28 2A               B   184    				jr z,no_rt_ch2
01137E CB86                B   185    				res 0,(hl)
011380 2A 3E 12 01         B   186    				ld hl,(thirdchan_location)
011384 DD2F40              B   187    				ld (ix+40h),hl		
011387 FD2F40              B   188    				ld (iy+40h),hl
01138A 2A 44 12 01         B   189    				ld hl,(thirdchan_loop_loc)
01138E DD2F50              B   190    				ld (ix+50h),hl		
011391 FD2F50              B   191    				ld (iy+50h),hl					011394 2A 41 12 01         B   192    				ld hl,(thirdchan_length)
011398 DD2F44              B   193    				ld (ix+44h),hl	
01139B FD2F44              B   194    				ld (iy+44h),hl	
01139E 2A 47 12 01         B   195    				ld hl,(thirdchan_loop_len)
0113A2 DD2F54              B   196    				ld (ix+54h),hl		
0113A5 FD2F54              B   197    				ld (iy+54h),hl	
                           B   198    
                           B   199    
0113A8 21 5C 12 01         B   200    no_rt_ch2		ld hl,fourthchan_control
0113AC CB46                B   201    				bit 0,(hl)
0113AE 28 2A               B   202    				jr z,no_rt_ch3
0113B0 CB86                B   203    				res 0,(hl)
0113B2 2A 64 12 01         B   204    				ld hl,(fourthchan_location)
0113B6 DD2F60              B   205    				ld (ix+60h),hl		
0113B9 FD2F60              B   206    				ld (iy+60h),hl	
0113BC 2A 6A 12 01         B   207    				ld hl,(fourthchan_loop_loc)
0113C0 DD2F70              B   208    				ld (ix+70h),hl	
0113C3 FD2F70              B   209    				ld (iy+70h),hl	
0113C6 2A 67 12 01         B   210    				ld hl,(fourthchan_length)
0113CA DD2F64              B   211    				ld (ix+64h),hl		
0113CD FD2F64              B   212    				ld (iy+64h),hl	
0113D0 2A 6D 12 01         B   213    				ld hl,(fourthchan_loop_len)
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  46


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_EZ80P_audio.asm
0113D4 DD2F74              B   214    				ld (ix+74h),hl		
0113D7 FD2F74              B   215    				ld (iy+74h),hl	
                           B   216    
0113DA                     B   217    no_rt_ch3		
                           B   218    
                           B   219    ;				ld a,0h							                           B   220    ;				ld (hw_palette),a				                           B   221    
0113DA C9                  B   222    				ret
                           B   223    	
                           B   224    ;----------------------------------------------
                           B   225    ; Table for equivalent EZ80P constants to Amiga
                           B   226    ;----------------------------------------------
                           B   227    ;
                           B   228    ; Formula: (1/48828) / ((1/3579545) * period) *
                           B   229    ;
                           B   230    ; Starts at Amiga period 100, one 16-bit consta
                           B   231    
0113DB                     B   232    period_conv_table:
                           B   233    
0113DB ABBBD0B9 FDB734B6   B   234                    db 0ABh,0BBh,0D0h,0B9h,0FDh,0B7
0113E3 74B4BCB2 0CB164AF 
0113EB C5AD2DAC 9CAA12A9   B   235                    db 0C5h,0ADh,02Dh,0ACh,09Ch,0AA
0113F3 90A714A6 9FA431A3 
0113FB C9A167A0 0B9FB59D   B   236                    db 0C9h,0A1h,067h,0A0h,00Bh,09F
011403 649C199B D4999498 
01140B 59972396 F294C593   B   237                    db 059h,097h,023h,096h,0F2h,094
011413 9E927B91 5C90428F 
01141B 2C8E1B8D 0D8C048B   B   238                    db 02Ch,08Eh,01Bh,08Dh,00Dh,08C
011423 FE89FC88 FE870487 
01142B 0D861985 29843D83   B   239                    db 00Dh,086h,019h,085h,029h,084
011433 53826D81 8A80AA7F 
01143B CE7EF47D 1D7D497C   B   240                    db 0CEh,07Eh,0F4h,07Dh,01Dh,07D
011443 777BA97A DD791479 
01144B 4D788977 C7760876   B   241                    db 04Dh,078h,089h,077h,0C7h,076
011453 4B759074 D8732273 
01145B 6F72BD71 0E716070   B   242                    db 06Fh,072h,0BDh,071h,00Eh,071
011463 B56F0C6F 656EBF6D 
01146B 1C6D7B6C DB6B3D6B   B   243                    db 01Ch,06Dh,07Bh,06Ch,0DBh,06B
011473 A16A076A 6E69D868 
01147B 4368AF67 1D678D66   B   244                    db 043h,068h,0AFh,067h,01Dh,067
011483 FE657165 E6645B64 
01148B D3634C63 C6624162   B   245                    db 0D3h,063h,04Ch,063h,0C6h,062
011493 BE613D61 BC603D60 
01149B C05F435F C85E4E5E   B   246                    db 0C0h,05Fh,043h,05Fh,0C8h,05E
0114A3 D55D5E5D E85C725C 
0114AB FE5B8C5B 1A5BA95A   B   247                    db 0FEh,05Bh,08Ch,05Bh,01Ah,05B
0114B3 3A5ACB59 5E59F158 
0114BB 86581B58 B2574A57   B   248                    db 086h,058h,01Bh,058h,0B2h,057
0114C3 E2567C56 1656B155 
0114CB 4E55EB54 89542854   B   249                    db 04Eh,055h,0EBh,054h,089h,054
0114D3 C8536853 0A53AC52 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  47


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_EZ80P_audio.asm
0114DB 4F52F351 98513E51   B   250                    db 04Fh,052h,0F3h,051h,098h,051
0114E3 E4508B50 3350DC4F 
0114EB 854F2F4F DA4E864E   B   251                    db 085h,04Fh,02Fh,04Fh,0DAh,04E
0114F3 324EDF4D 8C4D3B4D 
0114FB EA4C994C 4A4CFA4B   B   252                    db 0EAh,04Ch,099h,04Ch,04Ah,04C
011503 AC4B5E4B 114BC54A 
01150B 794A2D4A E2499849   B   253                    db 079h,04Ah,02Dh,04Ah,0E2h,049
011513 4F490649 BD487548 
01151B 2E48E747 A1475B47   B   254                    db 02Eh,048h,0E7h,047h,0A1h,047
011523 1647D146 8D464946 
01152B 0646C445 82454045   B   255                    db 006h,046h,0C4h,045h,082h,045
011533 FF44BE44 7E443E44 
01153B FF43C043 82434443   B   256                    db 0FFh,043h,0C0h,043h,082h,043
011543 0643C942 8C425042 
01154B 1442D941 9E416441   B   257                    db 014h,042h,0D9h,041h,09Eh,041
011553 2941F040 B6407D40 
01155B 45400D40 D53F9E3F   B   258                    db 045h,040h,00Dh,040h,0D5h,03F
011563 673F303F FA3EC43E 
01156B 8E3E593E 243EF03D   B   259                    db 08Eh,03Eh,059h,03Eh,024h,03E
011573 BB3D883D 543D213D 
01157B EE3CBC3C 8A3C583C   B   260                    db 0EEh,03Ch,0BCh,03Ch,08Ah,03C
011583 263CF53B C43B943B 
01158B 633B333B 043BD43A   B   261                    db 063h,03Bh,033h,03Bh,004h,03B
011593 A53A763A 483A1A3A 
01159B EC39BE39 91396439   B   262                    db 0ECh,039h,0BEh,039h,091h,039
0115A3 37390B39 DE38B238 
0115AB 87385B38 30380538   B   263                    db 087h,038h,05Bh,038h,030h,038
0115B3 DA37B037 86375C37 
0115BB 32370937 DF36B636   B   264                    db 032h,037h,009h,037h,0DFh,036
0115C3 8E366536 3D361536 
0115CB ED35C635 9E357735   B   265                    db 0EDh,035h,0C6h,035h,09Eh,035
0115D3 50352A35 0335DD34 
0115DB B7349134 6C344634   B   266                    db 0B7h,034h,091h,034h,06Ch,034
0115E3 2134FC33 D733B333 
0115EB 8E336A33 46332233   B   267                    db 08Eh,033h,06Ah,033h,046h,033
0115F3 FF32DC32 B8329532 
0115FB 73325032 2D320B32   B   268                    db 073h,032h,050h,032h,02Dh,032
011603 E931C731 A6318431 
01160B 63314131 20310031   B   269                    db 063h,031h,041h,031h,020h,031
011613 DF30BE30 9E307E30 
01161B 5E303E30 1E30FF2F   B   270                    db 05Eh,030h,03Eh,030h,01Eh,030
011623 E02FC02F A12F832F 
01162B 642F452F 272F092F   B   271                    db 064h,02Fh,045h,02Fh,027h,02F
011633 EA2ECD2E AF2E912E 
01163B 742E562E 392E1C2E   B   272                    db 074h,02Eh,056h,02Eh,039h,02E
011643 FF2DE22D C62DA92D 
01164B 8D2D702D 542D382D   B   273                    db 08Dh,02Dh,070h,02Dh,054h,02D
011653 1D2D012D E52CCA2C 
01165B AF2C932C 782C5D2C   B   274                    db 0AFh,02Ch,093h,02Ch,078h,02C
011663 432C282C 0D2CF32B 
01166B D92BBF2B A52B8B2B   B   275                    db 0D9h,02Bh,0BFh,02Bh,0A5h,02B
011673 712B572B 3E2B242B 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  48


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_EZ80P_audio.asm
01167B 0B2BF22A D82ABF2A   B   276                    db 00Bh,02Bh,0F2h,02Ah,0D8h,02A
011683 A72A8E2A 752A5D2A 
01168B 442A2C2A 142AFC29   B   277                    db 044h,02Ah,02Ch,02Ah,014h,02A
011693 E429CC29 B4299C29 
01169B 85296D29 56293F29   B   278                    db 085h,029h,06Dh,029h,056h,029
0116A3 27291029 F928E328 
0116AB CC28B528 9F288828   B   279                    db 0CCh,028h,0B5h,028h,09Fh,028
0116B3 72285C28 45282F28 
0116BB 19280328 EE27D827   B   280                    db 019h,028h,003h,028h,0EEh,027
0116C3 C227AD27 97278227 
0116CB 6D275827 43272E27   B   281                    db 06Dh,027h,058h,027h,043h,027
0116D3 19270427 EF26DA26 
0116DB C626B126 9D268926   B   282                    db 0C6h,026h,0B1h,026h,09Dh,026
0116E3 75266026 4C263826 
0116EB 25261126 FD25E925   B   283                    db 025h,026h,011h,026h,0FDh,025
0116F3 D625C225 AF259C25 
0116FB 88257525 62254F25   B   284                    db 088h,025h,075h,025h,062h,025
011703 3C252925 16250425 
01170B F124DE24 CC24B924   B   285                    db 0F1h,024h,0DEh,024h,0CCh,024
011713 A7249524 83247024 
01171B 5E244C24 3A242924   B   286                    db 05Eh,024h,04Ch,024h,03Ah,024
011723 17240524 F323E223 
01172B D023BF23 AD239C23   B   287                    db 0D0h,023h,0BFh,023h,0ADh,023
011733 8B237A23 68235723 
01173B 46233523 24231423   B   288                    db 046h,023h,035h,023h,024h,023
011743 0323F222 E222D122 
01174B C122B022 A0228F22   B   289                    db 0C1h,022h,0B0h,022h,0A0h,022
011753 7F226F22 5F224F22 
01175B 3F222F22 1F220F22   B   290                    db 03Fh,022h,02Fh,022h,01Fh,022
011763 FF21EF21 E021D021 
01176B C121B121 A2219221   B   291                    db 0C1h,021h,0B1h,021h,0A2h,021
011773 83217321 64215521 
01177B 46213721 28211921   B   292                    db 046h,021h,037h,021h,028h,021
011783 0A21FB20 EC20DE20 
01178B CF20C020 B220A320   B   293                    db 0CFh,020h,0C0h,020h,0B2h,020
011793 94208620 78206920 
01179B 5B204D20 3E203020   B   294                    db 05Bh,020h,04Dh,020h,03Eh,020
0117A3 22201420 0620F81F 
0117AB EA1FDC1F CF1FC11F   B   295                    db 0EAh,01Fh,0DCh,01Fh,0CFh,01F
0117B3 B31FA51F 981F8A1F 
0117BB 7D1F6F1F 621F541F   B   296                    db 07Dh,01Fh,06Fh,01Fh,062h,01F
0117C3 471F3A1F 2C1F1F1F 
0117CB 121F051F F81EEA1E   B   297                    db 012h,01Fh,005h,01Fh,0F8h,01E
0117D3 DD1ED01E C41EB71E 
0117DB AA1E9D1E 901E841E   B   298                    db 0AAh,01Eh,09Dh,01Eh,090h,01E
0117E3 771E6A1E 5E1E511E 
0117EB 451E381E 2C1E1F1E   B   299                    db 045h,01Eh,038h,01Eh,02Ch,01E
0117F3 131E071E FA1DEE1D 
0117FB E21DD61D CA1DBD1D   B   300                    db 0E2h,01Dh,0D6h,01Dh,0CAh,01D
011803 B11DA51D 991D8D1D 
01180B 821D761D 6A1D5E1D   B   301                    db 082h,01Dh,076h,01Dh,06Ah,01D
011813 521D471D 3B1D2F1D 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  49


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_EZ80P_audio.asm
01181B 241D181D 0D1D011D   B   302                    db 024h,01Dh,018h,01Dh,00Dh,01D
011823 F61CEA1C DF1CD41C 
01182B C81CBD1C B21CA61C   B   303                    db 0C8h,01Ch,0BDh,01Ch,0B2h,01C
011833 9B1C901C 851C7A1C 
01183B 6F1C641C 591C4E1C   B   304                    db 06Fh,01Ch,064h,01Ch,059h,01C
011843 431C381C 2D1C221C 
01184B 181C0D1C 021CF81B   B   305                    db 018h,01Ch,00Dh,01Ch,002h,01C
011853 ED1BE21B D81BCD1B 
01185B C31BB81B AE1BA31B   B   306                    db 0C3h,01Bh,0B8h,01Bh,0AEh,01B
011863 991B8E1B 841B7A1B 
01186B 6F1B651B 5B1B511B   B   307                    db 06Fh,01Bh,065h,01Bh,05Bh,01B
011873 471B3C1B 321B281B 
01187B 1E1B141B 0A1B001B   B   308                    db 01Eh,01Bh,014h,01Bh,00Ah,01B
011883 F61AEC1A E31AD91A 
01188B CF1AC51A BB1AB21A   B   309                    db 0CFh,01Ah,0C5h,01Ah,0BBh,01A
011893 A81A9E1A 951A8B1A 
01189B 811A781A 6E1A651A   B   310                    db 081h,01Ah,078h,01Ah,06Eh,01A
0118A3 5B1A521A 481A3F1A 
0118AB 361A2C1A 231A1A1A   B   311                    db 036h,01Ah,02Ch,01Ah,023h,01A
0118B3 101A071A FE19F519 
0118BB EB19E219 D919D019   B   312                    db 0EBh,019h,0E2h,019h,0D9h,019
0118C3 C719BE19 B519AC19 
0118CB A3199A19 91198819   B   313                    db 0A3h,019h,09Ah,019h,091h,019
0118D3 7F197619 6E196519 
0118DB 5C195319 4A194219   B   314                    db 05Ch,019h,053h,019h,04Ah,019
0118E3 39193019 28191F19 
0118EB 16190E19 0519FD18   B   315                    db 016h,019h,00Eh,019h,005h,019
0118F3 F418EC18 E318DB18 
0118FB D318CA18 C218B918   B   316                    db 0D3h,018h,0CAh,018h,0C2h,018
011903 B118A918 A0189818 
01190B 90188818 80187718   B   317                    db 090h,018h,088h,018h,080h,018
011913 6F186718 5F185718 
01191B 4F184718 3F183718   B   318                    db 04Fh,018h,047h,018h,03Fh,018
011923 2F182718 1F181718 
01192B 0F180718 FF17F717   B   319                    db 00Fh,018h,007h,018h,0FFh,017
011933 F017E817 E017D817 
01193B D017C917 C117B917   B   320                    db 0D0h,017h,0C9h,017h,0C1h,017
011943 B217AA17 A2179B17 
01194B 93178C17 84177D17   B   321                    db 093h,017h,08Ch,017h,084h,017
011953 75176D17 66175F17 
01195B 57175017 48174117   B   322                    db 057h,017h,050h,017h,048h,017
011963 3A173217 2B172417 
01196B 1C171517 0E170617   B   323                    db 01Ch,017h,015h,017h,00Eh,017
011973 FF16F816 F116EA16 
01197B E316DB16 D416CD16   B   324                    db 0E3h,016h,0DBh,016h,0D4h,016
011983 C616BF16 B816B116 
01198B AA16A316 9C169516   B   325                    db 0AAh,016h,0A3h,016h,09Ch,016
011993 8E168716 80167916 
01199B 72166C16 65165E16   B   326                    db 072h,016h,06Ch,016h,065h,016
0119A3 57165016 49164316 
0119AB 3C163516 2E162816   B   327                    db 03Ch,016h,035h,016h,02Eh,016
0119B3 21161A16 14160D16 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)07-Sep-11     15:44:11     page:  50


PC     Object              I  Line    Source ..\..\..\..\..\Includes\routines/ADL_mode_Protracker_to_EZ80P_audio.asm
0119BB 06160016 F915F315   B   328                    db 006h,016h,000h,016h,0F9h,015
0119C3 EC15E615 DF15D915 
0119CB D215CC15 C515BF15   B   329                    db 0D2h,015h,0CCh,015h,0C5h,015
0119D3 B815B215 AB15A515 
0119DB 9F159815 92158B15   B   330                    db 09Fh,015h,098h,015h,092h,015
0119E3 85157F15 79157215 
0119EB 6C156615 5F155915   B   331                    db 06Ch,015h,066h,015h,05Fh,015
0119F3 53154D15 47154015 
0119FB 3A153415 2E152815   B   332                    db 03Ah,015h,034h,015h,02Eh,015
011A03 22151C15 16151015 
011A0B 0A150415 FE14F814   B   333                    db 00Ah,015h,004h,015h,0FEh,014
011A13 F214EC14 E614E014 
011A1B DA14D414 CE14C814   B   334                    db 0DAh,014h,0D4h,014h,0CEh,014
011A23 C214BC14 B614B114 
011A2B AB14A514 9F149914   B   335                    db 0ABh,014h,0A5h,014h,09Fh,014
011A33 93148E14 88148214 
011A3B 7C147714 71146B14   B   336                    db 07Ch,014h,077h,014h,071h,014
011A43 66146014 5A145514 
011A4B 4F144914 44143E14   B   337                    db 04Fh,014h,049h,014h,044h,014
011A53 39143314 2E142814 
011A5B 22141D14 17141214   B   338                    db 022h,014h,01Dh,014h,017h,014
011A63 0C140714 0114FC13 
011A6B F713F113 EC13E613   B   339                    db 0F7h,013h,0F1h,013h,0ECh,013
011A73 E113DC13 D613D113 
011A7B CB13C613 C113       B   340                    db 0CBh,013h,0C6h,013h,0C1h,013
                           B   341    				
                           B   342    				
                           B   343    ;----------------------------------------------
                           B   344    ; EZ80P specific code ends
                           B   345    ;----------------------------------------------
                           B   346    
                           A   174    
                           A   175    ;----------------------------------------------
                           A   176    
                           A   177    ALIGN 2
                           A   178    
011A82 00                  A   179    music_module	db 0
                           A   180    
                           A   181    ;----------------------------------------------
                           A   182    
                           A   183    		


Errors: 0
Warnings: 0
Lines Assembled: 2290
